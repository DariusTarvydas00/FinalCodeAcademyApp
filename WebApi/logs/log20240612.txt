2024-06-12 09:48:40.279 +03:00 [INF] Starting application
2024-06-12 09:48:41.358 +03:00 [INF] Configuring application
2024-06-12 09:48:42.197 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 09:48:42.993 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 09:48:42.996 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 09:48:42.997 +03:00 [INF] Hosting environment: Development
2024-06-12 09:48:42.997 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 09:48:43.219 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 09:48:43.361 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 143.433ms
2024-06-12 09:48:43.399 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui.css - null null
2024-06-12 09:48:43.399 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui-bundle.js - null null
2024-06-12 09:48:43.402 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui-standalone-preset.js - null null
2024-06-12 09:48:43.408 +03:00 [INF] The file /swagger-ui-standalone-preset.js was not modified
2024-06-12 09:48:43.408 +03:00 [INF] The file /swagger-ui-bundle.js was not modified
2024-06-12 09:48:43.408 +03:00 [INF] The file /swagger-ui.css was not modified
2024-06-12 09:48:43.409 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui-standalone-preset.js - 304 null text/javascript 7.2541ms
2024-06-12 09:48:43.409 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui-bundle.js - 304 null text/javascript 10.1114ms
2024-06-12 09:48:43.410 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui.css - 304 null text/css 10.8308ms
2024-06-12 09:48:43.495 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 09:48:43.566 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 70.6993ms
2024-06-12 09:50:49.892 +03:00 [INF] Application is shutting down...
2024-06-12 09:50:53.182 +03:00 [INF] Starting application
2024-06-12 09:50:53.274 +03:00 [INF] Configuring application
2024-06-12 09:50:53.386 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 09:50:53.435 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 09:50:53.438 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 09:50:53.439 +03:00 [INF] Hosting environment: Development
2024-06-12 09:50:53.439 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 09:50:53.679 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 09:50:53.790 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 111.8255ms
2024-06-12 09:50:53.890 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 09:50:53.958 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 67.4717ms
2024-06-12 09:51:12.463 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 154
2024-06-12 09:51:12.470 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 09:51:12.543 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 09:51:12.561 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 09:51:12.942 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 09:51:12.946 +03:00 [INF] Executing Register method for userName: RhpVfNQtyOiD
2024-06-12 09:51:12.950 +03:00 [INF] Registering user with username: RhpVfNQtyOiD
2024-06-12 09:51:12.953 +03:00 [INF] Fetching user by username: RhpVfNQtyOiD
2024-06-12 09:51:14.880 +03:00 [INF] Executed DbCommand (103ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 09:51:14.926 +03:00 [WRN] User with username: RhpVfNQtyOiD not found
2024-06-12 09:51:14.928 +03:00 [INF] Creating user with username: RhpVfNQtyOiD
2024-06-12 09:51:14.933 +03:00 [INF] Creating user with username: RhpVfNQtyOiD
2024-06-12 09:51:15.201 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 09:51:15.223 +03:00 [INF] Successfully created user with username: RhpVfNQtyOiD
2024-06-12 09:51:15.224 +03:00 [INF] Successfully registered user with username: RhpVfNQtyOiD
2024-06-12 09:51:15.225 +03:00 [INF] User registered successfully with userName: RhpVfNQtyOiD
2024-06-12 09:51:15.230 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2282.4078ms.
2024-06-12 09:51:15.238 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 09:51:15.246 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 2679.901ms
2024-06-12 09:51:15.248 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 09:51:15.257 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 2793.4649ms
2024-06-12 09:51:31.224 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 92
2024-06-12 09:51:31.231 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 09:51:31.236 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 09:51:31.243 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 09:51:31.247 +03:00 [INF] Executing Login method for userName: RhpVfNQtyOiD
2024-06-12 09:51:31.275 +03:00 [INF] User login attempt with username: RhpVfNQtyOiD
2024-06-12 09:51:31.276 +03:00 [INF] Fetching user by username: RhpVfNQtyOiD
2024-06-12 09:51:31.403 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 09:51:31.415 +03:00 [INF] Generating JWT token for username: RhpVfNQtyOiD
2024-06-12 09:51:31.451 +03:00 [INF] User successfully logged in with username: RhpVfNQtyOiD
2024-06-12 09:51:31.452 +03:00 [INF] User logged in successfully with userName: RhpVfNQtyOiD
2024-06-12 09:51:31.453 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 208.7175ms.
2024-06-12 09:51:31.454 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 09:51:31.455 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 217.1015ms
2024-06-12 09:51:31.456 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 09:51:31.457 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 233.0287ms
2024-06-12 09:51:44.314 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 177
2024-06-12 09:51:44.346 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 09:51:44.349 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 09:51:44.361 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 09:51:44.364 +03:00 [INF] Executing Add method
2024-06-12 09:51:44.516 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Id], [Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-06-12 09:51:44.518 +03:00 [INF] Person Information added successfully
2024-06-12 09:51:44.519 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 157.1803ms.
2024-06-12 09:51:44.520 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 09:51:44.521 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 170.354ms
2024-06-12 09:51:44.521 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 09:51:44.521 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 207.0244ms
2024-06-12 09:51:53.574 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 09:51:53.578 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 09:51:53.582 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 09:51:53.583 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 09:51:53.585 +03:00 [INF] Executing GetAll method
2024-06-12 09:51:53.707 +03:00 [INF] Executed DbCommand (67ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 09:51:53.717 +03:00 [INF] GetAll method executed successfully
2024-06-12 09:51:53.725 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 141.4559ms.
2024-06-12 09:51:53.727 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 09:51:53.737 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 154.3866ms
2024-06-12 09:51:53.738 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 09:51:53.738 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 163.8186ms
2024-06-12 09:52:20.982 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload?noteId=3e15a808-20a8-4b8c-c5d4-08dc8aac1f4c - multipart/form-data; boundary=---------------------------23155727502599062723604041446 26726
2024-06-12 09:52:20.984 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 09:52:20.988 +03:00 [INF] Route matched with {action = "UploadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile, System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 09:52:21.005 +03:00 [INF] Executing action method WebApi.Controllers.FileController.UploadFile (WebApi) - Validation state: "Valid"
2024-06-12 09:52:21.007 +03:00 [INF] Executing UploadFile method for user: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 09:52:21.009 +03:00 [INF] Uploading file: Screenshot 2024-06-10 183231.png for user: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 09:52:21.013 +03:00 [ERR] Error occurred while uploading file: Screenshot 2024-06-10 183231.png for user: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
FileCreateDto -> FileEntity
App.Dtos.FileDtos.FileCreateDto -> DataAccess.Entities.FileEntity
   at lambda_method236(Closure, Object, FileEntity, ResolutionContext)
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 40
2024-06-12 09:52:21.090 +03:00 [ERR] Error occurred while uploading file for user: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
FileCreateDto -> FileEntity
App.Dtos.FileDtos.FileCreateDto -> DataAccess.Entities.FileEntity
   at lambda_method236(Closure, Object, FileEntity, ResolutionContext)
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 40
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 72
   at WebApi.Controllers.FileController.UploadFile(IFormFile file, Guid noteId) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\FileController.cs:line 33
2024-06-12 09:52:21.096 +03:00 [INF] Executed action method WebApi.Controllers.FileController.UploadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 89.5605ms.
2024-06-12 09:52:21.097 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 09:52:21.098 +03:00 [INF] Executed action WebApi.Controllers.FileController.UploadFile (WebApi) in 109.1447ms
2024-06-12 09:52:21.099 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 09:52:21.100 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload?noteId=3e15a808-20a8-4b8c-c5d4-08dc8aac1f4c - 409 null text/plain; charset=utf-8 118.7045ms
2024-06-12 09:52:36.985 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload?noteId=3e15a808-20a8-4b8c-c5d4-08dc8aac1f4c - multipart/form-data; boundary=---------------------------405408233911816400383368637725 26729
2024-06-12 09:52:36.998 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 09:52:36.999 +03:00 [INF] Route matched with {action = "UploadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile, System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 09:52:37.001 +03:00 [INF] Executing action method WebApi.Controllers.FileController.UploadFile (WebApi) - Validation state: "Valid"
2024-06-12 09:52:37.002 +03:00 [INF] Executing UploadFile method for user: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 09:52:37.002 +03:00 [INF] Uploading file: Screenshot 2024-06-10 183231.jpg for user: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 09:52:37.003 +03:00 [ERR] Error occurred while uploading file: Screenshot 2024-06-10 183231.jpg for user: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
FileCreateDto -> FileEntity
App.Dtos.FileDtos.FileCreateDto -> DataAccess.Entities.FileEntity
   at lambda_method236(Closure, Object, FileEntity, ResolutionContext)
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 40
2024-06-12 09:52:37.005 +03:00 [ERR] Error occurred while uploading file for user: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
FileCreateDto -> FileEntity
App.Dtos.FileDtos.FileCreateDto -> DataAccess.Entities.FileEntity
   at lambda_method236(Closure, Object, FileEntity, ResolutionContext)
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 40
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 72
   at WebApi.Controllers.FileController.UploadFile(IFormFile file, Guid noteId) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\FileController.cs:line 33
2024-06-12 09:52:37.007 +03:00 [INF] Executed action method WebApi.Controllers.FileController.UploadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 4.8496ms.
2024-06-12 09:52:37.009 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 09:52:37.010 +03:00 [INF] Executed action WebApi.Controllers.FileController.UploadFile (WebApi) in 9.6055ms
2024-06-12 09:52:37.010 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 09:52:37.011 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload?noteId=3e15a808-20a8-4b8c-c5d4-08dc8aac1f4c - 409 null text/plain; charset=utf-8 26.5141ms
2024-06-12 09:53:28.739 +03:00 [INF] Application is shutting down...
2024-06-12 09:53:31.613 +03:00 [INF] Starting application
2024-06-12 09:53:31.703 +03:00 [INF] Configuring application
2024-06-12 09:53:31.812 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 09:53:31.858 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 09:53:31.861 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 09:53:31.861 +03:00 [INF] Hosting environment: Development
2024-06-12 09:53:31.862 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 09:53:32.322 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 09:53:32.434 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 113.2179ms
2024-06-12 09:53:32.533 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 09:53:32.606 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 73.2788ms
2024-06-12 09:53:50.505 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 92
2024-06-12 09:53:50.515 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 09:53:50.613 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 09:53:50.645 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 09:53:50.978 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 09:53:50.982 +03:00 [INF] Executing Login method for userName: RhpVfNQtyOiD
2024-06-12 09:53:50.987 +03:00 [INF] User login attempt with username: RhpVfNQtyOiD
2024-06-12 09:53:50.990 +03:00 [INF] Fetching user by username: RhpVfNQtyOiD
2024-06-12 09:53:53.005 +03:00 [INF] Executed DbCommand (119ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 09:53:53.132 +03:00 [INF] Generating JWT token for username: RhpVfNQtyOiD
2024-06-12 09:53:53.146 +03:00 [INF] User successfully logged in with username: RhpVfNQtyOiD
2024-06-12 09:53:53.148 +03:00 [INF] User logged in successfully with userName: RhpVfNQtyOiD
2024-06-12 09:53:53.155 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2169.4978ms.
2024-06-12 09:53:53.169 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 09:53:53.175 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 2522.7061ms
2024-06-12 09:53:53.177 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 09:53:53.193 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 2687.8511ms
2024-06-12 09:54:10.955 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload?noteId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - multipart/form-data; boundary=---------------------------37488344414654220251839499574 26727
2024-06-12 09:54:10.960 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 09:54:10.966 +03:00 [INF] Route matched with {action = "UploadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile, System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 09:54:10.981 +03:00 [INF] Executing action method WebApi.Controllers.FileController.UploadFile (WebApi) - Validation state: "Valid"
2024-06-12 09:54:10.983 +03:00 [INF] Executing UploadFile method for user: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 09:54:10.985 +03:00 [INF] Uploading file: Screenshot 2024-06-10 183231.jpg for user: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 09:54:11.220 +03:00 [INF] Uploading file: Screenshot 2024-06-10 183231.jpg for user: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 09:54:11.515 +03:00 [ERR] Failed executing DbCommand (73ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [FileEntities] ([Id], [FileName], [FilePath], [PersonInformationId], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 09:54:11.537 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAccess.MainDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_FileEntities_PersonInformations_PersonInformationId". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c8b7719e-1369-4e06-9d40-d7778cc76aab
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_FileEntities_PersonInformations_PersonInformationId". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c8b7719e-1369-4e06-9d40-d7778cc76aab
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-06-12 09:54:11.542 +03:00 [ERR] An error occurred while uploading file: Screenshot 2024-06-10 183231.jpg for user: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_FileEntities_PersonInformations_PersonInformationId". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c8b7719e-1369-4e06-9d40-d7778cc76aab
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.FileRepository.UploadFile(FileEntity file) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 25
2024-06-12 09:54:11.553 +03:00 [ERR] Error occurred while uploading file: Screenshot 2024-06-10 183231.jpg for user: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_FileEntities_PersonInformations_PersonInformationId". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c8b7719e-1369-4e06-9d40-d7778cc76aab
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.FileRepository.UploadFile(FileEntity file) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 25
   at DataAccess.Repositories.FileRepository.UploadFile(FileEntity file) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 31
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 66
2024-06-12 09:54:11.561 +03:00 [ERR] Error occurred while uploading file for user: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_FileEntities_PersonInformations_PersonInformationId". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:c8b7719e-1369-4e06-9d40-d7778cc76aab
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.FileRepository.UploadFile(FileEntity file) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 25
   at DataAccess.Repositories.FileRepository.UploadFile(FileEntity file) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 31
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 66
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 72
   at WebApi.Controllers.FileController.UploadFile(IFormFile file, Guid noteId) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\FileController.cs:line 33
2024-06-12 09:54:11.566 +03:00 [INF] Executed action method WebApi.Controllers.FileController.UploadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 584.0607ms.
2024-06-12 09:54:11.568 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 09:54:11.569 +03:00 [INF] Executed action WebApi.Controllers.FileController.UploadFile (WebApi) in 602.0125ms
2024-06-12 09:54:11.569 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 09:54:11.571 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload?noteId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - 409 null text/plain; charset=utf-8 616.077ms
2024-06-12 10:01:26.289 +03:00 [INF] Application is shutting down...
2024-06-12 10:01:29.635 +03:00 [INF] Starting application
2024-06-12 10:01:29.728 +03:00 [INF] Configuring application
2024-06-12 10:01:37.484 +03:00 [INF] Starting application
2024-06-12 10:01:37.880 +03:00 [INF] Configuring application
2024-06-12 10:01:38.303 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 10:01:38.423 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 10:01:38.426 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 10:01:38.427 +03:00 [INF] Hosting environment: Development
2024-06-12 10:01:38.427 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 10:01:38.845 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 10:01:38.964 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 120.215ms
2024-06-12 10:01:39.084 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 10:01:39.169 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 84.6691ms
2024-06-12 10:01:41.770 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 92
2024-06-12 10:01:41.779 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 10:01:41.907 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 10:01:41.924 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 10:01:42.140 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 10:01:42.142 +03:00 [INF] Executing Login method for userName: RhpVfNQtyOiD
2024-06-12 10:01:42.160 +03:00 [INF] User login attempt with username: RhpVfNQtyOiD
2024-06-12 10:01:42.161 +03:00 [INF] Fetching user by username: RhpVfNQtyOiD
2024-06-12 10:01:43.649 +03:00 [INF] Executed DbCommand (122ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 10:01:43.721 +03:00 [INF] Generating JWT token for username: RhpVfNQtyOiD
2024-06-12 10:01:43.728 +03:00 [INF] User successfully logged in with username: RhpVfNQtyOiD
2024-06-12 10:01:43.729 +03:00 [INF] User logged in successfully with userName: RhpVfNQtyOiD
2024-06-12 10:01:43.732 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1589.2032ms.
2024-06-12 10:01:43.739 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 10:01:43.743 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1815.8349ms
2024-06-12 10:01:43.744 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 10:01:43.750 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1980.8009ms
2024-06-12 10:02:12.058 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - multipart/form-data; boundary=---------------------------5616373804354055894254753816 26725
2024-06-12 10:02:12.065 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 10:02:12.113 +03:00 [INF] Route matched with {action = "UploadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile, System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 10:02:12.129 +03:00 [INF] Executing action method WebApi.Controllers.FileController.UploadFile (WebApi) - Validation state: "Valid"
2024-06-12 10:02:12.440 +03:00 [INF] Executed action WebApi.Controllers.FileController.UploadFile (WebApi) in 325.7365ms
2024-06-12 10:02:12.441 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 10:02:12.443 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: User ID claim not found or invalid.
   at WebApi.Helper.ClaimsHelper.GetUserId(ClaimsPrincipal user) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Helper\ClaimsHelper.cs:line 14
   at WebApi.Controllers.FileController.UploadFile(IFormFile file, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\FileController.cs:line 23
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-06-12 10:02:12.484 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - 500 null text/plain; charset=utf-8 426.3786ms
2024-06-12 10:02:58.528 +03:00 [INF] Starting application
2024-06-12 10:02:58.919 +03:00 [INF] Configuring application
2024-06-12 10:02:59.317 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 10:02:59.423 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 10:02:59.425 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 10:02:59.426 +03:00 [INF] Hosting environment: Development
2024-06-12 10:02:59.427 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 10:03:00.071 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 10:03:00.190 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 119.608ms
2024-06-12 10:03:00.404 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 10:03:00.477 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 73.3034ms
2024-06-12 10:03:15.216 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 206
2024-06-12 10:03:15.235 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 10:03:15.340 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 10:03:15.361 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 10:03:15.716 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 10:03:15.724 +03:00 [INF] Executing Register method for userName: KEOD97DJleToUlNiXsJr
2024-06-12 10:03:15.726 +03:00 [INF] Registering user with username: KEOD97DJleToUlNiXsJr
2024-06-12 10:03:15.728 +03:00 [INF] Fetching user by username: KEOD97DJleToUlNiXsJr
2024-06-12 10:03:17.655 +03:00 [INF] Executed DbCommand (114ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 10:03:17.694 +03:00 [WRN] User with username: KEOD97DJleToUlNiXsJr not found
2024-06-12 10:03:17.697 +03:00 [INF] Creating user with username: KEOD97DJleToUlNiXsJr
2024-06-12 10:03:17.700 +03:00 [INF] Creating user with username: KEOD97DJleToUlNiXsJr
2024-06-12 10:03:17.961 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 10:03:17.998 +03:00 [INF] Successfully created user with username: KEOD97DJleToUlNiXsJr
2024-06-12 10:03:17.999 +03:00 [INF] Successfully registered user with username: KEOD97DJleToUlNiXsJr
2024-06-12 10:03:18.000 +03:00 [INF] User registered successfully with userName: KEOD97DJleToUlNiXsJr
2024-06-12 10:03:18.006 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2279.7538ms.
2024-06-12 10:03:18.022 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 10:03:18.034 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 2666.147ms
2024-06-12 10:03:18.036 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 10:03:18.046 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 2830.5615ms
2024-06-12 10:03:42.341 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 122
2024-06-12 10:03:42.369 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 10:03:42.371 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 10:03:42.375 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 10:03:42.376 +03:00 [INF] Executing Login method for userName: KEOD97DJleToUlNiXsJr
2024-06-12 10:03:42.391 +03:00 [INF] User login attempt with username: KEOD97DJleToUlNiXsJr
2024-06-12 10:03:42.391 +03:00 [INF] Fetching user by username: KEOD97DJleToUlNiXsJr
2024-06-12 10:03:42.474 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 10:03:42.486 +03:00 [INF] Generating JWT token for username: KEOD97DJleToUlNiXsJr
2024-06-12 10:03:42.531 +03:00 [INF] User successfully logged in with username: KEOD97DJleToUlNiXsJr
2024-06-12 10:03:42.533 +03:00 [INF] User logged in successfully with userName: KEOD97DJleToUlNiXsJr
2024-06-12 10:03:42.533 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 157.6688ms.
2024-06-12 10:03:42.537 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 10:03:42.539 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 166.6535ms
2024-06-12 10:03:42.540 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 10:03:42.541 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 199.7619ms
2024-06-12 10:03:53.440 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 10:03:53.498 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 10:03:53.501 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 10:03:53.504 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 10:03:53.506 +03:00 [INF] Executing GetAll method
2024-06-12 10:03:53.645 +03:00 [INF] Executed DbCommand (67ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 10:03:53.660 +03:00 [INF] GetAll method executed successfully
2024-06-12 10:03:53.661 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 155.9127ms.
2024-06-12 10:03:53.673 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 10:03:53.679 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 176.7867ms
2024-06-12 10:03:53.685 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 10:03:53.688 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 247.9051ms
2024-06-12 10:04:00.942 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 177
2024-06-12 10:04:00.947 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 10:04:00.949 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 10:04:00.955 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 10:04:00.956 +03:00 [INF] Executing Add method
2024-06-12 10:04:01.036 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Id], [Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-06-12 10:04:01.039 +03:00 [INF] Person Information added successfully
2024-06-12 10:04:01.040 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 84.1651ms.
2024-06-12 10:04:01.041 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 10:04:01.042 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 92.212ms
2024-06-12 10:04:01.043 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 10:04:01.046 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 125.9731ms
2024-06-12 10:04:07.734 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 10:04:07.737 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 10:04:07.738 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 10:04:07.741 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 10:04:07.741 +03:00 [INF] Executing GetAll method
2024-06-12 10:04:07.807 +03:00 [INF] Executed DbCommand (63ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 10:04:07.812 +03:00 [INF] GetAll method executed successfully
2024-06-12 10:04:07.813 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 71.2604ms.
2024-06-12 10:04:07.814 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 10:04:07.818 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 78.3182ms
2024-06-12 10:04:07.819 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 10:04:07.820 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 86.0179ms
2024-06-12 10:04:19.970 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=9bdbc7b2-9bb5-44b6-9472-08dc8aadd654 - multipart/form-data; boundary=---------------------------33935206453107633451418567390 26727
2024-06-12 10:04:19.974 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 10:04:19.977 +03:00 [INF] Route matched with {action = "UploadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile, System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 10:04:19.993 +03:00 [INF] Executing action method WebApi.Controllers.FileController.UploadFile (WebApi) - Validation state: "Valid"
2024-06-12 10:04:19.995 +03:00 [INF] Executing UploadFile method for user: "a19020a4-b71e-4c35-d1b5-08dc8aadbc91"
2024-06-12 10:04:19.996 +03:00 [INF] Uploading file: Screenshot 2024-06-10 183231.jpg for user: "a19020a4-b71e-4c35-d1b5-08dc8aadbc91"
2024-06-12 10:04:20.256 +03:00 [INF] Uploading file: Screenshot 2024-06-10 183231.jpg for user: "00000000-0000-0000-0000-000000000000"
2024-06-12 10:04:20.337 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [FileEntities] ([Id], [FileName], [FilePath], [PersonInformationId], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 10:04:20.340 +03:00 [INF] Successfully uploaded file: Screenshot 2024-06-10 183231.jpg for user: "a19020a4-b71e-4c35-d1b5-08dc8aadbc91"
2024-06-12 10:04:20.357 +03:00 [INF] Successfully uploaded file: Screenshot 2024-06-10 183231.jpg for user: "a19020a4-b71e-4c35-d1b5-08dc8aadbc91"
2024-06-12 10:04:20.363 +03:00 [INF] File uploaded successfully for user: "a19020a4-b71e-4c35-d1b5-08dc8aadbc91"
2024-06-12 10:04:20.364 +03:00 [INF] Executed action method WebApi.Controllers.FileController.UploadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 370.0758ms.
2024-06-12 10:04:20.366 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-06-12 10:04:20.476 +03:00 [INF] Executed action WebApi.Controllers.FileController.UploadFile (WebApi) in 497.6496ms
2024-06-12 10:04:20.482 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 10:04:20.486 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=9bdbc7b2-9bb5-44b6-9472-08dc8aadd654 - 200 null application/json; charset=utf-8 515.7235ms
2024-06-12 10:04:58.940 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 10:04:58.968 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 10:04:58.968 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 10:04:58.970 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 10:04:58.970 +03:00 [INF] Executing GetAll method
2024-06-12 10:04:59.041 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 10:04:59.042 +03:00 [INF] GetAll method executed successfully
2024-06-12 10:04:59.043 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 72.6235ms.
2024-06-12 10:04:59.044 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 10:04:59.045 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 75.2186ms
2024-06-12 10:04:59.045 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 10:04:59.047 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 107.222ms
2024-06-12 10:05:09.412 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation/9bdbc7b2-9bb5-44b6-9472-08dc8aadd654 - null null
2024-06-12 10:05:09.414 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetById (WebApi)'
2024-06-12 10:05:09.415 +03:00 [INF] Route matched with {action = "GetById", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[App.Dtos.PersonInformationDtos.PersonInformationDto]] GetById(System.Guid) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 10:05:09.417 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetById (WebApi) - Validation state: "Valid"
2024-06-12 10:05:09.418 +03:00 [INF] Executing GetById method with id: "9bdbc7b2-9bb5-44b6-9472-08dc8aadd654"
2024-06-12 10:05:09.514 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[@__id_0='?' (DbType = Guid), @__userId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId], [p0].[Id], [p0].[ApartmentNumber], [p0].[City], [p0].[HouseNumber], [p0].[PersonInformationId], [p0].[Street], [p0].[UserId]
FROM [PersonInformations] AS [p]
LEFT JOIN [PlaceOfResidences] AS [p0] ON [p].[Id] = [p0].[Id]
WHERE [p].[Id] = @__id_0 AND [p].[UserId] = @__userId_1
2024-06-12 10:05:09.519 +03:00 [INF] GetById method executed successfully for id: "9bdbc7b2-9bb5-44b6-9472-08dc8aadd654"
2024-06-12 10:05:09.519 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetById (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 102.0556ms.
2024-06-12 10:05:09.520 +03:00 [INF] Executing OkObjectResult, writing value of type 'App.Dtos.PersonInformationDtos.PersonInformationDto'.
2024-06-12 10:05:09.521 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetById (WebApi) in 104.9632ms
2024-06-12 10:05:09.523 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetById (WebApi)'
2024-06-12 10:05:09.525 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation/9bdbc7b2-9bb5-44b6-9472-08dc8aadd654 - 200 null application/json; charset=utf-8 112.9394ms
2024-06-12 10:06:07.134 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/File/70952a5c-55fa-49c2-2a18-08dc8aade1d6 - null null
2024-06-12 10:06:07.139 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.DownloadFile (WebApi)'
2024-06-12 10:06:07.141 +03:00 [INF] Route matched with {action = "DownloadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 10:06:07.143 +03:00 [INF] Executing action method WebApi.Controllers.FileController.DownloadFile (WebApi) - Validation state: "Valid"
2024-06-12 10:06:07.144 +03:00 [INF] Executing DownloadFile method for file: "70952a5c-55fa-49c2-2a18-08dc8aade1d6" and user: "a19020a4-b71e-4c35-d1b5-08dc8aadbc91"
2024-06-12 10:06:07.379 +03:00 [ERR] Error occurred while downloading file: "70952a5c-55fa-49c2-2a18-08dc8aade1d6" for user: "a19020a4-b71e-4c35-d1b5-08dc8aadbc91"
System.TypeLoadException: Could not load type 'Microsoft.AspNetCore.Http.Internal.FormFile' from assembly 'Microsoft.AspNetCore.Http, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'.
   at App.Services.FileService.Download(Guid id, Guid userId)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at App.Services.FileService.Download(Guid id, Guid userId)
   at WebApi.Controllers.FileController.DownloadFile(Guid id) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\FileController.cs:line 76
2024-06-12 10:06:07.411 +03:00 [INF] Executed action method WebApi.Controllers.FileController.DownloadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 267.6566ms.
2024-06-12 10:06:07.412 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 10:06:07.413 +03:00 [INF] Executed action WebApi.Controllers.FileController.DownloadFile (WebApi) in 270.7723ms
2024-06-12 10:06:07.414 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.DownloadFile (WebApi)'
2024-06-12 10:06:07.414 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/File/70952a5c-55fa-49c2-2a18-08dc8aade1d6 - 409 null text/plain; charset=utf-8 280.6684ms
2024-06-12 10:10:25.265 +03:00 [INF] Starting application
2024-06-12 10:10:25.638 +03:00 [INF] Configuring application
2024-06-12 10:10:26.012 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 10:10:26.122 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 10:10:26.125 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 10:10:26.126 +03:00 [INF] Hosting environment: Development
2024-06-12 10:10:26.126 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 10:10:26.325 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 10:10:26.438 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 114.8767ms
2024-06-12 10:10:26.548 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 10:10:26.618 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.807ms
2024-06-12 10:10:33.297 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 122
2024-06-12 10:10:33.305 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 10:10:33.466 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 10:10:33.483 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 10:10:33.836 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 10:10:33.840 +03:00 [INF] Executing Login method for userName: KEOD97DJleToUlNiXsJr
2024-06-12 10:10:33.860 +03:00 [INF] User login attempt with username: KEOD97DJleToUlNiXsJr
2024-06-12 10:10:33.862 +03:00 [INF] Fetching user by username: KEOD97DJleToUlNiXsJr
2024-06-12 10:10:35.715 +03:00 [INF] Executed DbCommand (109ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 10:10:35.828 +03:00 [INF] Generating JWT token for username: KEOD97DJleToUlNiXsJr
2024-06-12 10:10:35.843 +03:00 [INF] User successfully logged in with username: KEOD97DJleToUlNiXsJr
2024-06-12 10:10:35.848 +03:00 [INF] User logged in successfully with userName: KEOD97DJleToUlNiXsJr
2024-06-12 10:10:35.854 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2011.702ms.
2024-06-12 10:10:35.866 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 10:10:35.874 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 2385.3773ms
2024-06-12 10:10:35.877 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 10:10:35.889 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 2591.9834ms
2024-06-12 10:10:55.215 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/File/70952a5c-55fa-49c2-2a18-08dc8aade1d6 - null null
2024-06-12 10:10:55.224 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.DownloadFile (WebApi)'
2024-06-12 10:10:55.228 +03:00 [INF] Route matched with {action = "DownloadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Microsoft.AspNetCore.Http.IFormFile]] DownloadFile(System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 10:10:55.232 +03:00 [INF] Executing action method WebApi.Controllers.FileController.DownloadFile (WebApi) - Validation state: "Valid"
2024-06-12 10:10:55.234 +03:00 [INF] Executing DownloadFile method for file: "70952a5c-55fa-49c2-2a18-08dc8aade1d6" and user: "a19020a4-b71e-4c35-d1b5-08dc8aadbc91"
2024-06-12 10:10:55.586 +03:00 [ERR] Error occurred while downloading file: "70952a5c-55fa-49c2-2a18-08dc8aade1d6" for user: "a19020a4-b71e-4c35-d1b5-08dc8aadbc91"
System.TypeLoadException: Could not load type 'Microsoft.AspNetCore.Http.Internal.FormFile' from assembly 'Microsoft.AspNetCore.Http, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'.
   at App.Services.FileService.Download(Guid id, Guid userId)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at App.Services.FileService.Download(Guid id, Guid userId)
   at WebApi.Controllers.FileController.DownloadFile(Guid id) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\FileController.cs:line 76
2024-06-12 10:10:55.622 +03:00 [INF] Executed action method WebApi.Controllers.FileController.DownloadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 388.9705ms.
2024-06-12 10:10:55.623 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 10:10:55.624 +03:00 [INF] Executed action WebApi.Controllers.FileController.DownloadFile (WebApi) in 394.3983ms
2024-06-12 10:10:55.625 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.DownloadFile (WebApi)'
2024-06-12 10:10:55.626 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/File/70952a5c-55fa-49c2-2a18-08dc8aade1d6 - 409 null text/plain; charset=utf-8 411.2922ms
2024-06-12 10:27:14.190 +03:00 [INF] Starting application
2024-06-12 10:27:14.558 +03:00 [INF] Configuring application
2024-06-12 10:27:14.932 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 10:27:15.030 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 10:27:15.032 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 10:27:15.033 +03:00 [INF] Hosting environment: Development
2024-06-12 10:27:15.034 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 10:27:15.263 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 10:27:15.379 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 116.4963ms
2024-06-12 10:27:15.436 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui.css - null null
2024-06-12 10:27:15.445 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-06-12 10:27:15.446 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui.css - 499 143943 text/css 9.9596ms
2024-06-12 10:27:15.489 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 10:27:15.561 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 72.2893ms
2024-06-12 10:27:23.481 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 122
2024-06-12 10:27:23.487 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 10:27:23.659 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 10:27:23.695 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 10:27:23.961 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 10:27:23.963 +03:00 [INF] Executing Login method for userName: KEOD97DJleToUlNiXsJr
2024-06-12 10:27:23.977 +03:00 [INF] User login attempt with username: KEOD97DJleToUlNiXsJr
2024-06-12 10:27:23.978 +03:00 [INF] Fetching user by username: KEOD97DJleToUlNiXsJr
2024-06-12 10:27:25.859 +03:00 [INF] Executed DbCommand (130ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 10:27:25.987 +03:00 [INF] Generating JWT token for username: KEOD97DJleToUlNiXsJr
2024-06-12 10:27:26.005 +03:00 [INF] User successfully logged in with username: KEOD97DJleToUlNiXsJr
2024-06-12 10:27:26.006 +03:00 [INF] User logged in successfully with userName: KEOD97DJleToUlNiXsJr
2024-06-12 10:27:26.013 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2046.2649ms.
2024-06-12 10:27:26.025 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 10:27:26.033 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 2328.1355ms
2024-06-12 10:27:26.035 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 10:27:26.049 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 2567.7284ms
2024-06-12 10:27:33.857 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 10:27:33.868 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 10:27:33.871 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 10:27:33.873 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 10:27:33.874 +03:00 [INF] Executing GetAll method
2024-06-12 10:27:33.984 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 10:27:34.006 +03:00 [INF] GetAll method executed successfully
2024-06-12 10:27:34.007 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 133.9261ms.
2024-06-12 10:27:34.009 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 10:27:34.021 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 149.0343ms
2024-06-12 10:27:34.028 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 10:27:34.029 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 172.1571ms
2024-06-12 10:27:46.793 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=9bdbc7b2-9bb5-44b6-9472-08dc8aadd654 - multipart/form-data; boundary=---------------------------116234525013245086522921598084 10928
2024-06-12 10:27:46.798 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 10:27:46.802 +03:00 [INF] Route matched with {action = "UploadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile, System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 10:27:46.818 +03:00 [INF] Executing action method WebApi.Controllers.FileController.UploadFile (WebApi) - Validation state: "Valid"
2024-06-12 10:27:46.820 +03:00 [INF] Executing UploadFile method for user: "a19020a4-b71e-4c35-d1b5-08dc8aadbc91"
2024-06-12 10:27:46.830 +03:00 [INF] Uploading file: Screenshot 2024-05-02 191135.png for user: "a19020a4-b71e-4c35-d1b5-08dc8aadbc91"
2024-06-12 10:27:46.931 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[@__id_0='?' (DbType = Guid), @__userId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId], [p0].[Id], [p0].[ApartmentNumber], [p0].[City], [p0].[HouseNumber], [p0].[PersonInformationId], [p0].[Street], [p0].[UserId]
FROM [PersonInformations] AS [p]
LEFT JOIN [PlaceOfResidences] AS [p0] ON [p].[Id] = [p0].[Id]
WHERE [p].[Id] = @__id_0 AND [p].[UserId] = @__userId_1
2024-06-12 10:27:46.934 +03:00 [WRN] Invalid PersonInformationId: "9bdbc7b2-9bb5-44b6-9472-08dc8aadd654" for user: "a19020a4-b71e-4c35-d1b5-08dc8aadbc91"
2024-06-12 10:27:47.274 +03:00 [ERR] Error occurred while uploading file: Screenshot 2024-05-02 191135.png for user: "a19020a4-b71e-4c35-d1b5-08dc8aadbc91"
System.ArgumentException: Invalid PersonInformationId (Parameter 'personInformationId')
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 46
2024-06-12 10:27:53.440 +03:00 [ERR] Error occurred while uploading file for user: "a19020a4-b71e-4c35-d1b5-08dc8aadbc91"
System.ArgumentException: Invalid PersonInformationId (Parameter 'personInformationId')
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 46
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 86
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 86
   at WebApi.Controllers.FileController.UploadFile(IFormFile file, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\FileController.cs:line 35
2024-06-12 10:27:53.443 +03:00 [INF] Executed action method WebApi.Controllers.FileController.UploadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 6623.67ms.
2024-06-12 10:27:53.444 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 10:27:53.446 +03:00 [INF] Executed action WebApi.Controllers.FileController.UploadFile (WebApi) in 6642.7352ms
2024-06-12 10:27:53.447 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 10:27:53.448 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=9bdbc7b2-9bb5-44b6-9472-08dc8aadd654 - 409 null text/plain; charset=utf-8 6654.4108ms
2024-06-12 10:28:17.309 +03:00 [INF] Starting application
2024-06-12 10:28:17.401 +03:00 [INF] Configuring application
2024-06-12 10:28:17.515 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 10:28:17.564 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 10:28:17.566 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 10:28:17.567 +03:00 [INF] Hosting environment: Development
2024-06-12 10:28:17.568 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 10:28:17.845 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 10:28:17.956 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 111.6263ms
2024-06-12 10:28:18.057 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 10:28:18.127 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.5335ms
2024-06-12 10:28:39.988 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 174
2024-06-12 10:28:39.994 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 10:28:40.011 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 10:28:40.028 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 10:28:40.196 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 10:28:40.198 +03:00 [INF] Executing Register method for userName: 1lmrsX0YZcr7cGzp3RaC
2024-06-12 10:28:40.199 +03:00 [INF] Registering user with username: 1lmrsX0YZcr7cGzp3RaC
2024-06-12 10:28:40.201 +03:00 [INF] Fetching user by username: 1lmrsX0YZcr7cGzp3RaC
2024-06-12 10:28:41.369 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 10:28:41.391 +03:00 [WRN] User with username: 1lmrsX0YZcr7cGzp3RaC not found
2024-06-12 10:28:41.393 +03:00 [INF] Creating user with username: 1lmrsX0YZcr7cGzp3RaC
2024-06-12 10:28:41.396 +03:00 [INF] Creating user with username: 1lmrsX0YZcr7cGzp3RaC
2024-06-12 10:28:41.584 +03:00 [INF] Executed DbCommand (63ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 10:28:41.593 +03:00 [INF] Successfully created user with username: 1lmrsX0YZcr7cGzp3RaC
2024-06-12 10:28:41.595 +03:00 [INF] Successfully registered user with username: 1lmrsX0YZcr7cGzp3RaC
2024-06-12 10:28:41.595 +03:00 [INF] User registered successfully with userName: 1lmrsX0YZcr7cGzp3RaC
2024-06-12 10:28:41.599 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1399.6182ms.
2024-06-12 10:28:41.606 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 10:28:41.614 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 1581.9438ms
2024-06-12 10:28:41.615 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 10:28:41.624 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 1635.2593ms
2024-06-12 10:28:57.950 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 106
2024-06-12 10:28:57.954 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 10:28:57.958 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 10:28:57.964 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 10:28:57.965 +03:00 [INF] Executing Login method for userName: 1lmrsX0YZcr7cGzp3RaC
2024-06-12 10:28:57.967 +03:00 [INF] User login attempt with username: 1lmrsX0YZcr7cGzp3RaC
2024-06-12 10:28:57.967 +03:00 [INF] Fetching user by username: 1lmrsX0YZcr7cGzp3RaC
2024-06-12 10:28:58.061 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 10:28:58.071 +03:00 [INF] Generating JWT token for username: 1lmrsX0YZcr7cGzp3RaC
2024-06-12 10:28:58.087 +03:00 [INF] User successfully logged in with username: 1lmrsX0YZcr7cGzp3RaC
2024-06-12 10:28:58.088 +03:00 [INF] User logged in successfully with userName: 1lmrsX0YZcr7cGzp3RaC
2024-06-12 10:28:58.088 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 123.788ms.
2024-06-12 10:28:58.089 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 10:28:58.090 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 130.6568ms
2024-06-12 10:28:58.091 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 10:28:58.092 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 142.3513ms
2024-06-12 10:29:08.182 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 177
2024-06-12 10:29:08.214 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 10:29:08.218 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 10:29:08.230 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 10:29:08.232 +03:00 [INF] Executing Add method
2024-06-12 10:29:08.327 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Id], [Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-06-12 10:29:08.329 +03:00 [INF] Person Information added successfully
2024-06-12 10:29:08.330 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 99.6082ms.
2024-06-12 10:29:08.331 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 10:29:08.332 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 113.347ms
2024-06-12 10:29:08.333 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 10:29:08.334 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 151.204ms
2024-06-12 10:29:13.032 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 10:29:13.034 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 10:29:13.036 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 10:29:13.038 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 10:29:13.040 +03:00 [INF] Executing GetAll method
2024-06-12 10:29:13.142 +03:00 [INF] Executed DbCommand (66ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 10:29:13.151 +03:00 [INF] GetAll method executed successfully
2024-06-12 10:29:13.152 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 113.9084ms.
2024-06-12 10:29:13.154 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 10:29:13.162 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 124.8885ms
2024-06-12 10:29:13.163 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 10:29:13.164 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 132.1084ms
2024-06-12 10:29:22.214 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=41a668ff-f391-4ab7-5ba1-08dc8ab158be - multipart/form-data; boundary=---------------------------182153622618176887603439171614 9419
2024-06-12 10:29:22.216 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 10:29:22.219 +03:00 [INF] Route matched with {action = "UploadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile, System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 10:29:22.234 +03:00 [INF] Executing action method WebApi.Controllers.FileController.UploadFile (WebApi) - Validation state: "Valid"
2024-06-12 10:29:22.235 +03:00 [INF] Executing UploadFile method for user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
2024-06-12 10:29:22.238 +03:00 [INF] Uploading file: Screenshot 2024-05-02 015457.png for user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
2024-06-12 10:29:22.320 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[@__id_0='?' (DbType = Guid), @__userId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId], [p0].[Id], [p0].[ApartmentNumber], [p0].[City], [p0].[HouseNumber], [p0].[PersonInformationId], [p0].[Street], [p0].[UserId]
FROM [PersonInformations] AS [p]
LEFT JOIN [PlaceOfResidences] AS [p0] ON [p].[Id] = [p0].[Id]
WHERE [p].[Id] = @__id_0 AND [p].[UserId] = @__userId_1
2024-06-12 10:29:22.321 +03:00 [WRN] Invalid PersonInformationId: "41a668ff-f391-4ab7-5ba1-08dc8ab158be" for user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
2024-06-12 10:29:22.322 +03:00 [ERR] Error occurred while uploading file: Screenshot 2024-05-02 015457.png for user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
System.ArgumentException: Invalid PersonInformationId (Parameter 'personInformationId')
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 46
2024-06-12 10:29:22.331 +03:00 [ERR] Error occurred while uploading file for user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
System.ArgumentException: Invalid PersonInformationId (Parameter 'personInformationId')
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 46
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 86
   at WebApi.Controllers.FileController.UploadFile(IFormFile file, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\FileController.cs:line 35
2024-06-12 10:29:22.333 +03:00 [INF] Executed action method WebApi.Controllers.FileController.UploadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 98.7093ms.
2024-06-12 10:29:22.335 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 10:29:22.335 +03:00 [INF] Executed action WebApi.Controllers.FileController.UploadFile (WebApi) in 115.6014ms
2024-06-12 10:29:22.336 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 10:29:22.338 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=41a668ff-f391-4ab7-5ba1-08dc8ab158be - 409 null text/plain; charset=utf-8 123.8896ms
2024-06-12 10:33:53.856 +03:00 [INF] Application is shutting down...
2024-06-12 10:33:57.049 +03:00 [INF] Starting application
2024-06-12 10:33:57.141 +03:00 [INF] Configuring application
2024-06-12 10:33:57.252 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 10:33:57.317 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 10:33:57.320 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 10:33:57.322 +03:00 [INF] Hosting environment: Development
2024-06-12 10:33:57.322 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 10:33:57.597 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 10:33:57.705 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 108.4022ms
2024-06-12 10:33:57.800 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 10:33:57.869 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 68.7138ms
2024-06-12 10:34:12.541 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 106
2024-06-12 10:34:12.548 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 10:34:12.663 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 10:34:12.697 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 10:34:13.016 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 10:34:13.018 +03:00 [INF] Executing Login method for userName: 1lmrsX0YZcr7cGzp3RaC
2024-06-12 10:34:13.020 +03:00 [INF] User login attempt with username: 1lmrsX0YZcr7cGzp3RaC
2024-06-12 10:34:13.023 +03:00 [INF] Fetching user by username: 1lmrsX0YZcr7cGzp3RaC
2024-06-12 10:34:14.816 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 10:34:14.937 +03:00 [INF] Generating JWT token for username: 1lmrsX0YZcr7cGzp3RaC
2024-06-12 10:34:14.951 +03:00 [INF] User successfully logged in with username: 1lmrsX0YZcr7cGzp3RaC
2024-06-12 10:34:14.952 +03:00 [INF] User logged in successfully with userName: 1lmrsX0YZcr7cGzp3RaC
2024-06-12 10:34:14.976 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1936.3699ms.
2024-06-12 10:34:14.996 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 10:34:15.009 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 2300.0442ms
2024-06-12 10:34:15.013 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 10:34:15.031 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 2490.4488ms
2024-06-12 10:34:26.943 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 10:34:26.953 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 10:34:26.957 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 10:34:26.959 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 10:34:26.961 +03:00 [INF] Executing GetAll method
2024-06-12 10:34:27.103 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 10:34:27.161 +03:00 [INF] GetAll method executed successfully
2024-06-12 10:34:27.163 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 203.1092ms.
2024-06-12 10:34:27.165 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 10:34:27.195 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 236.9177ms
2024-06-12 10:34:27.197 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 10:34:27.199 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 256.751ms
2024-06-12 10:34:38.946 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=41a668ff-f391-4ab7-5ba1-08dc8ab158be - multipart/form-data; boundary=---------------------------26754459532327847241639089362 1135368
2024-06-12 10:34:38.954 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 10:34:38.958 +03:00 [INF] Route matched with {action = "UploadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile, System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 10:34:38.983 +03:00 [INF] Executing action method WebApi.Controllers.FileController.UploadFile (WebApi) - Validation state: "Valid"
2024-06-12 10:34:38.985 +03:00 [INF] Executing UploadFile method for user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
2024-06-12 10:34:38.987 +03:00 [INF] Uploading file: Screenshot 2024-06-02 232420.png for user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
2024-06-12 10:34:39.222 +03:00 [INF] Uploading file: Screenshot 2024-06-02 232420.png for user: "00000000-0000-0000-0000-000000000000"
2024-06-12 10:34:39.467 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [FileEntities] ([Id], [FileName], [FilePath], [PersonInformationId], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 10:34:39.488 +03:00 [INF] Successfully uploaded file: Screenshot 2024-06-02 232420.png for user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
2024-06-12 10:34:39.489 +03:00 [INF] Successfully uploaded file: Screenshot 2024-06-02 232420.png for user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
2024-06-12 10:34:39.490 +03:00 [INF] File uploaded successfully for user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
2024-06-12 10:34:39.496 +03:00 [INF] Executed action method WebApi.Controllers.FileController.UploadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 511.6157ms.
2024-06-12 10:34:39.498 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-06-12 10:34:39.510 +03:00 [INF] Executed action WebApi.Controllers.FileController.UploadFile (WebApi) in 550.6815ms
2024-06-12 10:34:39.512 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 10:34:39.515 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=41a668ff-f391-4ab7-5ba1-08dc8ab158be - 200 null application/json; charset=utf-8 568.9279ms
2024-06-12 10:35:06.559 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/File/41A668FF-F391-4AB7-5BA1-08DC8AB158BE - null null
2024-06-12 10:35:06.561 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.DownloadFile (WebApi)'
2024-06-12 10:35:06.564 +03:00 [INF] Route matched with {action = "DownloadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 10:35:06.566 +03:00 [INF] Executing action method WebApi.Controllers.FileController.DownloadFile (WebApi) - Validation state: "Valid"
2024-06-12 10:35:06.567 +03:00 [INF] Executing DownloadFile method for file: "41a668ff-f391-4ab7-5ba1-08dc8ab158be" and user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
2024-06-12 10:35:06.569 +03:00 [INF] Downloading file with id: "41a668ff-f391-4ab7-5ba1-08dc8ab158be" for user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
2024-06-12 10:35:06.571 +03:00 [INF] Downloading file with id: "41a668ff-f391-4ab7-5ba1-08dc8ab158be" for user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
2024-06-12 10:35:06.632 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[@__id_0='?' (DbType = Guid), @__userId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [f].[Id], [f].[FileName], [f].[FilePath], [f].[PersonInformationId], [f].[UserId]
FROM [FileEntities] AS [f]
WHERE [f].[Id] = @__id_0 AND [f].[UserId] = @__userId_1
2024-06-12 10:35:06.634 +03:00 [WRN] File with id: "41a668ff-f391-4ab7-5ba1-08dc8ab158be" not found for user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
2024-06-12 10:35:06.635 +03:00 [WRN] Unauthorized access attempt to download file with id: "41a668ff-f391-4ab7-5ba1-08dc8ab158be" by user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
2024-06-12 10:35:06.636 +03:00 [ERR] Error occurred while downloading file with id: "41a668ff-f391-4ab7-5ba1-08dc8ab158be" for user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
System.UnauthorizedAccessException: You do not have permission to download this file.
   at App.Services.FileService.Download(Guid id, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 114
2024-06-12 10:35:06.645 +03:00 [WRN] Unauthorized access in DownloadFile method for file: "41a668ff-f391-4ab7-5ba1-08dc8ab158be" and user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
2024-06-12 10:35:06.645 +03:00 [INF] Executed action method WebApi.Controllers.FileController.DownloadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.ForbidResult in 78.8083ms.
2024-06-12 10:35:06.648 +03:00 [INF] Executing ForbidResult with authentication schemes (["You do not have permission to download this file."]).
2024-06-12 10:35:06.652 +03:00 [INF] Executed action WebApi.Controllers.FileController.DownloadFile (WebApi) in 86.8233ms
2024-06-12 10:35:06.653 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.DownloadFile (WebApi)'
2024-06-12 10:35:06.654 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authentication handler is registered for the scheme 'You do not have permission to download this file.'. The registered schemes are: Bearer. Did you forget to call AddAuthentication().Add[SomeAuthHandler]("You do not have permission to download this file.",...)?
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ForbidAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Mvc.ForbidResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-06-12 10:35:06.660 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/File/41A668FF-F391-4AB7-5BA1-08DC8AB158BE - 500 null text/plain; charset=utf-8 101.2442ms
2024-06-12 10:40:21.784 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetAll - null null
2024-06-12 10:40:21.788 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-06-12 10:40:21.791 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-06-12 10:40:21.792 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetAll - 403 0 null 8.2148ms
2024-06-12 10:41:58.864 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/File/8EDDF2DF-A0BF-41D2-C56C-08DC8AB21E0B - null null
2024-06-12 10:41:58.866 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.DownloadFile (WebApi)'
2024-06-12 10:41:58.867 +03:00 [INF] Route matched with {action = "DownloadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 10:41:58.870 +03:00 [INF] Executing action method WebApi.Controllers.FileController.DownloadFile (WebApi) - Validation state: "Valid"
2024-06-12 10:41:58.871 +03:00 [INF] Executing DownloadFile method for file: "8eddf2df-a0bf-41d2-c56c-08dc8ab21e0b" and user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
2024-06-12 10:41:58.872 +03:00 [INF] Downloading file with id: "8eddf2df-a0bf-41d2-c56c-08dc8ab21e0b" for user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
2024-06-12 10:41:58.872 +03:00 [INF] Downloading file with id: "8eddf2df-a0bf-41d2-c56c-08dc8ab21e0b" for user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
2024-06-12 10:41:59.206 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[@__id_0='?' (DbType = Guid), @__userId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [f].[Id], [f].[FileName], [f].[FilePath], [f].[PersonInformationId], [f].[UserId]
FROM [FileEntities] AS [f]
WHERE [f].[Id] = @__id_0 AND [f].[UserId] = @__userId_1
2024-06-12 10:41:59.208 +03:00 [INF] Successfully found file with id: "8eddf2df-a0bf-41d2-c56c-08dc8ab21e0b" for user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
2024-06-12 10:41:59.211 +03:00 [INF] Successfully downloaded file with id: "8eddf2df-a0bf-41d2-c56c-08dc8ab21e0b" for user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
2024-06-12 10:41:59.211 +03:00 [INF] File downloaded successfully for file: "8eddf2df-a0bf-41d2-c56c-08dc8ab21e0b" and user: "9d0aac12-764e-4c7b-8c42-08dc8ab148c0"
2024-06-12 10:41:59.212 +03:00 [INF] Executed action method WebApi.Controllers.FileController.DownloadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.FileStreamResult in 341.0121ms.
2024-06-12 10:41:59.213 +03:00 [INF] Executing FileStreamResult, sending file with download name 'Screenshot 2024-06-02 232420.png' ...
2024-06-12 10:41:59.217 +03:00 [INF] Executed action WebApi.Controllers.FileController.DownloadFile (WebApi) in 348.8681ms
2024-06-12 10:41:59.217 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.DownloadFile (WebApi)'
2024-06-12 10:41:59.218 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/File/8EDDF2DF-A0BF-41D2-C56C-08DC8AB21E0B - 200 11298 application/octet-stream 353.7441ms
2024-06-12 11:39:30.301 +03:00 [INF] Application is shutting down...
2024-06-12 11:39:35.111 +03:00 [INF] Starting application
2024-06-12 11:39:35.206 +03:00 [INF] Configuring application
2024-06-12 11:39:35.320 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 11:39:35.369 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 11:39:35.372 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 11:39:35.373 +03:00 [INF] Hosting environment: Development
2024-06-12 11:39:35.373 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 11:39:35.699 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 11:39:35.811 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 112.6225ms
2024-06-12 11:39:35.842 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui.css - null null
2024-06-12 11:39:35.853 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-06-12 11:39:35.855 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui.css - 499 143943 text/css 12.5047ms
2024-06-12 11:39:35.920 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 11:39:35.990 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 70.178ms
2024-06-12 11:39:56.426 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=9D0AAC12-764E-4C7B-8C42-08DC8AB148C0 - multipart/form-data; boundary=---------------------------36092777623959726538387606154 1135368
2024-06-12 11:39:56.432 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 11:39:56.450 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2024-06-12 11:39:56.453 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-06-12 11:39:56.454 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=9D0AAC12-764E-4C7B-8C42-08DC8AB148C0 - 401 0 null 27.2447ms
2024-06-12 11:39:56.457 +03:00 [INF] Connection id "0HN4ANCO69CGN", Request id "0HN4ANCO69CGN:00000002": the application completed without reading the entire request body.
2024-06-12 11:40:02.388 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload - multipart/form-data; boundary=---------------------------422686340739658804764232859438 1135370
2024-06-12 11:40:02.394 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2024-06-12 11:40:02.395 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-06-12 11:40:02.396 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload - 401 0 null 8.6076ms
2024-06-12 11:40:02.401 +03:00 [INF] Connection id "0HN4ANCO69CGN", Request id "0HN4ANCO69CGN:00000003": the application completed without reading the entire request body.
2024-06-12 11:40:26.805 +03:00 [INF] Application is shutting down...
2024-06-12 11:40:29.616 +03:00 [INF] Starting application
2024-06-12 11:40:29.711 +03:00 [INF] Configuring application
2024-06-12 11:40:29.838 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 11:40:29.895 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 11:40:29.898 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 11:40:29.899 +03:00 [INF] Hosting environment: Development
2024-06-12 11:40:29.899 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 11:40:30.507 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 11:40:30.619 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 112.6648ms
2024-06-12 11:40:30.732 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 11:40:30.809 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 76.5382ms
2024-06-12 11:40:35.571 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=9D0AAC12-764E-4C7B-8C42-08DC8AB148C0 - multipart/form-data; boundary=---------------------------11918807798063881121077160905 171
2024-06-12 11:40:35.577 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 11:40:35.595 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2024-06-12 11:40:35.599 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-06-12 11:40:35.599 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=9D0AAC12-764E-4C7B-8C42-08DC8AB148C0 - 401 0 null 28.685ms
2024-06-12 11:40:40.369 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload - multipart/form-data; boundary=---------------------------212679066735294617841047361091 173
2024-06-12 11:40:40.375 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2024-06-12 11:40:40.376 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-06-12 11:40:40.377 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload - 401 0 null 7.8613ms
2024-06-12 11:40:50.647 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetAll - null null
2024-06-12 11:40:50.651 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-06-12 11:40:50.652 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-06-12 11:40:50.653 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetAll - 401 0 null 6.725ms
2024-06-12 11:40:56.888 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetById?id=9D0AAC12-764E-4C7B-8C42-08DC8AB148C0 - null null
2024-06-12 11:40:56.892 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-06-12 11:40:56.893 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-06-12 11:40:56.894 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetById?id=9D0AAC12-764E-4C7B-8C42-08DC8AB148C0 - 401 0 null 5.41ms
2024-06-12 11:41:10.070 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 58
2024-06-12 11:41:10.073 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:41:10.090 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:41:10.281 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 11:41:10.321 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 225.23ms
2024-06-12 11:41:10.322 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:41:10.332 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 400 null application/problem+json; charset=utf-8 262.1296ms
2024-06-12 11:41:31.901 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 61
2024-06-12 11:41:31.903 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:41:31.903 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:41:31.911 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 11:41:31.912 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 7.9028ms
2024-06-12 11:41:31.913 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:41:31.914 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 400 null application/problem+json; charset=utf-8 12.5447ms
2024-06-12 11:41:40.051 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 66
2024-06-12 11:41:40.054 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:41:40.055 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:41:40.063 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 11:41:40.064 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 7.8596ms
2024-06-12 11:41:40.065 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:41:40.066 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 400 null application/problem+json; charset=utf-8 15.038ms
2024-06-12 11:41:48.093 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 67
2024-06-12 11:41:48.095 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:41:48.096 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:41:48.097 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 11:41:48.099 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 1.9762ms
2024-06-12 11:41:48.100 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:41:48.100 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 400 null application/problem+json; charset=utf-8 6.9646ms
2024-06-12 11:41:58.382 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 76
2024-06-12 11:41:58.388 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:41:58.389 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:41:58.392 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 11:41:58.394 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 1.8102ms
2024-06-12 11:41:58.395 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:41:58.395 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 400 null application/problem+json; charset=utf-8 12.9306ms
2024-06-12 11:42:05.443 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 79
2024-06-12 11:42:05.445 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:42:05.446 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:42:05.448 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 11:42:05.449 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 1.4568ms
2024-06-12 11:42:05.450 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:42:05.451 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 400 null application/problem+json; charset=utf-8 7.5894ms
2024-06-12 11:42:17.334 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 91
2024-06-12 11:42:17.337 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:42:17.338 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:42:17.340 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 11:42:17.341 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 2.0333ms
2024-06-12 11:42:17.343 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:42:17.344 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 400 null application/problem+json; charset=utf-8 9.598ms
2024-06-12 11:42:27.609 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 93
2024-06-12 11:42:27.612 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:42:27.612 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:42:27.615 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 11:42:27.626 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 11.3176ms
2024-06-12 11:42:27.627 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:42:27.628 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 400 null application/problem+json; charset=utf-8 19.0031ms
2024-06-12 11:42:37.307 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 97
2024-06-12 11:42:37.310 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:42:37.311 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:42:37.313 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 11:42:37.313 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 1.48ms
2024-06-12 11:42:37.314 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:42:37.315 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 400 null application/problem+json; charset=utf-8 7.1564ms
2024-06-12 11:42:43.084 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 101
2024-06-12 11:42:43.086 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:42:43.087 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:42:43.089 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 11:42:43.090 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 1.7686ms
2024-06-12 11:42:43.091 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:42:43.091 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 400 null application/problem+json; charset=utf-8 7.792ms
2024-06-12 11:42:51.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 105
2024-06-12 11:42:51.615 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:42:51.616 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:42:51.627 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 11:42:51.631 +03:00 [INF] Executing Register method for userName: 123456789
2024-06-12 11:42:51.633 +03:00 [INF] Registering user with username: 123456789
2024-06-12 11:42:51.635 +03:00 [INF] Fetching user by username: 123456789
2024-06-12 11:42:53.536 +03:00 [INF] Executed DbCommand (103ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 11:42:53.577 +03:00 [WRN] User with username: 123456789 not found
2024-06-12 11:42:53.579 +03:00 [INF] Creating user with username: 123456789
2024-06-12 11:42:53.583 +03:00 [INF] Creating user with username: 123456789
2024-06-12 11:42:53.886 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 11:42:53.901 +03:00 [INF] Successfully created user with username: 123456789
2024-06-12 11:42:53.902 +03:00 [INF] Successfully registered user with username: 123456789
2024-06-12 11:42:53.908 +03:00 [INF] User registered successfully with userName: 123456789
2024-06-12 11:42:53.915 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2281.8747ms.
2024-06-12 11:42:53.922 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 11:42:53.925 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 2308.1693ms
2024-06-12 11:42:53.928 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:42:53.946 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 2342.8278ms
2024-06-12 11:42:59.907 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 115
2024-06-12 11:42:59.910 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:42:59.914 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:42:59.916 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 11:42:59.917 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 1.4953ms
2024-06-12 11:42:59.918 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:42:59.919 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 400 null application/problem+json; charset=utf-8 12.1078ms
2024-06-12 11:43:50.556 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 113
2024-06-12 11:43:50.558 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:43:50.559 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:43:50.561 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 11:43:50.562 +03:00 [INF] Executing Register method for userName: 1234567891234AAaa
2024-06-12 11:43:50.563 +03:00 [INF] Registering user with username: 1234567891234AAaa
2024-06-12 11:43:50.564 +03:00 [INF] Fetching user by username: 1234567891234AAaa
2024-06-12 11:43:50.677 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 11:43:50.679 +03:00 [WRN] User with username: 1234567891234AAaa not found
2024-06-12 11:43:50.679 +03:00 [INF] Creating user with username: 1234567891234AAaa
2024-06-12 11:43:50.680 +03:00 [INF] Creating user with username: 1234567891234AAaa
2024-06-12 11:43:50.751 +03:00 [INF] Executed DbCommand (68ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 11:43:50.752 +03:00 [INF] Successfully created user with username: 1234567891234AAaa
2024-06-12 11:43:50.753 +03:00 [INF] Successfully registered user with username: 1234567891234AAaa
2024-06-12 11:43:50.753 +03:00 [INF] User registered successfully with userName: 1234567891234AAaa
2024-06-12 11:43:50.754 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 191.6387ms.
2024-06-12 11:43:50.755 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 11:43:50.755 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 194.9142ms
2024-06-12 11:43:50.756 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:43:50.756 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 200.2039ms
2024-06-12 11:43:53.479 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 113
2024-06-12 11:43:53.480 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:43:53.481 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:43:53.482 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 11:43:53.483 +03:00 [INF] Executing Register method for userName: 1234567891234AAaa
2024-06-12 11:43:53.483 +03:00 [INF] Registering user with username: 1234567891234AAaa
2024-06-12 11:43:53.484 +03:00 [INF] Fetching user by username: 1234567891234AAaa
2024-06-12 11:43:53.551 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 11:43:53.560 +03:00 [WRN] User with username: 1234567891234AAaa already exists
2024-06-12 11:43:53.561 +03:00 [ERR] Error occurred while registering user with username: 1234567891234AAaa
System.IO.InvalidDataException: User with such username already exists
   at App.Services.UserService.RegisterAsync(UserRegisterDto userRegisterDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 74
2024-06-12 11:43:53.571 +03:00 [ERR] Error occurred while registering user with userName: 1234567891234AAaa
System.IO.InvalidDataException: User with such username already exists
   at App.Services.UserService.RegisterAsync(UserRegisterDto userRegisterDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 74
   at App.Services.UserService.RegisterAsync(UserRegisterDto userRegisterDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 87
   at WebApi.Controllers.UserController.Register(UserRegisterDto userRegisterDto) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\UserController.cs:line 74
2024-06-12 11:43:53.573 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 90.2305ms.
2024-06-12 11:43:53.574 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 11:43:53.575 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 93.0348ms
2024-06-12 11:43:53.576 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:43:53.577 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 409 null text/plain; charset=utf-8 98.3496ms
2024-06-12 11:44:34.023 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 114
2024-06-12 11:44:34.024 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:44:34.025 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:44:34.026 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 11:44:34.027 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 1.2552ms
2024-06-12 11:44:34.027 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:44:34.028 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 400 null application/problem+json; charset=utf-8 4.9767ms
2024-06-12 11:44:53.803 +03:00 [INF] Application is shutting down...
2024-06-12 11:44:57.044 +03:00 [INF] Starting application
2024-06-12 11:44:57.137 +03:00 [INF] Configuring application
2024-06-12 11:44:57.260 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 11:44:57.315 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 11:44:57.318 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 11:44:57.320 +03:00 [INF] Hosting environment: Development
2024-06-12 11:44:57.321 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 11:44:57.569 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 11:44:57.680 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 112.2506ms
2024-06-12 11:44:57.792 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 11:44:57.861 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.0233ms
2024-06-12 11:44:59.729 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 114
2024-06-12 11:44:59.734 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 11:44:59.752 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:44:59.769 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:44:59.939 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 11:44:59.959 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 186.0689ms
2024-06-12 11:44:59.960 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:44:59.962 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 400 null application/problem+json; charset=utf-8 233.4581ms
2024-06-12 11:45:17.609 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 115
2024-06-12 11:45:17.613 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:45:17.614 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:45:17.626 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 11:45:17.629 +03:00 [INF] Executing Register method for userName: 1234567891234AAaa
2024-06-12 11:45:17.630 +03:00 [INF] Registering user with username: 1234567891234AAaa
2024-06-12 11:45:17.632 +03:00 [INF] Fetching user by username: 1234567891234AAaa
2024-06-12 11:45:18.798 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 11:45:18.867 +03:00 [WRN] User with username: 1234567891234AAaa already exists
2024-06-12 11:45:18.868 +03:00 [ERR] Error occurred while registering user with username: 1234567891234AAaa
System.IO.InvalidDataException: User with such username already exists
   at App.Services.UserService.RegisterAsync(UserRegisterDto userRegisterDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 69
2024-06-12 11:45:18.876 +03:00 [ERR] Error occurred while registering user with userName: 1234567891234AAaa
System.IO.InvalidDataException: User with such username already exists
   at App.Services.UserService.RegisterAsync(UserRegisterDto userRegisterDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 69
   at App.Services.UserService.RegisterAsync(UserRegisterDto userRegisterDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 82
   at WebApi.Controllers.UserController.Register(UserRegisterDto userRegisterDto) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\UserController.cs:line 74
2024-06-12 11:45:18.882 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 1251.5257ms.
2024-06-12 11:45:18.885 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 11:45:18.888 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 1273.0957ms
2024-06-12 11:45:18.891 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:45:18.902 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 409 null text/plain; charset=utf-8 1292.4448ms
2024-06-12 11:50:39.099 +03:00 [INF] Application is shutting down...
2024-06-12 11:50:42.322 +03:00 [INF] Starting application
2024-06-12 11:50:42.414 +03:00 [INF] Configuring application
2024-06-12 11:50:42.528 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 11:50:42.578 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 11:50:42.580 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 11:50:42.581 +03:00 [INF] Hosting environment: Development
2024-06-12 11:50:42.582 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 11:50:42.862 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 11:50:42.973 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 111.1199ms
2024-06-12 11:50:43.076 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 11:50:43.145 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 68.1863ms
2024-06-12 11:50:46.904 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 115
2024-06-12 11:50:46.910 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 11:50:46.929 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:50:46.947 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:50:47.122 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 11:50:47.124 +03:00 [INF] Executing Register method for userName: 1234567891234AAaa
2024-06-12 11:50:47.125 +03:00 [INF] Registering user with username: 1234567891234AAaa
2024-06-12 11:50:47.127 +03:00 [INF] Fetching user by username: 1234567891234AAaa
2024-06-12 11:50:48.264 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 11:50:48.327 +03:00 [WRN] User with username: 1234567891234AAaa already exists
2024-06-12 11:50:48.328 +03:00 [ERR] Error occurred while registering user with username: 1234567891234AAaa
System.IO.InvalidDataException: User with such username already exists
   at App.Services.UserService.RegisterAsync(UserRegisterDto userRegisterDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 69
2024-06-12 11:50:48.336 +03:00 [ERR] Error occurred while registering user with userName: 1234567891234AAaa
System.IO.InvalidDataException: User with such username already exists
   at App.Services.UserService.RegisterAsync(UserRegisterDto userRegisterDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 69
   at App.Services.UserService.RegisterAsync(UserRegisterDto userRegisterDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 82
   at WebApi.Controllers.UserController.Register(UserRegisterDto userRegisterDto) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\UserController.cs:line 74
2024-06-12 11:50:48.341 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 1215.6463ms.
2024-06-12 11:50:48.348 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 11:50:48.352 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 1401.6511ms
2024-06-12 11:50:48.354 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:50:48.362 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 409 null text/plain; charset=utf-8 1458.4056ms
2024-06-12 11:52:46.752 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 116
2024-06-12 11:52:46.759 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:52:46.760 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:52:46.768 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 11:52:46.770 +03:00 [INF] Executing Register method for userName: 1234567891234AAaaa
2024-06-12 11:52:46.771 +03:00 [INF] Registering user with username: 1234567891234AAaaa
2024-06-12 11:52:46.772 +03:00 [INF] Fetching user by username: 1234567891234AAaaa
2024-06-12 11:52:46.900 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 11:52:46.903 +03:00 [WRN] User with username: 1234567891234AAaaa not found
2024-06-12 11:52:46.905 +03:00 [INF] Creating user with username: 1234567891234AAaaa
2024-06-12 11:52:46.907 +03:00 [INF] Creating user with username: 1234567891234AAaaa
2024-06-12 11:52:47.056 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 11:52:47.065 +03:00 [INF] Successfully created user with username: 1234567891234AAaaa
2024-06-12 11:52:47.066 +03:00 [INF] Successfully registered user with username: 1234567891234AAaaa
2024-06-12 11:52:47.067 +03:00 [INF] User registered successfully with userName: 1234567891234AAaaa
2024-06-12 11:52:47.067 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 297.2223ms.
2024-06-12 11:52:47.068 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 11:52:47.073 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 308.8627ms
2024-06-12 11:52:47.077 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:52:47.078 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 326.4703ms
2024-06-12 11:52:58.171 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 132
2024-06-12 11:52:58.176 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 11:52:58.181 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:52:58.189 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 11:52:58.197 +03:00 [INF] Executing Login method for userName: 6nB8
2024-06-12 11:52:58.199 +03:00 [INF] User login attempt with username: 6nB8
2024-06-12 11:52:58.200 +03:00 [INF] Fetching user by username: 6nB8
2024-06-12 11:52:58.282 +03:00 [INF] Executed DbCommand (68ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 11:52:58.285 +03:00 [WRN] User with username: 6nB8 not found
2024-06-12 11:52:58.285 +03:00 [WRN] Invalid username: 6nB8
2024-06-12 11:52:58.286 +03:00 [ERR] Error occurred during login attempt with username: 6nB8
System.Security.Authentication.AuthenticationException: Invalid username or password!
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 95
2024-06-12 11:52:58.288 +03:00 [ERR] Error occurred while logging in user with userName: 6nB8
System.Security.Authentication.AuthenticationException: Invalid username or password!
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 95
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 111
   at WebApi.Controllers.UserController.Login(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\UserController.cs:line 92
2024-06-12 11:52:58.290 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 95.989ms.
2024-06-12 11:52:58.291 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 11:52:58.292 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 110.5627ms
2024-06-12 11:52:58.294 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 11:52:58.295 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 409 null text/plain; charset=utf-8 124.156ms
2024-06-12 11:53:13.187 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 146
2024-06-12 11:53:13.189 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 11:53:13.190 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:53:13.192 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 11:53:13.193 +03:00 [INF] Executing Login method for userName: 1234567891234AAaaa
2024-06-12 11:53:13.193 +03:00 [INF] User login attempt with username: 1234567891234AAaaa
2024-06-12 11:53:13.194 +03:00 [INF] Fetching user by username: 1234567891234AAaaa
2024-06-12 11:53:13.255 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 11:53:13.257 +03:00 [WRN] Invalid password for username: 1234567891234AAaaa
2024-06-12 11:53:13.258 +03:00 [ERR] Error occurred during login attempt with username: 1234567891234AAaaa
System.Security.Authentication.AuthenticationException: Invalid username or password!
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 101
2024-06-12 11:53:13.259 +03:00 [ERR] Error occurred while logging in user with userName: 1234567891234AAaaa
System.Security.Authentication.AuthenticationException: Invalid username or password!
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 101
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 111
   at WebApi.Controllers.UserController.Login(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\UserController.cs:line 92
2024-06-12 11:53:13.260 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 67.0952ms.
2024-06-12 11:53:13.261 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 11:53:13.262 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 71.0977ms
2024-06-12 11:53:13.263 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 11:53:13.264 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 409 null text/plain; charset=utf-8 76.6969ms
2024-06-12 11:53:25.588 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 76
2024-06-12 11:53:25.592 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 11:53:25.593 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:53:25.595 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 11:53:25.595 +03:00 [INF] Executing Login method for userName: 1234567891234AAaaa
2024-06-12 11:53:25.596 +03:00 [INF] User login attempt with username: 1234567891234AAaaa
2024-06-12 11:53:25.597 +03:00 [INF] Fetching user by username: 1234567891234AAaaa
2024-06-12 11:53:25.667 +03:00 [INF] Executed DbCommand (68ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 11:53:25.669 +03:00 [INF] Generating JWT token for username: 1234567891234AAaaa
2024-06-12 11:53:25.686 +03:00 [INF] User successfully logged in with username: 1234567891234AAaaa
2024-06-12 11:53:25.686 +03:00 [INF] User logged in successfully with userName: 1234567891234AAaaa
2024-06-12 11:53:25.687 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 91.1895ms.
2024-06-12 11:53:25.687 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 11:53:25.688 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 94.0239ms
2024-06-12 11:53:25.690 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 11:53:25.691 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 103.0086ms
2024-06-12 11:53:44.345 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetAll - null null
2024-06-12 11:53:44.373 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-06-12 11:53:44.375 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-06-12 11:53:44.376 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetAll - 403 0 null 30.3321ms
2024-06-12 11:53:47.751 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetById?id=9D0AAC12-764E-4C7B-8C42-08DC8AB148C0 - null null
2024-06-12 11:53:47.754 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-06-12 11:53:47.755 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-06-12 11:53:47.756 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetById?id=9D0AAC12-764E-4C7B-8C42-08DC8AB148C0 - 403 0 null 5.3067ms
2024-06-12 11:54:06.451 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5236/api/User/Delete?id=9D0AAC12-764E-4C7B-8C42-08DC8AB148C0 - null null
2024-06-12 11:54:06.454 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-06-12 11:54:06.455 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-06-12 11:54:06.456 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5236/api/User/Delete?id=9D0AAC12-764E-4C7B-8C42-08DC8AB148C0 - 403 0 null 5.2301ms
2024-06-12 11:55:10.655 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetAll - null null
2024-06-12 11:55:10.656 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-06-12 11:55:10.657 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-06-12 11:55:10.658 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetAll - 403 0 null 3.0064ms
2024-06-12 11:55:15.320 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 76
2024-06-12 11:55:15.323 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 11:55:15.324 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:55:15.325 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 11:55:15.326 +03:00 [INF] Executing Login method for userName: 1234567891234AAaaa
2024-06-12 11:55:15.326 +03:00 [INF] User login attempt with username: 1234567891234AAaaa
2024-06-12 11:55:15.326 +03:00 [INF] Fetching user by username: 1234567891234AAaaa
2024-06-12 11:55:15.392 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 11:55:15.393 +03:00 [INF] Generating JWT token for username: 1234567891234AAaaa
2024-06-12 11:55:15.394 +03:00 [INF] User successfully logged in with username: 1234567891234AAaaa
2024-06-12 11:55:15.395 +03:00 [INF] User logged in successfully with userName: 1234567891234AAaaa
2024-06-12 11:55:15.395 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 69.458ms.
2024-06-12 11:55:15.396 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 11:55:15.396 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 71.9596ms
2024-06-12 11:55:15.397 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 11:55:15.398 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 77.6227ms
2024-06-12 11:55:24.465 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetAll - null null
2024-06-12 11:55:24.467 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-06-12 11:55:24.467 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-06-12 11:55:24.468 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetAll - 403 0 null 3.1231ms
2024-06-12 11:55:27.623 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 11:55:27.625 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 1.9473ms
2024-06-12 11:55:27.756 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 11:55:27.761 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 5.0265ms
2024-06-12 11:55:31.520 +03:00 [INF] Application is shutting down...
2024-06-12 11:55:34.373 +03:00 [INF] Starting application
2024-06-12 11:55:34.465 +03:00 [INF] Configuring application
2024-06-12 11:55:34.576 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 11:55:34.626 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 11:55:34.628 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 11:55:34.629 +03:00 [INF] Hosting environment: Development
2024-06-12 11:55:34.629 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 11:55:35.116 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 11:55:35.229 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 114.2462ms
2024-06-12 11:55:35.323 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 11:55:35.392 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.1233ms
2024-06-12 11:55:50.964 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/ - null null
2024-06-12 11:55:50.968 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 11:55:50.985 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/ - 404 0 null 21.2641ms
2024-06-12 11:55:50.989 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5236/, Response status code: 404
2024-06-12 11:55:51.020 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/favicon.ico - null null
2024-06-12 11:55:51.022 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/favicon.ico - 404 0 null 2.5236ms
2024-06-12 11:55:51.024 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5236/favicon.ico, Response status code: 404
2024-06-12 11:55:53.963 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 11:55:53.965 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 2.1493ms
2024-06-12 11:55:54.063 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 11:55:54.069 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 6.555ms
2024-06-12 11:56:38.017 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 75
2024-06-12 11:56:38.022 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 11:56:38.039 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:56:38.211 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 11:56:38.213 +03:00 [INF] Executing Login method for userName: 1234567891234AAaaa
2024-06-12 11:56:38.215 +03:00 [INF] User login attempt with username: 1234567891234AAaaa
2024-06-12 11:56:38.216 +03:00 [INF] Fetching user by username: 1234567891234AAaaa
2024-06-12 11:56:39.371 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 11:56:39.434 +03:00 [WRN] Invalid password for username: 1234567891234AAaaa
2024-06-12 11:56:39.435 +03:00 [ERR] Error occurred during login attempt with username: 1234567891234AAaaa
System.Security.Authentication.AuthenticationException: Invalid username or password!
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 101
2024-06-12 11:56:39.443 +03:00 [ERR] Error occurred while logging in user with userName: 1234567891234AAaaa
System.Security.Authentication.AuthenticationException: Invalid username or password!
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 101
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 111
   at WebApi.Controllers.UserController.Login(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\UserController.cs:line 92
2024-06-12 11:56:39.449 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 1234.4605ms.
2024-06-12 11:56:39.456 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 11:56:39.460 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1417.0606ms
2024-06-12 11:56:39.461 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 11:56:39.470 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 409 null text/plain; charset=utf-8 1453.8161ms
2024-06-12 11:56:47.609 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 76
2024-06-12 11:56:47.612 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 11:56:47.613 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:56:47.616 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 11:56:47.616 +03:00 [INF] Executing Login method for userName: 1234567891234AAaaa
2024-06-12 11:56:47.617 +03:00 [INF] User login attempt with username: 1234567891234AAaaa
2024-06-12 11:56:47.617 +03:00 [INF] Fetching user by username: 1234567891234AAaaa
2024-06-12 11:56:47.715 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 11:56:47.717 +03:00 [WRN] Invalid password for username: 1234567891234AAaaa
2024-06-12 11:56:47.717 +03:00 [ERR] Error occurred during login attempt with username: 1234567891234AAaaa
System.Security.Authentication.AuthenticationException: Invalid username or password!
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 101
2024-06-12 11:56:47.718 +03:00 [ERR] Error occurred while logging in user with userName: 1234567891234AAaaa
System.Security.Authentication.AuthenticationException: Invalid username or password!
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 101
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 111
   at WebApi.Controllers.UserController.Login(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\UserController.cs:line 92
2024-06-12 11:56:47.719 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 102.8383ms.
2024-06-12 11:56:47.720 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 11:56:47.721 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 107.0409ms
2024-06-12 11:56:47.722 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 11:56:47.722 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 409 null text/plain; charset=utf-8 112.9663ms
2024-06-12 11:57:22.440 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 113
2024-06-12 11:57:22.442 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:57:22.446 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:57:22.453 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 11:57:22.454 +03:00 [INF] Executing Register method for userName: 1234567891011121314
2024-06-12 11:57:22.455 +03:00 [INF] Registering user with username: 1234567891011121314
2024-06-12 11:57:22.456 +03:00 [INF] Fetching user by username: 1234567891011121314
2024-06-12 11:57:22.517 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 11:57:22.519 +03:00 [WRN] User with username: 1234567891011121314 not found
2024-06-12 11:57:22.520 +03:00 [INF] Creating user with username: 1234567891011121314
2024-06-12 11:57:22.522 +03:00 [INF] Creating user with username: 1234567891011121314
2024-06-12 11:57:22.667 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 11:57:22.676 +03:00 [INF] Successfully created user with username: 1234567891011121314
2024-06-12 11:57:22.677 +03:00 [INF] Successfully registered user with username: 1234567891011121314
2024-06-12 11:57:22.677 +03:00 [INF] User registered successfully with userName: 1234567891011121314
2024-06-12 11:57:22.678 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 224.0369ms.
2024-06-12 11:57:22.679 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 11:57:22.683 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 235.9663ms
2024-06-12 11:57:22.684 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 11:57:22.685 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 244.6432ms
2024-06-12 11:59:03.094 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 79
2024-06-12 11:59:03.096 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 11:59:03.096 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:59:03.098 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 11:59:03.098 +03:00 [INF] Executing Login method for userName: 1234567891011121314
2024-06-12 11:59:03.099 +03:00 [INF] User login attempt with username: 1234567891011121314
2024-06-12 11:59:03.099 +03:00 [INF] Fetching user by username: 1234567891011121314
2024-06-12 11:59:03.171 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 11:59:03.172 +03:00 [WRN] Invalid password for username: 1234567891011121314
2024-06-12 11:59:03.173 +03:00 [ERR] Error occurred during login attempt with username: 1234567891011121314
System.Security.Authentication.AuthenticationException: Invalid username or password!
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 101
2024-06-12 11:59:03.174 +03:00 [ERR] Error occurred while logging in user with userName: 1234567891011121314
System.Security.Authentication.AuthenticationException: Invalid username or password!
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 101
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 111
   at WebApi.Controllers.UserController.Login(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\UserController.cs:line 92
2024-06-12 11:59:03.175 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 76.5141ms.
2024-06-12 11:59:03.176 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 11:59:03.176 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 79.2298ms
2024-06-12 11:59:03.178 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 11:59:03.179 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 409 null text/plain; charset=utf-8 84.4934ms
2024-06-12 11:59:25.082 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 75
2024-06-12 11:59:25.083 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 11:59:25.084 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 11:59:25.085 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 11:59:25.086 +03:00 [INF] Executing Login method for userName: 1234567891011121314
2024-06-12 11:59:25.086 +03:00 [INF] User login attempt with username: 1234567891011121314
2024-06-12 11:59:25.087 +03:00 [INF] Fetching user by username: 1234567891011121314
2024-06-12 11:59:25.147 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 11:59:25.150 +03:00 [INF] Generating JWT token for username: 1234567891011121314
2024-06-12 11:59:25.166 +03:00 [INF] User successfully logged in with username: 1234567891011121314
2024-06-12 11:59:25.166 +03:00 [INF] User logged in successfully with userName: 1234567891011121314
2024-06-12 11:59:25.167 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 80.9682ms.
2024-06-12 11:59:25.168 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 11:59:25.168 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 83.6291ms
2024-06-12 11:59:25.170 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 11:59:25.170 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 88.7144ms
2024-06-12 11:59:31.412 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 11:59:31.414 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 1.846ms
2024-06-12 11:59:31.541 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 11:59:31.546 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 4.4176ms
2024-06-12 11:59:43.742 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetAll - null null
2024-06-12 11:59:43.773 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-06-12 11:59:43.775 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-06-12 11:59:43.776 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetAll - 403 0 null 33.6824ms
2024-06-12 11:59:56.950 +03:00 [INF] Application is shutting down...
2024-06-12 11:59:59.790 +03:00 [INF] Starting application
2024-06-12 11:59:59.884 +03:00 [INF] Configuring application
2024-06-12 11:59:59.998 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 12:00:00.050 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 12:00:00.053 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 12:00:00.053 +03:00 [INF] Hosting environment: Development
2024-06-12 12:00:00.054 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 12:00:00.280 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 12:00:00.392 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 112.9097ms
2024-06-12 12:00:00.415 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui.css - null null
2024-06-12 12:00:00.424 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-06-12 12:00:00.426 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui.css - 499 143943 text/css 11.2039ms
2024-06-12 12:00:00.493 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 12:00:00.563 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 70.2418ms
2024-06-12 12:00:04.252 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 75
2024-06-12 12:00:04.258 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 12:00:04.275 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 12:00:04.294 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 12:00:04.462 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 12:00:04.465 +03:00 [INF] Executing Login method for userName: 1234567891011121314
2024-06-12 12:00:04.467 +03:00 [INF] User login attempt with username: 1234567891011121314
2024-06-12 12:00:04.468 +03:00 [INF] Fetching user by username: 1234567891011121314
2024-06-12 12:00:05.637 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 12:00:05.703 +03:00 [INF] Generating JWT token for username: 1234567891011121314
2024-06-12 12:00:05.718 +03:00 [INF] User successfully logged in with username: 1234567891011121314
2024-06-12 12:00:05.719 +03:00 [INF] User logged in successfully with userName: 1234567891011121314
2024-06-12 12:00:05.723 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1256.4739ms.
2024-06-12 12:00:05.728 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 12:00:05.733 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1435.0584ms
2024-06-12 12:00:05.734 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 12:00:05.743 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1490.1823ms
2024-06-12 12:00:12.647 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetAll - null null
2024-06-12 12:00:12.684 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-06-12 12:00:12.687 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-06-12 12:00:12.688 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetAll - 403 0 null 40.8813ms
2024-06-12 12:06:02.894 +03:00 [INF] Application is shutting down...
2024-06-12 12:06:07.711 +03:00 [INF] Starting application
2024-06-12 12:06:07.807 +03:00 [INF] Configuring application
2024-06-12 12:06:07.931 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 12:06:07.980 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 12:06:07.983 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 12:06:07.984 +03:00 [INF] Hosting environment: Development
2024-06-12 12:06:07.984 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 12:06:08.288 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 12:06:08.402 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 114.6857ms
2024-06-12 12:06:08.515 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 12:06:08.587 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 71.7435ms
2024-06-12 12:06:19.810 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetAll - null null
2024-06-12 12:06:19.815 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 12:06:19.833 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-06-12 12:06:19.836 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-06-12 12:06:19.837 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetAll - 401 0 null 27.1648ms
2024-06-12 12:06:25.444 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 75
2024-06-12 12:06:25.453 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 12:06:25.476 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 12:06:25.708 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 12:06:25.710 +03:00 [INF] Executing Login method for userName: 1234567891011121314
2024-06-12 12:06:25.712 +03:00 [INF] User login attempt with username: 1234567891011121314
2024-06-12 12:06:25.713 +03:00 [INF] Fetching user by username: 1234567891011121314
2024-06-12 12:06:27.375 +03:00 [INF] Executed DbCommand (103ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 12:06:27.499 +03:00 [INF] Generating JWT token for username: 1234567891011121314
2024-06-12 12:06:27.534 +03:00 [INF] User successfully logged in with username: 1234567891011121314
2024-06-12 12:06:27.536 +03:00 [INF] User logged in successfully with userName: 1234567891011121314
2024-06-12 12:06:27.542 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1828.5709ms.
2024-06-12 12:06:27.561 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 12:06:27.572 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 2085.7014ms
2024-06-12 12:06:27.576 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 12:06:27.592 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 2148.0865ms
2024-06-12 12:06:35.078 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetAll - null null
2024-06-12 12:06:35.141 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-06-12 12:06:35.144 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-06-12 12:06:35.146 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetAll - 403 0 null 68.2085ms
2024-06-12 12:08:11.561 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 12:08:11.563 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 12:08:11.567 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 12:08:11.569 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 12:08:11.571 +03:00 [INF] Executing GetAll method
2024-06-12 12:08:11.714 +03:00 [INF] Executed DbCommand (66ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 12:08:11.726 +03:00 [INF] GetAll method executed successfully
2024-06-12 12:08:11.727 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 157.2788ms.
2024-06-12 12:08:11.728 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 12:08:11.741 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 172.7747ms
2024-06-12 12:08:11.741 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 12:08:11.742 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 181.6617ms
2024-06-12 12:09:25.278 +03:00 [INF] Application is shutting down...
2024-06-12 12:09:28.344 +03:00 [INF] Starting application
2024-06-12 12:09:28.437 +03:00 [INF] Configuring application
2024-06-12 12:09:28.550 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 12:09:28.609 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 12:09:28.612 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 12:09:28.613 +03:00 [INF] Hosting environment: Development
2024-06-12 12:09:28.614 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 12:09:28.949 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 12:09:29.059 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 111.2102ms
2024-06-12 12:09:29.139 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/favicon-16x16.png - null null
2024-06-12 12:09:29.148 +03:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2024-06-12 12:09:29.149 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/favicon-16x16.png - 499 665 image/png 9.9115ms
2024-06-12 12:09:29.169 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 12:09:29.241 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 72.3735ms
2024-06-12 12:09:47.724 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 75
2024-06-12 12:09:47.731 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 12:09:47.766 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 12:09:47.798 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 12:09:48.122 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 12:09:48.129 +03:00 [INF] Executing Login method for userName: 1234567891011121314
2024-06-12 12:09:48.133 +03:00 [INF] User login attempt with username: 1234567891011121314
2024-06-12 12:09:48.135 +03:00 [INF] Fetching user by username: 1234567891011121314
2024-06-12 12:09:49.788 +03:00 [INF] Executed DbCommand (107ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 12:09:49.914 +03:00 [INF] Generating JWT token for username: 1234567891011121314
2024-06-12 12:09:49.944 +03:00 [INF] User successfully logged in with username: 1234567891011121314
2024-06-12 12:09:49.945 +03:00 [INF] User logged in successfully with userName: 1234567891011121314
2024-06-12 12:09:49.954 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1821.9695ms.
2024-06-12 12:09:49.966 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 12:09:49.973 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 2168.8632ms
2024-06-12 12:09:49.975 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 12:09:49.993 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 2269.2023ms
2024-06-12 12:09:57.346 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 12:09:57.407 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2024-06-12 12:09:57.413 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-06-12 12:09:57.414 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 403 0 null 68.0495ms
2024-06-12 12:10:02.147 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetAll - null null
2024-06-12 12:10:02.152 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-06-12 12:10:02.153 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-06-12 12:10:02.154 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetAll - 403 0 null 7.06ms
2024-06-12 12:16:02.370 +03:00 [INF] Application is shutting down...
2024-06-12 12:16:05.455 +03:00 [INF] Starting application
2024-06-12 12:16:05.555 +03:00 [INF] Configuring application
2024-06-12 12:16:05.684 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 12:16:05.737 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 12:16:05.739 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 12:16:05.741 +03:00 [INF] Hosting environment: Development
2024-06-12 12:16:05.741 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 12:16:06.043 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 12:16:06.152 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 109.4341ms
2024-06-12 12:16:06.246 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 12:16:06.316 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.8865ms
2024-06-12 12:16:27.771 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 75
2024-06-12 12:16:27.779 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 12:16:27.812 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 12:16:27.843 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 12:16:28.175 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 12:16:28.179 +03:00 [INF] Executing Login method for userName: 1234567891011121314
2024-06-12 12:16:28.182 +03:00 [INF] User login attempt with username: 1234567891011121314
2024-06-12 12:16:28.185 +03:00 [INF] Fetching user by username: 1234567891011121314
2024-06-12 12:16:29.789 +03:00 [INF] Executed DbCommand (99ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 12:16:29.915 +03:00 [INF] Generating JWT token for username: 1234567891011121314
2024-06-12 12:16:29.951 +03:00 [INF] User successfully logged in with username: 1234567891011121314
2024-06-12 12:16:29.953 +03:00 [INF] User logged in successfully with userName: 1234567891011121314
2024-06-12 12:16:29.959 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1777.7673ms.
2024-06-12 12:16:29.977 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 12:16:29.988 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 2134.3044ms
2024-06-12 12:16:29.990 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 12:16:30.010 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 2239.126ms
2024-06-12 12:16:37.058 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetAll - null null
2024-06-12 12:16:37.101 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-06-12 12:16:37.104 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-06-12 12:16:37.104 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetAll - 403 0 null 45.9812ms
2024-06-12 12:16:54.673 +03:00 [INF] Application is shutting down...
2024-06-12 12:16:57.497 +03:00 [INF] Starting application
2024-06-12 12:16:57.587 +03:00 [INF] Configuring application
2024-06-12 12:16:57.696 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 12:16:57.742 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 12:16:57.745 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 12:16:57.745 +03:00 [INF] Hosting environment: Development
2024-06-12 12:16:57.746 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 12:16:57.953 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 12:16:58.062 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 110.051ms
2024-06-12 12:16:58.092 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui.css - null null
2024-06-12 12:16:58.104 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-06-12 12:16:58.105 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui.css - 499 143943 text/css 12.4353ms
2024-06-12 12:16:58.167 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 12:16:58.236 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 68.8213ms
2024-06-12 12:17:11.970 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 158
2024-06-12 12:17:11.979 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 12:17:12.005 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 12:17:12.023 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 12:17:12.188 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 12:17:12.208 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 181.5838ms
2024-06-12 12:17:12.209 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 12:17:12.211 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 400 null application/problem+json; charset=utf-8 240.4224ms
2024-06-12 12:17:23.582 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 162
2024-06-12 12:17:23.588 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 12:17:23.590 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 12:17:23.613 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 12:17:23.620 +03:00 [INF] Executing Register method for userName: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:17:23.623 +03:00 [INF] Registering user with username: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:17:23.625 +03:00 [INF] Fetching user by username: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:17:25.239 +03:00 [INF] Executed DbCommand (105ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 12:17:25.285 +03:00 [WRN] User with username: xpfvoYVP2rkKM6XHGSDT not found
2024-06-12 12:17:25.288 +03:00 [INF] Creating user with username: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:17:25.292 +03:00 [INF] Creating user with username: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:17:25.595 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 12:17:25.604 +03:00 [INF] Successfully created user with username: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:17:25.604 +03:00 [INF] Successfully registered user with username: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:17:25.605 +03:00 [INF] User registered successfully with userName: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:17:25.609 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1987.268ms.
2024-06-12 12:17:25.612 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 12:17:25.614 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 2022.4202ms
2024-06-12 12:17:25.615 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 12:17:25.623 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 2041.0318ms
2024-06-12 12:17:46.885 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 101
2024-06-12 12:17:46.890 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 12:17:46.899 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 12:17:46.913 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 12:17:46.914 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 14.5493ms
2024-06-12 12:17:46.916 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 12:17:46.917 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 400 null application/problem+json; charset=utf-8 31.6283ms
2024-06-12 12:17:54.356 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 100
2024-06-12 12:17:54.358 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 12:17:54.358 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 12:17:54.361 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 12:17:54.363 +03:00 [INF] Executing Login method for userName: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:17:54.370 +03:00 [INF] User login attempt with username: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:17:54.371 +03:00 [INF] Fetching user by username: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:17:54.504 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 12:17:54.515 +03:00 [INF] Generating JWT token for username: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:17:54.544 +03:00 [INF] User successfully logged in with username: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:17:54.545 +03:00 [INF] User logged in successfully with userName: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:17:54.546 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 183.8253ms.
2024-06-12 12:17:54.551 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 12:17:54.552 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 192.471ms
2024-06-12 12:17:54.554 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 12:17:54.555 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 198.7208ms
2024-06-12 12:18:02.840 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 12:18:02.873 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 12:18:02.877 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 12:18:02.878 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 12:18:02.880 +03:00 [INF] Executing GetAll method
2024-06-12 12:18:02.977 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 12:18:02.986 +03:00 [INF] GetAll method executed successfully
2024-06-12 12:18:02.987 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 108.2913ms.
2024-06-12 12:18:02.988 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 12:18:02.996 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 118.8024ms
2024-06-12 12:18:02.997 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 12:18:02.998 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 158.9784ms
2024-06-12 12:18:56.031 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 100
2024-06-12 12:18:56.043 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 12:18:56.044 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 12:18:56.046 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 12:18:56.047 +03:00 [INF] Executing Login method for userName: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:18:56.047 +03:00 [INF] User login attempt with username: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:18:56.047 +03:00 [INF] Fetching user by username: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:18:56.102 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 12:18:56.104 +03:00 [INF] Generating JWT token for username: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:18:56.105 +03:00 [INF] User successfully logged in with username: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:18:56.114 +03:00 [INF] User logged in successfully with userName: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:18:56.115 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 68.0699ms.
2024-06-12 12:18:56.116 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 12:18:56.116 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 70.8259ms
2024-06-12 12:18:56.118 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 12:18:56.118 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 87.8013ms
2024-06-12 12:19:04.640 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 12:19:04.645 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2024-06-12 12:19:04.648 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-06-12 12:19:04.650 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 403 0 null 9.865ms
2024-06-12 12:19:08.470 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetAll - null null
2024-06-12 12:19:08.474 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.GetAll (WebApi)'
2024-06-12 12:19:08.477 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[App.Dtos.UserDtos.UserDto]]] GetAll() on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 12:19:08.478 +03:00 [INF] Executing action method WebApi.Controllers.UserController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 12:19:08.479 +03:00 [INF] Executing GetAll method
2024-06-12 12:19:08.480 +03:00 [INF] Getting all users
2024-06-12 12:19:08.481 +03:00 [INF] Fetching all users
2024-06-12 12:19:08.538 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
2024-06-12 12:19:08.540 +03:00 [INF] Successfully fetched all users
2024-06-12 12:19:08.542 +03:00 [INF] Successfully retrieved all users
2024-06-12 12:19:08.543 +03:00 [INF] GetAll method executed successfully
2024-06-12 12:19:08.543 +03:00 [INF] Executed action method WebApi.Controllers.UserController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 64.4802ms.
2024-06-12 12:19:08.544 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.UserDtos.UserDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 12:19:08.547 +03:00 [INF] Executed action WebApi.Controllers.UserController.GetAll (WebApi) in 68.8356ms
2024-06-12 12:19:08.548 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.GetAll (WebApi)'
2024-06-12 12:19:08.548 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetAll - 200 null application/json; charset=utf-8 77.8234ms
2024-06-12 12:24:04.529 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetById?id=9bd2e9d0-61c2-4c66-14e2-08dc8abdac63 - null null
2024-06-12 12:24:04.531 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.GetById (WebApi)'
2024-06-12 12:24:04.535 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[App.Dtos.UserDtos.UserDto]] GetById(System.Guid) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 12:24:04.541 +03:00 [INF] Executing action method WebApi.Controllers.UserController.GetById (WebApi) - Validation state: "Valid"
2024-06-12 12:24:04.542 +03:00 [INF] Executing GetById method with id: "9bd2e9d0-61c2-4c66-14e2-08dc8abdac63"
2024-06-12 12:24:04.543 +03:00 [INF] Getting user by id: "9bd2e9d0-61c2-4c66-14e2-08dc8abdac63"
2024-06-12 12:24:04.544 +03:00 [INF] Fetching user by id: "9bd2e9d0-61c2-4c66-14e2-08dc8abdac63"
2024-06-12 12:24:04.955 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[PasswordHash], [u0].[PasswordSalt], [u0].[Role], [u0].[UserName], [s].[Id], [s].[Birthday], [s].[Email], [s].[FirstName], [s].[Gender], [s].[LastName], [s].[PersonalCode], [s].[PhoneNumber], [s].[UserId], [s].[Id0], [s].[ApartmentNumber], [s].[City], [s].[HouseNumber], [s].[PersonInformationId], [s].[Street], [s].[UserId0]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [u0]
LEFT JOIN (
    SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId], [p0].[Id] AS [Id0], [p0].[ApartmentNumber], [p0].[City], [p0].[HouseNumber], [p0].[PersonInformationId], [p0].[Street], [p0].[UserId] AS [UserId0]
    FROM [PersonInformations] AS [p]
    LEFT JOIN [PlaceOfResidences] AS [p0] ON [p].[Id] = [p0].[Id]
) AS [s] ON [u0].[Id] = [s].[UserId]
ORDER BY [u0].[Id], [s].[Id]
2024-06-12 12:24:04.966 +03:00 [INF] Successfully retrieved user by id: "9bd2e9d0-61c2-4c66-14e2-08dc8abdac63"
2024-06-12 12:24:04.966 +03:00 [INF] GetById method executed successfully for id: "9bd2e9d0-61c2-4c66-14e2-08dc8abdac63"
2024-06-12 12:24:04.968 +03:00 [INF] Executed action method WebApi.Controllers.UserController.GetById (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 427.2593ms.
2024-06-12 12:24:04.969 +03:00 [INF] Executing OkObjectResult, writing value of type 'App.Dtos.UserDtos.UserIncludeDataDto'.
2024-06-12 12:24:04.972 +03:00 [INF] Executed action WebApi.Controllers.UserController.GetById (WebApi) in 435.8826ms
2024-06-12 12:24:04.973 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.GetById (WebApi)'
2024-06-12 12:24:04.973 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetById?id=9bd2e9d0-61c2-4c66-14e2-08dc8abdac63 - 200 null application/json; charset=utf-8 444.4755ms
2024-06-12 12:25:56.945 +03:00 [INF] Application is shutting down...
2024-06-12 12:26:00.138 +03:00 [INF] Starting application
2024-06-12 12:26:00.232 +03:00 [INF] Configuring application
2024-06-12 12:26:00.348 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 12:26:00.398 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 12:26:00.401 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 12:26:00.401 +03:00 [INF] Hosting environment: Development
2024-06-12 12:26:00.402 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 12:26:00.696 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 12:26:00.805 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 109.7233ms
2024-06-12 12:26:00.905 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 12:26:00.976 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 71.114ms
2024-06-12 12:26:04.631 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 100
2024-06-12 12:26:04.638 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 12:26:04.692 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 12:26:04.709 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 12:26:04.880 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 12:26:04.883 +03:00 [INF] Executing Login method for userName: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:26:04.884 +03:00 [INF] User login attempt with username: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:26:04.886 +03:00 [INF] Fetching user by username: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:26:06.051 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 12:26:06.118 +03:00 [INF] Generating JWT token for username: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:26:06.126 +03:00 [INF] User successfully logged in with username: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:26:06.127 +03:00 [INF] User logged in successfully with userName: xpfvoYVP2rkKM6XHGSDT
2024-06-12 12:26:06.131 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1246.6836ms.
2024-06-12 12:26:06.138 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 12:26:06.142 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1428.5864ms
2024-06-12 12:26:06.144 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 12:26:06.153 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1521.7746ms
2024-06-12 12:26:15.679 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetAll - null null
2024-06-12 12:26:15.689 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.GetAll (WebApi)'
2024-06-12 12:26:15.694 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[App.Dtos.UserDtos.UserDto]]] GetAll() on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 12:26:15.697 +03:00 [INF] Executing action method WebApi.Controllers.UserController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 12:26:15.700 +03:00 [INF] Executing GetAll method
2024-06-12 12:26:15.702 +03:00 [INF] Getting all users
2024-06-12 12:26:15.703 +03:00 [INF] Fetching all users
2024-06-12 12:26:15.809 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
2024-06-12 12:26:15.811 +03:00 [INF] Successfully fetched all users
2024-06-12 12:26:15.819 +03:00 [INF] Successfully retrieved all users
2024-06-12 12:26:15.819 +03:00 [INF] GetAll method executed successfully
2024-06-12 12:26:15.820 +03:00 [INF] Executed action method WebApi.Controllers.UserController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 121.6825ms.
2024-06-12 12:26:15.822 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.UserDtos.UserDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 12:26:15.832 +03:00 [INF] Executed action WebApi.Controllers.UserController.GetAll (WebApi) in 135.8106ms
2024-06-12 12:26:15.835 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.GetAll (WebApi)'
2024-06-12 12:26:15.836 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetAll - 200 null application/json; charset=utf-8 157.1833ms
2024-06-12 12:26:24.235 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetById?id=f27b43c4-c439-46f8-aa94-08dc8aac0dc1 - null null
2024-06-12 12:26:24.240 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.GetById (WebApi)'
2024-06-12 12:26:24.243 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[App.Dtos.UserDtos.UserIncludeDataDto]] GetById(System.Guid) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 12:26:24.251 +03:00 [INF] Executing action method WebApi.Controllers.UserController.GetById (WebApi) - Validation state: "Valid"
2024-06-12 12:26:24.252 +03:00 [INF] Executing GetById method with id: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 12:26:24.253 +03:00 [INF] Getting user by id: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 12:26:24.254 +03:00 [INF] Fetching user by id: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 12:26:24.393 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[PasswordHash], [u0].[PasswordSalt], [u0].[Role], [u0].[UserName], [s].[Id], [s].[Birthday], [s].[Email], [s].[FirstName], [s].[Gender], [s].[LastName], [s].[PersonalCode], [s].[PhoneNumber], [s].[UserId], [s].[Id0], [s].[ApartmentNumber], [s].[City], [s].[HouseNumber], [s].[PersonInformationId], [s].[Street], [s].[UserId0]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [u0]
LEFT JOIN (
    SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId], [p0].[Id] AS [Id0], [p0].[ApartmentNumber], [p0].[City], [p0].[HouseNumber], [p0].[PersonInformationId], [p0].[Street], [p0].[UserId] AS [UserId0]
    FROM [PersonInformations] AS [p]
    LEFT JOIN [PlaceOfResidences] AS [p0] ON [p].[Id] = [p0].[Id]
) AS [s] ON [u0].[Id] = [s].[UserId]
ORDER BY [u0].[Id], [s].[Id]
2024-06-12 12:26:24.430 +03:00 [INF] Successfully retrieved user by id: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 12:26:24.430 +03:00 [INF] GetById method executed successfully for id: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 12:26:24.431 +03:00 [INF] Executed action method WebApi.Controllers.UserController.GetById (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 179.535ms.
2024-06-12 12:26:24.432 +03:00 [INF] Executing OkObjectResult, writing value of type 'App.Dtos.UserDtos.UserIncludeDataDto'.
2024-06-12 12:26:24.440 +03:00 [INF] Executed action WebApi.Controllers.UserController.GetById (WebApi) in 195.9384ms
2024-06-12 12:26:24.444 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.GetById (WebApi)'
2024-06-12 12:26:24.445 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetById?id=f27b43c4-c439-46f8-aa94-08dc8aac0dc1 - 200 null application/json; charset=utf-8 209.7672ms
2024-06-12 12:27:14.137 +03:00 [INF] Application is shutting down...
2024-06-12 12:27:19.357 +03:00 [INF] Starting application
2024-06-12 12:27:19.453 +03:00 [INF] Configuring application
2024-06-12 12:27:19.569 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 12:27:19.627 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 12:27:19.629 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 12:27:19.630 +03:00 [INF] Hosting environment: Development
2024-06-12 12:27:19.631 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 12:27:19.891 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 12:27:20.001 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 111.4957ms
2024-06-12 12:27:20.108 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 12:27:20.177 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 68.7946ms
2024-06-12 12:27:41.451 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetAll - null null
2024-06-12 12:27:41.462 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 12:27:41.554 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.GetAll (WebApi)'
2024-06-12 12:27:41.582 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[App.Dtos.UserDtos.UserDto]]] GetAll() on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 12:27:41.900 +03:00 [INF] Executing action method WebApi.Controllers.UserController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 12:27:41.907 +03:00 [INF] Executing GetAll method
2024-06-12 12:27:41.909 +03:00 [INF] Getting all users
2024-06-12 12:27:41.911 +03:00 [INF] Fetching all users
2024-06-12 12:27:43.687 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
2024-06-12 12:27:43.843 +03:00 [INF] Successfully fetched all users
2024-06-12 12:27:43.860 +03:00 [INF] Successfully retrieved all users
2024-06-12 12:27:43.861 +03:00 [INF] GetAll method executed successfully
2024-06-12 12:27:43.867 +03:00 [INF] Executed action method WebApi.Controllers.UserController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1958.1864ms.
2024-06-12 12:27:43.883 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.UserDtos.UserDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 12:27:43.913 +03:00 [INF] Executed action WebApi.Controllers.UserController.GetAll (WebApi) in 2318.4601ms
2024-06-12 12:27:43.916 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.GetAll (WebApi)'
2024-06-12 12:27:43.938 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetAll - 200 null application/json; charset=utf-8 2487.0745ms
2024-06-12 12:27:48.722 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetById?id=f27b43c4-c439-46f8-aa94-08dc8aac0dc1 - null null
2024-06-12 12:27:48.731 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.GetById (WebApi)'
2024-06-12 12:27:48.746 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[App.Dtos.UserDtos.UserIncludeDataDto]] GetById(System.Guid) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 12:27:48.763 +03:00 [INF] Executing action method WebApi.Controllers.UserController.GetById (WebApi) - Validation state: "Valid"
2024-06-12 12:27:48.765 +03:00 [INF] Executing GetById method with id: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 12:27:48.767 +03:00 [INF] Getting user by id: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 12:27:48.772 +03:00 [INF] Fetching user by id: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 12:27:49.123 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[PasswordHash], [u0].[PasswordSalt], [u0].[Role], [u0].[UserName], [s].[Id], [s].[Birthday], [s].[Email], [s].[FirstName], [s].[Gender], [s].[LastName], [s].[PersonalCode], [s].[PhoneNumber], [s].[UserId], [s].[Id0], [s].[ApartmentNumber], [s].[City], [s].[HouseNumber], [s].[PersonInformationId], [s].[Street], [s].[UserId0]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [u0]
LEFT JOIN (
    SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId], [p0].[Id] AS [Id0], [p0].[ApartmentNumber], [p0].[City], [p0].[HouseNumber], [p0].[PersonInformationId], [p0].[Street], [p0].[UserId] AS [UserId0]
    FROM [PersonInformations] AS [p]
    LEFT JOIN [PlaceOfResidences] AS [p0] ON [p].[Id] = [p0].[Id]
) AS [s] ON [u0].[Id] = [s].[UserId]
ORDER BY [u0].[Id], [s].[Id]
2024-06-12 12:27:49.196 +03:00 [INF] Successfully retrieved user by id: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 12:27:49.197 +03:00 [INF] GetById method executed successfully for id: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 12:27:49.198 +03:00 [INF] Executed action method WebApi.Controllers.UserController.GetById (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 434.0766ms.
2024-06-12 12:27:49.200 +03:00 [INF] Executing OkObjectResult, writing value of type 'App.Dtos.UserDtos.UserIncludeDataDto'.
2024-06-12 12:27:49.219 +03:00 [INF] Executed action WebApi.Controllers.UserController.GetById (WebApi) in 470.5052ms
2024-06-12 12:27:49.222 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.GetById (WebApi)'
2024-06-12 12:27:49.224 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetById?id=f27b43c4-c439-46f8-aa94-08dc8aac0dc1 - 200 null application/json; charset=utf-8 501.8251ms
2024-06-12 12:32:03.824 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5236/api/User/Delete?id=f27b43c4-c439-46f8-aa94-08dc8aac0dc1 - null null
2024-06-12 12:32:03.829 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.DeleteUser (WebApi)'
2024-06-12 12:32:03.834 +03:00 [INF] Route matched with {action = "DeleteUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteUser(System.Guid) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 12:32:03.840 +03:00 [INF] Executing action method WebApi.Controllers.UserController.DeleteUser (WebApi) - Validation state: "Valid"
2024-06-12 12:32:03.842 +03:00 [INF] Executing Delete User method with id: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 12:32:03.843 +03:00 [INF] Deleting user with id: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 12:32:03.844 +03:00 [INF] Fetching user by id: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 12:32:03.906 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[PasswordHash], [u0].[PasswordSalt], [u0].[Role], [u0].[UserName], [s].[Id], [s].[Birthday], [s].[Email], [s].[FirstName], [s].[Gender], [s].[LastName], [s].[PersonalCode], [s].[PhoneNumber], [s].[UserId], [s].[Id0], [s].[ApartmentNumber], [s].[City], [s].[HouseNumber], [s].[PersonInformationId], [s].[Street], [s].[UserId0]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [u0]
LEFT JOIN (
    SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId], [p0].[Id] AS [Id0], [p0].[ApartmentNumber], [p0].[City], [p0].[HouseNumber], [p0].[PersonInformationId], [p0].[Street], [p0].[UserId] AS [UserId0]
    FROM [PersonInformations] AS [p]
    LEFT JOIN [PlaceOfResidences] AS [p0] ON [p].[Id] = [p0].[Id]
) AS [s] ON [u0].[Id] = [s].[UserId]
ORDER BY [u0].[Id], [s].[Id]
2024-06-12 12:32:03.914 +03:00 [INF] Deleting user with id: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 12:32:04.204 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [PersonInformations]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [Users]
OUTPUT 1
WHERE [Id] = @p1;
2024-06-12 12:32:04.272 +03:00 [INF] Successfully deleted user with id: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 12:32:04.273 +03:00 [INF] Successfully deleted user with id: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 12:32:04.273 +03:00 [INF] User deleted successfully with id: "f27b43c4-c439-46f8-aa94-08dc8aac0dc1"
2024-06-12 12:32:04.275 +03:00 [INF] Executed action method WebApi.Controllers.UserController.DeleteUser (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 433.536ms.
2024-06-12 12:32:04.276 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 12:32:04.277 +03:00 [INF] Executed action WebApi.Controllers.UserController.DeleteUser (WebApi) in 442.6425ms
2024-06-12 12:32:04.278 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.DeleteUser (WebApi)'
2024-06-12 12:32:04.279 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5236/api/User/Delete?id=f27b43c4-c439-46f8-aa94-08dc8aac0dc1 - 200 null application/json; charset=utf-8 455.2092ms
2024-06-12 12:32:22.524 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetAll - null null
2024-06-12 12:32:22.527 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.GetAll (WebApi)'
2024-06-12 12:32:22.527 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[App.Dtos.UserDtos.UserDto]]] GetAll() on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 12:32:22.529 +03:00 [INF] Executing action method WebApi.Controllers.UserController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 12:32:22.530 +03:00 [INF] Executing GetAll method
2024-06-12 12:32:22.530 +03:00 [INF] Getting all users
2024-06-12 12:32:22.531 +03:00 [INF] Fetching all users
2024-06-12 12:32:22.585 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
2024-06-12 12:32:22.586 +03:00 [INF] Successfully fetched all users
2024-06-12 12:32:22.587 +03:00 [INF] Successfully retrieved all users
2024-06-12 12:32:22.588 +03:00 [INF] GetAll method executed successfully
2024-06-12 12:32:22.588 +03:00 [INF] Executed action method WebApi.Controllers.UserController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 58.6325ms.
2024-06-12 12:32:22.589 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.UserDtos.UserDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 12:32:22.590 +03:00 [INF] Executed action WebApi.Controllers.UserController.GetAll (WebApi) in 61.2918ms
2024-06-12 12:32:22.591 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.GetAll (WebApi)'
2024-06-12 12:32:22.591 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetAll - 200 null application/json; charset=utf-8 67.2849ms
2024-06-12 12:35:22.367 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 12:35:22.369 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2024-06-12 12:35:22.372 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-06-12 12:35:22.373 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 403 0 null 5.8718ms
2024-06-12 13:57:12.177 +03:00 [INF] Application is shutting down...
2024-06-12 13:57:17.082 +03:00 [INF] Starting application
2024-06-12 13:57:17.190 +03:00 [INF] Configuring application
2024-06-12 13:57:17.311 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 13:57:17.367 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 13:57:17.369 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 13:57:17.370 +03:00 [INF] Hosting environment: Development
2024-06-12 13:57:17.371 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 13:57:17.637 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 13:57:17.745 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 109.2682ms
2024-06-12 13:57:17.828 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/favicon-16x16.png - null null
2024-06-12 13:57:17.836 +03:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2024-06-12 13:57:17.837 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/favicon-16x16.png - 499 665 image/png 8.5128ms
2024-06-12 13:57:17.860 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 13:57:17.931 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 71.0365ms
2024-06-12 13:57:32.278 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 117
2024-06-12 13:57:32.286 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 13:57:32.319 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 13:57:32.360 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 13:57:32.578 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 13:57:32.580 +03:00 [INF] Executing Register method for userName: 8sOdrZEU27o
2024-06-12 13:57:32.581 +03:00 [INF] Registering user with username: 8sOdrZEU27o
2024-06-12 13:57:32.583 +03:00 [INF] Fetching user by username: 8sOdrZEU27o
2024-06-12 13:57:33.920 +03:00 [INF] Executed DbCommand (108ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 13:57:33.962 +03:00 [WRN] User with username: 8sOdrZEU27o not found
2024-06-12 13:57:33.966 +03:00 [INF] Creating user with username: 8sOdrZEU27o
2024-06-12 13:57:33.973 +03:00 [INF] Creating user with username: 8sOdrZEU27o
2024-06-12 13:57:34.282 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 13:57:34.305 +03:00 [INF] Successfully created user with username: 8sOdrZEU27o
2024-06-12 13:57:34.305 +03:00 [INF] Successfully registered user with username: 8sOdrZEU27o
2024-06-12 13:57:34.306 +03:00 [INF] User registered successfully with userName: 8sOdrZEU27o
2024-06-12 13:57:34.314 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1730.7345ms.
2024-06-12 13:57:34.326 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 13:57:34.342 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 1974.7562ms
2024-06-12 13:57:34.352 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 13:57:34.366 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 2088.3857ms
2024-06-12 13:57:54.053 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 73
2024-06-12 13:57:54.060 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 13:57:54.063 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 13:57:54.068 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 13:57:54.069 +03:00 [INF] Executing Login method for userName: 8sOdrZEU27o
2024-06-12 13:57:54.071 +03:00 [INF] User login attempt with username: 8sOdrZEU27o
2024-06-12 13:57:54.071 +03:00 [INF] Fetching user by username: 8sOdrZEU27o
2024-06-12 13:57:54.178 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 13:57:54.188 +03:00 [INF] Generating JWT token for username: 8sOdrZEU27o
2024-06-12 13:57:54.204 +03:00 [INF] User successfully logged in with username: 8sOdrZEU27o
2024-06-12 13:57:54.204 +03:00 [INF] User logged in successfully with userName: 8sOdrZEU27o
2024-06-12 13:57:54.205 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 136.2333ms.
2024-06-12 13:57:54.206 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 13:57:54.206 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 141.8332ms
2024-06-12 13:57:54.209 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 13:57:54.210 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 156.9486ms
2024-06-12 13:58:35.245 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 198
2024-06-12 13:58:35.277 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 13:58:35.280 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 13:58:35.292 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 13:58:35.307 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 26.829ms
2024-06-12 13:58:35.312 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 13:58:35.315 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 70.8391ms
2024-06-12 13:59:54.463 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 177
2024-06-12 13:59:54.466 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 13:59:54.466 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 13:59:54.471 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 13:59:54.472 +03:00 [INF] Executing Add method
2024-06-12 13:59:54.578 +03:00 [INF] Executed DbCommand (63ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Id], [Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-06-12 13:59:54.580 +03:00 [INF] Person Information added successfully
2024-06-12 13:59:54.580 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 109.0794ms.
2024-06-12 13:59:54.581 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 13:59:54.582 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 114.9381ms
2024-06-12 13:59:54.583 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 13:59:54.583 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 120.0212ms
2024-06-12 14:00:06.092 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 14:00:06.095 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 14:00:06.099 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 14:00:06.103 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 14:00:06.105 +03:00 [INF] Executing GetAll method
2024-06-12 14:00:06.203 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 14:00:06.235 +03:00 [INF] GetAll method executed successfully
2024-06-12 14:00:06.243 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 138.7144ms.
2024-06-12 14:00:06.245 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 14:00:06.267 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 166.4637ms
2024-06-12 14:00:06.268 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 14:00:06.269 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 176.3675ms
2024-06-12 14:00:23.518 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PlaceOfResidence - application/json 168
2024-06-12 14:00:23.520 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PlaceOfResidenceController.Add (WebApi)'
2024-06-12 14:00:23.525 +03:00 [INF] Route matched with {action = "Add", controller = "PlaceOfResidence"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PlaceOfResidenceDto) on controller WebApi.Controllers.PlaceOfResidenceController (WebApi).
2024-06-12 14:00:23.534 +03:00 [INF] Executed action WebApi.Controllers.PlaceOfResidenceController.Add (WebApi) in 7.3568ms
2024-06-12 14:00:23.537 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PlaceOfResidenceController.Add (WebApi)'
2024-06-12 14:00:23.538 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: The field of type System.Int32 must be a string, array or ICollection type.
   at System.ComponentModel.DataAnnotations.LengthAttribute.IsValid(Object value)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.IsValid(Object value, ValidationContext validationContext)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.GetValidationResult(Object value, ValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.DataAnnotations.DataAnnotationsModelValidator.Validate(ModelValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.ValidateNode()
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitChildren(IValidationStrategy strategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitComplexType(IValidationStrategy defaultStrategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ObjectModelValidator.Validate(ActionContext actionContext, ValidationStateDictionary validationState, String prefix, Object model, ModelMetadata metadata, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.EnforceBindRequiredAndValidate(ObjectModelValidator baseObjectValidator, ActionContext actionContext, ParameterDescriptor parameter, ModelMetadata metadata, ModelBindingContext modelBindingContext, ModelBindingResult modelBindingResult, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-06-12 14:00:23.559 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PlaceOfResidence - 500 null text/plain; charset=utf-8 41.4373ms
2024-06-12 14:01:25.389 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 14:01:25.391 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 14:01:25.391 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 14:01:25.393 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 14:01:25.393 +03:00 [INF] Executing GetAll method
2024-06-12 14:01:25.450 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 14:01:25.453 +03:00 [INF] GetAll method executed successfully
2024-06-12 14:01:25.453 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 59.8195ms.
2024-06-12 14:01:25.454 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 14:01:25.455 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 62.5847ms
2024-06-12 14:01:25.455 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 14:01:25.456 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 66.9296ms
2024-06-12 14:02:28.061 +03:00 [INF] Application is shutting down...
2024-06-12 14:02:31.542 +03:00 [INF] Starting application
2024-06-12 14:02:31.649 +03:00 [INF] Configuring application
2024-06-12 14:02:31.778 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 14:02:31.828 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 14:02:31.830 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 14:02:31.831 +03:00 [INF] Hosting environment: Development
2024-06-12 14:02:31.832 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 14:02:32.055 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 14:02:32.163 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 108.0388ms
2024-06-12 14:02:32.272 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 14:02:32.341 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.2603ms
2024-06-12 14:02:36.391 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 73
2024-06-12 14:02:36.397 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 14:02:36.450 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:02:36.468 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 14:02:36.636 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 14:02:36.639 +03:00 [INF] Executing Login method for userName: 8sOdrZEU27o
2024-06-12 14:02:36.640 +03:00 [INF] User login attempt with username: 8sOdrZEU27o
2024-06-12 14:02:36.642 +03:00 [INF] Fetching user by username: 8sOdrZEU27o
2024-06-12 14:02:37.936 +03:00 [INF] Executed DbCommand (97ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 14:02:38.000 +03:00 [INF] Generating JWT token for username: 8sOdrZEU27o
2024-06-12 14:02:38.008 +03:00 [INF] User successfully logged in with username: 8sOdrZEU27o
2024-06-12 14:02:38.009 +03:00 [INF] User logged in successfully with userName: 8sOdrZEU27o
2024-06-12 14:02:38.012 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1372.2712ms.
2024-06-12 14:02:38.020 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 14:02:38.024 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1553.0516ms
2024-06-12 14:02:38.026 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:02:38.036 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1644.4486ms
2024-06-12 14:02:45.587 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 14:02:45.596 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 14:02:45.601 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 14:02:45.603 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 14:02:45.604 +03:00 [INF] Executing GetAll method
2024-06-12 14:02:45.798 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 14:02:45.844 +03:00 [INF] GetAll method executed successfully
2024-06-12 14:02:45.846 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 242.5021ms.
2024-06-12 14:02:45.850 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 14:02:45.885 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 283.1244ms
2024-06-12 14:02:45.887 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 14:02:45.888 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 301.2308ms
2024-06-12 14:02:56.740 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PlaceOfResidence - application/json 147
2024-06-12 14:02:56.746 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PlaceOfResidenceController.Add (WebApi)'
2024-06-12 14:02:56.751 +03:00 [INF] Route matched with {action = "Add", controller = "PlaceOfResidence"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PlaceOfResidenceDto) on controller WebApi.Controllers.PlaceOfResidenceController (WebApi).
2024-06-12 14:02:56.764 +03:00 [INF] Executed action WebApi.Controllers.PlaceOfResidenceController.Add (WebApi) in 11.7552ms
2024-06-12 14:02:56.765 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PlaceOfResidenceController.Add (WebApi)'
2024-06-12 14:02:56.766 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: The field of type System.Int32 must be a string, array or ICollection type.
   at System.ComponentModel.DataAnnotations.LengthAttribute.IsValid(Object value)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.IsValid(Object value, ValidationContext validationContext)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.GetValidationResult(Object value, ValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.DataAnnotations.DataAnnotationsModelValidator.Validate(ModelValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.ValidateNode()
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitChildren(IValidationStrategy strategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitComplexType(IValidationStrategy defaultStrategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ObjectModelValidator.Validate(ActionContext actionContext, ValidationStateDictionary validationState, String prefix, Object model, ModelMetadata metadata, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.EnforceBindRequiredAndValidate(ObjectModelValidator baseObjectValidator, ActionContext actionContext, ParameterDescriptor parameter, ModelMetadata metadata, ModelBindingContext modelBindingContext, ModelBindingResult modelBindingResult, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-06-12 14:02:56.777 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PlaceOfResidence - 500 null text/plain; charset=utf-8 36.5991ms
2024-06-12 14:03:11.380 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PlaceOfResidence - application/json 148
2024-06-12 14:03:11.383 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PlaceOfResidenceController.Add (WebApi)'
2024-06-12 14:03:11.384 +03:00 [INF] Route matched with {action = "Add", controller = "PlaceOfResidence"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PlaceOfResidenceDto) on controller WebApi.Controllers.PlaceOfResidenceController (WebApi).
2024-06-12 14:03:11.387 +03:00 [INF] Executed action WebApi.Controllers.PlaceOfResidenceController.Add (WebApi) in 1.5002ms
2024-06-12 14:03:11.388 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PlaceOfResidenceController.Add (WebApi)'
2024-06-12 14:03:11.389 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: The field of type System.Int32 must be a string, array or ICollection type.
   at System.ComponentModel.DataAnnotations.LengthAttribute.IsValid(Object value)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.IsValid(Object value, ValidationContext validationContext)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.GetValidationResult(Object value, ValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.DataAnnotations.DataAnnotationsModelValidator.Validate(ModelValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.ValidateNode()
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitChildren(IValidationStrategy strategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitComplexType(IValidationStrategy defaultStrategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ObjectModelValidator.Validate(ActionContext actionContext, ValidationStateDictionary validationState, String prefix, Object model, ModelMetadata metadata, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.EnforceBindRequiredAndValidate(ObjectModelValidator baseObjectValidator, ActionContext actionContext, ParameterDescriptor parameter, ModelMetadata metadata, ModelBindingContext modelBindingContext, ModelBindingResult modelBindingResult, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-06-12 14:03:11.398 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PlaceOfResidence - 500 null text/plain; charset=utf-8 18.6843ms
2024-06-12 14:04:41.797 +03:00 [INF] Application is shutting down...
2024-06-12 14:04:44.685 +03:00 [INF] Starting application
2024-06-12 14:04:44.778 +03:00 [INF] Configuring application
2024-06-12 14:04:44.891 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 14:04:44.951 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 14:04:44.955 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 14:04:44.956 +03:00 [INF] Hosting environment: Development
2024-06-12 14:04:44.957 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 14:04:45.247 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 14:04:45.355 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 108.5877ms
2024-06-12 14:04:45.460 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 14:04:45.529 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.5009ms
2024-06-12 14:04:54.708 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 73
2024-06-12 14:04:54.714 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 14:04:54.768 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:04:54.785 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 14:04:54.958 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 14:04:54.960 +03:00 [INF] Executing Login method for userName: 8sOdrZEU27o
2024-06-12 14:04:54.961 +03:00 [INF] User login attempt with username: 8sOdrZEU27o
2024-06-12 14:04:54.963 +03:00 [INF] Fetching user by username: 8sOdrZEU27o
2024-06-12 14:04:56.215 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 14:04:56.281 +03:00 [INF] Generating JWT token for username: 8sOdrZEU27o
2024-06-12 14:04:56.289 +03:00 [INF] User successfully logged in with username: 8sOdrZEU27o
2024-06-12 14:04:56.290 +03:00 [INF] User logged in successfully with userName: 8sOdrZEU27o
2024-06-12 14:04:56.294 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1332.3842ms.
2024-06-12 14:04:56.301 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 14:04:56.305 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1515.6785ms
2024-06-12 14:04:56.306 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:04:56.314 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1606.5588ms
2024-06-12 14:05:07.532 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 14:05:07.544 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 14:05:07.553 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 14:05:07.558 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 14:05:07.561 +03:00 [INF] Executing GetAll method
2024-06-12 14:05:07.724 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 14:05:07.781 +03:00 [INF] GetAll method executed successfully
2024-06-12 14:05:07.784 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 224.8014ms.
2024-06-12 14:05:07.789 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 14:05:07.820 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 264.7771ms
2024-06-12 14:05:07.824 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 14:05:07.826 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 294.1158ms
2024-06-12 14:09:38.699 +03:00 [INF] Application is shutting down...
2024-06-12 14:09:42.011 +03:00 [INF] Starting application
2024-06-12 14:09:42.114 +03:00 [INF] Configuring application
2024-06-12 14:09:42.239 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 14:09:42.291 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 14:09:42.293 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 14:09:42.294 +03:00 [INF] Hosting environment: Development
2024-06-12 14:09:42.295 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 14:09:42.554 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 14:09:42.664 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 110.2829ms
2024-06-12 14:09:42.763 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 14:09:42.834 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 70.5116ms
2024-06-12 14:09:50.048 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 73
2024-06-12 14:09:50.058 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 14:09:50.116 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:09:50.147 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 14:09:50.474 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 14:09:50.478 +03:00 [INF] Executing Login method for userName: 8sOdrZEU27o
2024-06-12 14:09:50.480 +03:00 [INF] User login attempt with username: 8sOdrZEU27o
2024-06-12 14:09:50.484 +03:00 [INF] Fetching user by username: 8sOdrZEU27o
2024-06-12 14:09:52.510 +03:00 [INF] Executed DbCommand (111ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 14:09:52.640 +03:00 [INF] Generating JWT token for username: 8sOdrZEU27o
2024-06-12 14:09:52.657 +03:00 [INF] User successfully logged in with username: 8sOdrZEU27o
2024-06-12 14:09:52.658 +03:00 [INF] User logged in successfully with userName: 8sOdrZEU27o
2024-06-12 14:09:52.664 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2184.1694ms.
2024-06-12 14:09:52.679 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 14:09:52.691 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 2534.3756ms
2024-06-12 14:09:52.694 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:09:52.709 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 2661.5389ms
2024-06-12 14:09:59.022 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 14:09:59.034 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 14:09:59.040 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 14:09:59.043 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 14:09:59.045 +03:00 [INF] Executing GetAll method
2024-06-12 14:09:59.258 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 14:09:59.288 +03:00 [INF] GetAll method executed successfully
2024-06-12 14:09:59.289 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 245.3532ms.
2024-06-12 14:09:59.291 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 14:09:59.306 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 265.0705ms
2024-06-12 14:09:59.308 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 14:09:59.308 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 286.3154ms
2024-06-12 14:13:40.954 +03:00 [INF] Application is shutting down...
2024-06-12 14:13:44.070 +03:00 [INF] Starting application
2024-06-12 14:13:44.164 +03:00 [INF] Configuring application
2024-06-12 14:13:44.286 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 14:13:44.340 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 14:13:44.343 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 14:13:44.343 +03:00 [INF] Hosting environment: Development
2024-06-12 14:13:44.344 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 14:13:44.616 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 14:13:44.728 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 113.5285ms
2024-06-12 14:13:44.828 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 14:13:44.902 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 73.2174ms
2024-06-12 14:13:48.802 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 73
2024-06-12 14:13:48.808 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 14:13:48.862 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:13:48.880 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 14:13:49.059 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 14:13:49.062 +03:00 [INF] Executing Login method for userName: 8sOdrZEU27o
2024-06-12 14:13:49.064 +03:00 [INF] User login attempt with username: 8sOdrZEU27o
2024-06-12 14:13:49.066 +03:00 [INF] Fetching user by username: 8sOdrZEU27o
2024-06-12 14:13:50.363 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 14:13:50.431 +03:00 [INF] Generating JWT token for username: 8sOdrZEU27o
2024-06-12 14:13:50.439 +03:00 [INF] User successfully logged in with username: 8sOdrZEU27o
2024-06-12 14:13:50.439 +03:00 [INF] User logged in successfully with userName: 8sOdrZEU27o
2024-06-12 14:13:50.443 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1379.8825ms.
2024-06-12 14:13:50.451 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 14:13:50.456 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1570.9422ms
2024-06-12 14:13:50.457 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:13:50.466 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1663.5044ms
2024-06-12 14:13:58.169 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 14:13:58.179 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 14:13:58.186 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 14:13:58.190 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 14:13:58.193 +03:00 [INF] Executing GetAll method
2024-06-12 14:13:58.346 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 14:13:58.374 +03:00 [INF] GetAll method executed successfully
2024-06-12 14:13:58.375 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 183.8988ms.
2024-06-12 14:13:58.376 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 14:13:58.391 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 202.9403ms
2024-06-12 14:13:58.393 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 14:13:58.394 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 224.3683ms
2024-06-12 14:14:14.101 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PlaceOfResidence?personInformationId=397bd171-eac4-4a0e-93f6-08dc8aceca7d - application/json 118
2024-06-12 14:14:14.107 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PlaceOfResidenceController.Add (WebApi)'
2024-06-12 14:14:14.112 +03:00 [INF] Route matched with {action = "Add", controller = "PlaceOfResidence"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PlaceOfResidenceDtos.PlaceOfResidenceCreateDto, System.Guid) on controller WebApi.Controllers.PlaceOfResidenceController (WebApi).
2024-06-12 14:14:14.123 +03:00 [INF] Executed action WebApi.Controllers.PlaceOfResidenceController.Add (WebApi) in 10.3377ms
2024-06-12 14:14:14.124 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PlaceOfResidenceController.Add (WebApi)'
2024-06-12 14:14:14.125 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: The field of type System.Int32 must be a string, array or ICollection type.
   at System.ComponentModel.DataAnnotations.LengthAttribute.IsValid(Object value)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.IsValid(Object value, ValidationContext validationContext)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.GetValidationResult(Object value, ValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.DataAnnotations.DataAnnotationsModelValidator.Validate(ModelValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.ValidateNode()
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitChildren(IValidationStrategy strategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitComplexType(IValidationStrategy defaultStrategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ObjectModelValidator.Validate(ActionContext actionContext, ValidationStateDictionary validationState, String prefix, Object model, ModelMetadata metadata, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.EnforceBindRequiredAndValidate(ObjectModelValidator baseObjectValidator, ActionContext actionContext, ParameterDescriptor parameter, ModelMetadata metadata, ModelBindingContext modelBindingContext, ModelBindingResult modelBindingResult, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-06-12 14:14:14.159 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PlaceOfResidence?personInformationId=397bd171-eac4-4a0e-93f6-08dc8aceca7d - 500 null text/plain; charset=utf-8 57.2147ms
2024-06-12 14:15:08.522 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PlaceOfResidence?personInformationId=397bd171-eac4-4a0e-93f6-08dc8aceca7d - application/json 90
2024-06-12 14:15:08.528 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PlaceOfResidenceController.Add (WebApi)'
2024-06-12 14:15:08.530 +03:00 [INF] Route matched with {action = "Add", controller = "PlaceOfResidence"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PlaceOfResidenceDtos.PlaceOfResidenceCreateDto, System.Guid) on controller WebApi.Controllers.PlaceOfResidenceController (WebApi).
2024-06-12 14:15:08.533 +03:00 [INF] Executed action WebApi.Controllers.PlaceOfResidenceController.Add (WebApi) in 1.3115ms
2024-06-12 14:15:08.533 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PlaceOfResidenceController.Add (WebApi)'
2024-06-12 14:15:08.534 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: The field of type System.Int32 must be a string, array or ICollection type.
   at System.ComponentModel.DataAnnotations.LengthAttribute.IsValid(Object value)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.IsValid(Object value, ValidationContext validationContext)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.GetValidationResult(Object value, ValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.DataAnnotations.DataAnnotationsModelValidator.Validate(ModelValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.ValidateNode()
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitChildren(IValidationStrategy strategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitComplexType(IValidationStrategy defaultStrategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ObjectModelValidator.Validate(ActionContext actionContext, ValidationStateDictionary validationState, String prefix, Object model, ModelMetadata metadata, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.EnforceBindRequiredAndValidate(ObjectModelValidator baseObjectValidator, ActionContext actionContext, ParameterDescriptor parameter, ModelMetadata metadata, ModelBindingContext modelBindingContext, ModelBindingResult modelBindingResult, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-06-12 14:15:08.538 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PlaceOfResidence?personInformationId=397bd171-eac4-4a0e-93f6-08dc8aceca7d - 500 null text/plain; charset=utf-8 16.5687ms
2024-06-12 14:29:41.765 +03:00 [INF] Application is shutting down...
2024-06-12 14:29:46.997 +03:00 [INF] Starting application
2024-06-12 14:29:47.105 +03:00 [INF] Configuring application
2024-06-12 14:29:47.230 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 14:29:47.290 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 14:29:47.293 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 14:29:47.294 +03:00 [INF] Hosting environment: Development
2024-06-12 14:29:47.295 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 14:29:48.224 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 14:29:48.336 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 113.5224ms
2024-06-12 14:29:48.441 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 14:29:48.511 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.2736ms
2024-06-12 14:29:51.853 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 73
2024-06-12 14:29:51.858 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 14:29:51.916 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:29:51.934 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 14:29:52.106 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 14:29:52.108 +03:00 [INF] Executing Login method for userName: 8sOdrZEU27o
2024-06-12 14:29:52.110 +03:00 [INF] User login attempt with username: 8sOdrZEU27o
2024-06-12 14:29:52.111 +03:00 [INF] Fetching user by username: 8sOdrZEU27o
2024-06-12 14:29:53.417 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 14:29:53.485 +03:00 [INF] Generating JWT token for username: 8sOdrZEU27o
2024-06-12 14:29:53.492 +03:00 [INF] User successfully logged in with username: 8sOdrZEU27o
2024-06-12 14:29:53.493 +03:00 [INF] User logged in successfully with userName: 8sOdrZEU27o
2024-06-12 14:29:53.496 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1386.904ms.
2024-06-12 14:29:53.503 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 14:29:53.507 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1569.465ms
2024-06-12 14:29:53.509 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:29:53.517 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1664.2481ms
2024-06-12 14:30:06.828 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 413
2024-06-12 14:30:06.839 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 14:30:06.848 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 14:30:06.891 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 40.8892ms
2024-06-12 14:30:06.892 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 14:30:06.893 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: The field of type System.Int32 must be a string, array or ICollection type.
   at System.ComponentModel.DataAnnotations.LengthAttribute.IsValid(Object value)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.IsValid(Object value, ValidationContext validationContext)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.GetValidationResult(Object value, ValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.DataAnnotations.DataAnnotationsModelValidator.Validate(ModelValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.ValidateNode()
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitChildren(IValidationStrategy strategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitComplexType(IValidationStrategy defaultStrategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitChildren(IValidationStrategy strategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitComplexType(IValidationStrategy defaultStrategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ObjectModelValidator.Validate(ActionContext actionContext, ValidationStateDictionary validationState, String prefix, Object model, ModelMetadata metadata, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.EnforceBindRequiredAndValidate(ObjectModelValidator baseObjectValidator, ActionContext actionContext, ParameterDescriptor parameter, ModelMetadata metadata, ModelBindingContext modelBindingContext, ModelBindingResult modelBindingResult, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-06-12 14:30:06.925 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 500 null text/plain; charset=utf-8 96.4989ms
2024-06-12 14:30:38.118 +03:00 [INF] Application is shutting down...
2024-06-12 14:30:41.263 +03:00 [INF] Starting application
2024-06-12 14:30:41.356 +03:00 [INF] Configuring application
2024-06-12 14:30:41.472 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 14:30:41.522 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 14:30:41.524 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 14:30:41.525 +03:00 [INF] Hosting environment: Development
2024-06-12 14:30:41.526 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 14:30:41.790 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 14:30:41.900 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 110.9006ms
2024-06-12 14:30:42.003 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 14:30:42.073 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 70.4447ms
2024-06-12 14:30:44.986 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 73
2024-06-12 14:30:44.992 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 14:30:45.046 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:30:45.063 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 14:30:45.233 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 14:30:45.235 +03:00 [INF] Executing Login method for userName: 8sOdrZEU27o
2024-06-12 14:30:45.237 +03:00 [INF] User login attempt with username: 8sOdrZEU27o
2024-06-12 14:30:45.238 +03:00 [INF] Fetching user by username: 8sOdrZEU27o
2024-06-12 14:30:46.540 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 14:30:46.607 +03:00 [INF] Generating JWT token for username: 8sOdrZEU27o
2024-06-12 14:30:46.615 +03:00 [INF] User successfully logged in with username: 8sOdrZEU27o
2024-06-12 14:30:46.615 +03:00 [INF] User logged in successfully with userName: 8sOdrZEU27o
2024-06-12 14:30:46.619 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1381.8959ms.
2024-06-12 14:30:46.627 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 14:30:46.631 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1563.8508ms
2024-06-12 14:30:46.632 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:30:46.642 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1656.1567ms
2024-06-12 14:30:52.929 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 352
2024-06-12 14:30:52.939 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 14:30:52.944 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 14:30:52.973 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 14:30:52.975 +03:00 [INF] Executing Add method
2024-06-12 14:30:53.338 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Id], [Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2024-06-12 14:30:53.346 +03:00 [INF] Person Information added successfully
2024-06-12 14:30:53.349 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 375.4916ms.
2024-06-12 14:30:53.351 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 14:30:53.359 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 412.7265ms
2024-06-12 14:30:53.361 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 14:30:53.362 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 433.045ms
2024-06-12 14:35:35.676 +03:00 [INF] Application is shutting down...
2024-06-12 14:35:39.152 +03:00 [INF] Starting application
2024-06-12 14:35:39.249 +03:00 [INF] Configuring application
2024-06-12 14:35:39.368 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 14:35:39.418 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 14:35:39.420 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 14:35:39.421 +03:00 [INF] Hosting environment: Development
2024-06-12 14:35:39.421 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 14:35:39.686 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 14:35:39.793 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 108.452ms
2024-06-12 14:35:39.892 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 14:35:39.963 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 70.3826ms
2024-06-12 14:35:44.144 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 73
2024-06-12 14:35:44.150 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 14:35:44.203 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:35:44.221 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 14:35:44.396 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 14:35:44.399 +03:00 [INF] Executing Login method for userName: 8sOdrZEU27o
2024-06-12 14:35:44.400 +03:00 [INF] User login attempt with username: 8sOdrZEU27o
2024-06-12 14:35:44.402 +03:00 [INF] Fetching user by username: 8sOdrZEU27o
2024-06-12 14:35:45.667 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 14:35:45.732 +03:00 [INF] Generating JWT token for username: 8sOdrZEU27o
2024-06-12 14:35:45.739 +03:00 [INF] User successfully logged in with username: 8sOdrZEU27o
2024-06-12 14:35:45.741 +03:00 [INF] User logged in successfully with userName: 8sOdrZEU27o
2024-06-12 14:35:45.745 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1344.6245ms.
2024-06-12 14:35:45.752 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 14:35:45.757 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1531.7133ms
2024-06-12 14:35:45.758 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:35:45.767 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1623.1204ms
2024-06-12 14:37:51.011 +03:00 [INF] Application is shutting down...
2024-06-12 14:38:18.007 +03:00 [INF] Starting application
2024-06-12 14:38:18.098 +03:00 [INF] Configuring application
2024-06-12 14:38:18.205 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 14:38:18.257 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 14:38:18.259 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 14:38:18.260 +03:00 [INF] Hosting environment: Development
2024-06-12 14:38:18.261 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 14:38:18.561 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 14:38:18.668 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 106.5446ms
2024-06-12 14:38:18.764 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 14:38:18.831 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 67.7058ms
2024-06-12 14:38:31.112 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 73
2024-06-12 14:38:31.121 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 14:38:31.175 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:38:31.192 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 14:38:31.359 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 14:38:31.361 +03:00 [INF] Executing Login method for userName: 8sOdrZEU27o
2024-06-12 14:38:31.363 +03:00 [INF] User login attempt with username: 8sOdrZEU27o
2024-06-12 14:38:31.365 +03:00 [INF] Fetching user by username: 8sOdrZEU27o
2024-06-12 14:38:32.926 +03:00 [INF] Executed DbCommand (98ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 14:38:33.012 +03:00 [INF] Generating JWT token for username: 8sOdrZEU27o
2024-06-12 14:38:33.027 +03:00 [INF] User successfully logged in with username: 8sOdrZEU27o
2024-06-12 14:38:33.029 +03:00 [INF] User logged in successfully with userName: 8sOdrZEU27o
2024-06-12 14:38:33.037 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1670.5269ms.
2024-06-12 14:38:33.051 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 14:38:33.061 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1864.4365ms
2024-06-12 14:38:33.064 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:38:33.079 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1967.1831ms
2024-06-12 14:38:42.124 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 352
2024-06-12 14:38:42.134 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 14:38:42.139 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 14:38:42.169 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 14:38:42.171 +03:00 [INF] Executing Add method
2024-06-12 14:38:42.615 +03:00 [ERR] Failed executing DbCommand (70ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (Size = 20), @p12='?' (DbType = Int32), @p13='?' (DbType = Guid), @p14='?' (Size = 60), @p15='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Id], [Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO [PlaceOfResidences] ([Id], [ApartmentNumber], [City], [HouseNumber], [PersonInformationId], [Street], [UserId])
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15);
2024-06-12 14:38:42.691 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAccess.MainDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PlaceOfResidences_Users_UserId". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.Users", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0f6fd1b5-1232-4b30-aae6-a4c12e07c6c2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PlaceOfResidences_Users_UserId". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.Users", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0f6fd1b5-1232-4b30-aae6-a4c12e07c6c2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-06-12 14:38:42.696 +03:00 [ERR] Error occurred while Adding Person Information with id: "00000000-0000-0000-0000-000000000000"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PlaceOfResidences_Users_UserId". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.Users", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0f6fd1b5-1232-4b30-aae6-a4c12e07c6c2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.PersonInformationRepository.AddAsync(PersonInformation entity, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\PersonInformationRepository.cs:line 33
   at App.Services.PersonInformationService.AddAsync(PersonInformationCreateDto personInformationDto, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\PersonInformationService.cs:line 39
   at WebApi.Controllers.PersonInformationController.Add(PersonInformationCreateDto dto) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\PersonInformationController.cs:line 77
2024-06-12 14:38:42.704 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 533.3355ms.
2024-06-12 14:38:42.705 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-06-12 14:38:42.706 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 564.3461ms
2024-06-12 14:38:42.707 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 14:38:42.708 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 500 null text/plain; charset=utf-8 584.0517ms
2024-06-12 14:39:51.147 +03:00 [INF] Application is shutting down...
2024-06-12 14:39:54.096 +03:00 [INF] Starting application
2024-06-12 14:39:54.192 +03:00 [INF] Configuring application
2024-06-12 14:39:54.308 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 14:39:54.362 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 14:39:54.364 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 14:39:54.365 +03:00 [INF] Hosting environment: Development
2024-06-12 14:39:54.366 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 14:39:54.668 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 14:39:54.778 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 110.4432ms
2024-06-12 14:39:54.872 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 14:39:54.944 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 71.3509ms
2024-06-12 14:39:58.279 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 73
2024-06-12 14:39:58.284 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 14:39:58.339 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:39:58.356 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 14:39:58.530 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 14:39:58.532 +03:00 [INF] Executing Login method for userName: 8sOdrZEU27o
2024-06-12 14:39:58.534 +03:00 [INF] User login attempt with username: 8sOdrZEU27o
2024-06-12 14:39:58.535 +03:00 [INF] Fetching user by username: 8sOdrZEU27o
2024-06-12 14:39:59.806 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 14:39:59.871 +03:00 [INF] Generating JWT token for username: 8sOdrZEU27o
2024-06-12 14:39:59.880 +03:00 [INF] User successfully logged in with username: 8sOdrZEU27o
2024-06-12 14:39:59.881 +03:00 [INF] User logged in successfully with userName: 8sOdrZEU27o
2024-06-12 14:39:59.885 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1351.1452ms.
2024-06-12 14:39:59.892 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 14:39:59.897 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1536.6602ms
2024-06-12 14:39:59.898 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:39:59.907 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1628.5164ms
2024-06-12 14:40:07.797 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 352
2024-06-12 14:40:07.806 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 14:40:07.811 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 14:40:07.831 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 14:40:07.833 +03:00 [INF] Executing Add method
2024-06-12 14:40:08.244 +03:00 [ERR] Failed executing DbCommand (69ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (Size = 20), @p12='?' (DbType = Int32), @p13='?' (DbType = Guid), @p14='?' (Size = 60), @p15='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Id], [Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO [PlaceOfResidences] ([Id], [ApartmentNumber], [City], [HouseNumber], [PersonInformationId], [Street], [UserId])
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15);
2024-06-12 14:40:08.341 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAccess.MainDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PlaceOfResidences_Users_UserId". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.Users", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4fe4729b-0420-45cd-9baa-4bfccd15c380
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PlaceOfResidences_Users_UserId". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.Users", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4fe4729b-0420-45cd-9baa-4bfccd15c380
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-06-12 14:40:08.353 +03:00 [ERR] Error occurred while Adding Person Information with id: "00000000-0000-0000-0000-000000000000"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PlaceOfResidences_Users_UserId". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.Users", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4fe4729b-0420-45cd-9baa-4bfccd15c380
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.PersonInformationRepository.AddAsync(PersonInformation entity, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\PersonInformationRepository.cs:line 33
   at App.Services.PersonInformationService.AddAsync(PersonInformationCreateDto personInformationDto, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\PersonInformationService.cs:line 39
   at WebApi.Controllers.PersonInformationController.Add(PersonInformationCreateDto dto) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\PersonInformationController.cs:line 77
2024-06-12 14:40:08.369 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 537.2947ms.
2024-06-12 14:40:08.374 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-06-12 14:40:08.375 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 562.5628ms
2024-06-12 14:40:08.377 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 14:40:08.378 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 500 null text/plain; charset=utf-8 580.3238ms
2024-06-12 14:40:43.482 +03:00 [INF] Application is shutting down...
2024-06-12 14:40:46.597 +03:00 [INF] Starting application
2024-06-12 14:40:46.689 +03:00 [INF] Configuring application
2024-06-12 14:40:46.799 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 14:40:46.846 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 14:40:46.848 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 14:40:46.849 +03:00 [INF] Hosting environment: Development
2024-06-12 14:40:46.850 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 14:40:47.119 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 14:40:47.225 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 107.5239ms
2024-06-12 14:40:47.314 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 14:40:47.383 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.4224ms
2024-06-12 14:40:50.504 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 73
2024-06-12 14:40:50.510 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 14:40:50.564 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:40:50.582 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 14:40:50.752 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 14:40:50.755 +03:00 [INF] Executing Login method for userName: 8sOdrZEU27o
2024-06-12 14:40:50.756 +03:00 [INF] User login attempt with username: 8sOdrZEU27o
2024-06-12 14:40:50.758 +03:00 [INF] Fetching user by username: 8sOdrZEU27o
2024-06-12 14:40:52.030 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 14:40:52.054 +03:00 [WRN] User with username: 8sOdrZEU27o not found
2024-06-12 14:40:52.055 +03:00 [WRN] Invalid username: 8sOdrZEU27o
2024-06-12 14:40:52.055 +03:00 [ERR] Error occurred during login attempt with username: 8sOdrZEU27o
System.Security.Authentication.AuthenticationException: Invalid username or password!
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 95
2024-06-12 14:40:52.064 +03:00 [ERR] Error occurred while logging in user with userName: 8sOdrZEU27o
System.Security.Authentication.AuthenticationException: Invalid username or password!
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 95
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 110
   at WebApi.Controllers.UserController.Login(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\UserController.cs:line 92
2024-06-12 14:40:52.069 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 1313.4411ms.
2024-06-12 14:40:52.077 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 14:40:52.081 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1495.4515ms
2024-06-12 14:40:52.082 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:40:52.090 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 409 null text/plain; charset=utf-8 1586.2882ms
2024-06-12 14:40:59.949 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 117
2024-06-12 14:40:59.956 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 14:40:59.963 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 14:40:59.981 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 14:40:59.986 +03:00 [INF] Executing Register method for userName: 8sOdrZEU27o
2024-06-12 14:40:59.988 +03:00 [INF] Registering user with username: 8sOdrZEU27o
2024-06-12 14:40:59.989 +03:00 [INF] Fetching user by username: 8sOdrZEU27o
2024-06-12 14:41:00.095 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 14:41:00.096 +03:00 [WRN] User with username: 8sOdrZEU27o not found
2024-06-12 14:41:00.098 +03:00 [INF] Creating user with username: 8sOdrZEU27o
2024-06-12 14:41:00.100 +03:00 [INF] Creating user with username: 8sOdrZEU27o
2024-06-12 14:41:00.294 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 14:41:00.303 +03:00 [INF] Successfully created user with username: 8sOdrZEU27o
2024-06-12 14:41:00.304 +03:00 [INF] Successfully registered user with username: 8sOdrZEU27o
2024-06-12 14:41:00.305 +03:00 [INF] User registered successfully with userName: 8sOdrZEU27o
2024-06-12 14:41:00.305 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 320.5138ms.
2024-06-12 14:41:00.307 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 14:41:00.311 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 345.5217ms
2024-06-12 14:41:00.312 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 14:41:00.313 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 363.9216ms
2024-06-12 14:41:03.403 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 73
2024-06-12 14:41:03.407 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:41:03.408 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 14:41:03.413 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 14:41:03.414 +03:00 [INF] Executing Login method for userName: 8sOdrZEU27o
2024-06-12 14:41:03.414 +03:00 [INF] User login attempt with username: 8sOdrZEU27o
2024-06-12 14:41:03.415 +03:00 [INF] Fetching user by username: 8sOdrZEU27o
2024-06-12 14:41:03.479 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 14:41:03.489 +03:00 [INF] Generating JWT token for username: 8sOdrZEU27o
2024-06-12 14:41:03.497 +03:00 [INF] User successfully logged in with username: 8sOdrZEU27o
2024-06-12 14:41:03.498 +03:00 [INF] User logged in successfully with userName: 8sOdrZEU27o
2024-06-12 14:41:03.498 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 84.6507ms.
2024-06-12 14:41:03.499 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 14:41:03.500 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 90.372ms
2024-06-12 14:41:03.501 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:41:03.502 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 99.4257ms
2024-06-12 14:41:12.531 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 352
2024-06-12 14:41:12.536 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 14:41:12.543 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 14:41:12.567 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 14:41:12.569 +03:00 [INF] Executing Add method
2024-06-12 14:41:12.834 +03:00 [ERR] Failed executing DbCommand (65ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (Size = 20), @p12='?' (DbType = Int32), @p13='?' (DbType = Guid), @p14='?' (Size = 60), @p15='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Id], [Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO [PlaceOfResidences] ([Id], [ApartmentNumber], [City], [HouseNumber], [PersonInformationId], [Street], [UserId])
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15);
2024-06-12 14:41:12.907 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAccess.MainDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PlaceOfResidences_Users_UserId". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.Users", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:997f7063-c76a-43e6-9895-04809a85938e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PlaceOfResidences_Users_UserId". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.Users", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:997f7063-c76a-43e6-9895-04809a85938e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-06-12 14:41:12.917 +03:00 [ERR] Error occurred while Adding Person Information with id: "00000000-0000-0000-0000-000000000000"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PlaceOfResidences_Users_UserId". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.Users", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:997f7063-c76a-43e6-9895-04809a85938e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.PersonInformationRepository.AddAsync(PersonInformation entity, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\PersonInformationRepository.cs:line 33
   at App.Services.PersonInformationService.AddAsync(PersonInformationCreateDto personInformationDto, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\PersonInformationService.cs:line 39
   at WebApi.Controllers.PersonInformationController.Add(PersonInformationCreateDto dto) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\PersonInformationController.cs:line 77
2024-06-12 14:41:12.924 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 356.3834ms.
2024-06-12 14:41:12.926 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-06-12 14:41:12.927 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 380.6044ms
2024-06-12 14:41:12.927 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 14:41:12.928 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 500 null text/plain; charset=utf-8 396.9633ms
2024-06-12 14:42:23.403 +03:00 [INF] Application is shutting down...
2024-06-12 14:42:26.694 +03:00 [INF] Starting application
2024-06-12 14:42:26.790 +03:00 [INF] Configuring application
2024-06-12 14:42:26.908 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 14:42:26.959 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 14:42:26.962 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 14:42:26.963 +03:00 [INF] Hosting environment: Development
2024-06-12 14:42:26.963 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 14:42:27.244 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 14:42:27.352 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 109.3988ms
2024-06-12 14:42:27.447 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 14:42:27.515 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 68.3309ms
2024-06-12 14:42:31.060 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 73
2024-06-12 14:42:31.066 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 14:42:31.121 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:42:31.138 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 14:42:31.307 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 14:42:31.309 +03:00 [INF] Executing Login method for userName: 8sOdrZEU27o
2024-06-12 14:42:31.311 +03:00 [INF] User login attempt with username: 8sOdrZEU27o
2024-06-12 14:42:31.312 +03:00 [INF] Fetching user by username: 8sOdrZEU27o
2024-06-12 14:42:32.619 +03:00 [INF] Executed DbCommand (106ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 14:42:32.685 +03:00 [INF] Generating JWT token for username: 8sOdrZEU27o
2024-06-12 14:42:32.692 +03:00 [INF] User successfully logged in with username: 8sOdrZEU27o
2024-06-12 14:42:32.693 +03:00 [INF] User logged in successfully with userName: 8sOdrZEU27o
2024-06-12 14:42:32.696 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1385.8557ms.
2024-06-12 14:42:32.704 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 14:42:32.708 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1565.9221ms
2024-06-12 14:42:32.709 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:42:32.718 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1657.6125ms
2024-06-12 14:42:38.971 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 352
2024-06-12 14:42:38.980 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 14:42:38.986 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 14:42:39.004 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 14:42:39.006 +03:00 [INF] Executing Add method
2024-06-12 14:42:39.317 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (Size = 20), @p12='?' (DbType = Int32), @p13='?' (DbType = Guid), @p14='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Id], [Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO [PlaceOfResidences] ([Id], [ApartmentNumber], [City], [HouseNumber], [PersonInformationId], [Street])
VALUES (@p9, @p10, @p11, @p12, @p13, @p14);
2024-06-12 14:42:39.380 +03:00 [INF] Person Information added successfully
2024-06-12 14:42:39.381 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 375.9396ms.
2024-06-12 14:42:39.382 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 14:42:39.388 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 401.331ms
2024-06-12 14:42:39.389 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 14:42:39.390 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 418.5809ms
2024-06-12 14:42:45.174 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 352
2024-06-12 14:42:45.180 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 14:42:45.180 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 14:42:45.183 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 14:42:45.184 +03:00 [INF] Executing Add method
2024-06-12 14:42:45.300 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (Size = 20), @p12='?' (DbType = Int32), @p13='?' (DbType = Guid), @p14='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Id], [Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO [PlaceOfResidences] ([Id], [ApartmentNumber], [City], [HouseNumber], [PersonInformationId], [Street])
VALUES (@p9, @p10, @p11, @p12, @p13, @p14);
2024-06-12 14:42:45.361 +03:00 [INF] Person Information added successfully
2024-06-12 14:42:45.361 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 177.2473ms.
2024-06-12 14:42:45.362 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 14:42:45.363 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 181.7092ms
2024-06-12 14:42:45.364 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 14:42:45.367 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 192.7263ms
2024-06-12 14:42:48.743 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 14:42:48.746 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 14:42:48.750 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 14:42:48.753 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 14:42:48.754 +03:00 [INF] Executing GetAll method
2024-06-12 14:42:48.853 +03:00 [INF] Executed DbCommand (63ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 14:42:48.863 +03:00 [INF] GetAll method executed successfully
2024-06-12 14:42:48.868 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 114.8062ms.
2024-06-12 14:42:48.871 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 14:42:48.880 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 129.1693ms
2024-06-12 14:42:48.882 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 14:42:48.884 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 141.3088ms
2024-06-12 14:43:03.901 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=77d59cad-ae04-4611-8fbb-08dc8ad4c319 - multipart/form-data; boundary=---------------------------347897052523191326753475045626 39813
2024-06-12 14:43:03.903 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 14:43:03.906 +03:00 [INF] Route matched with {action = "UploadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile, System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 14:43:03.921 +03:00 [INF] Executing action method WebApi.Controllers.FileController.UploadFile (WebApi) - Validation state: "Valid"
2024-06-12 14:43:03.922 +03:00 [INF] Executing UploadFile method for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:43:03.924 +03:00 [INF] Uploading file: Screenshot 2024-06-05 133416.png for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:43:04.098 +03:00 [INF] Uploading file: Screenshot 2024-06-05 133416.png for user: "00000000-0000-0000-0000-000000000000"
2024-06-12 14:43:04.193 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [FileEntities] ([Id], [FileName], [FilePath], [PersonInformationId], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 14:43:04.194 +03:00 [INF] Successfully uploaded file: Screenshot 2024-06-05 133416.png for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:43:04.195 +03:00 [INF] Successfully uploaded file: Screenshot 2024-06-05 133416.png for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:43:04.196 +03:00 [INF] File uploaded successfully for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:43:04.196 +03:00 [INF] Executed action method WebApi.Controllers.FileController.UploadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 275.056ms.
2024-06-12 14:43:04.199 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-06-12 14:43:04.206 +03:00 [INF] Executed action WebApi.Controllers.FileController.UploadFile (WebApi) in 299.0883ms
2024-06-12 14:43:04.207 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 14:43:04.209 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=77d59cad-ae04-4611-8fbb-08dc8ad4c319 - 200 null application/json; charset=utf-8 307.2862ms
2024-06-12 14:43:17.323 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation/77d59cad-ae04-4611-8fbb-08dc8ad4c319 - null null
2024-06-12 14:43:17.325 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetById (WebApi)'
2024-06-12 14:43:17.329 +03:00 [INF] Route matched with {action = "GetById", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[App.Dtos.PersonInformationDtos.PersonInformationDto]] GetById(System.Guid) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 14:43:17.331 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetById (WebApi) - Validation state: "Valid"
2024-06-12 14:43:17.334 +03:00 [INF] Executing GetById method with id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319"
2024-06-12 14:43:17.426 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@__id_0='?' (DbType = Guid), @__userId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId], [p0].[Id], [p0].[ApartmentNumber], [p0].[City], [p0].[HouseNumber], [p0].[PersonInformationId], [p0].[Street]
FROM [PersonInformations] AS [p]
LEFT JOIN [PlaceOfResidences] AS [p0] ON [p].[Id] = [p0].[Id]
WHERE [p].[Id] = @__id_0 AND [p].[UserId] = @__userId_1
2024-06-12 14:43:17.431 +03:00 [INF] GetById method executed successfully for id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319"
2024-06-12 14:43:17.432 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetById (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 98.8918ms.
2024-06-12 14:43:17.433 +03:00 [INF] Executing OkObjectResult, writing value of type 'App.Dtos.PersonInformationDtos.PersonInformationDto'.
2024-06-12 14:43:17.435 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetById (WebApi) in 104.0931ms
2024-06-12 14:43:17.437 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetById (WebApi)'
2024-06-12 14:43:17.438 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation/77d59cad-ae04-4611-8fbb-08dc8ad4c319 - 200 null application/json; charset=utf-8 114.8159ms
2024-06-12 14:44:23.857 +03:00 [INF] Application is shutting down...
2024-06-12 14:44:26.993 +03:00 [INF] Starting application
2024-06-12 14:44:27.088 +03:00 [INF] Configuring application
2024-06-12 14:44:27.226 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 14:44:27.275 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 14:44:27.279 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 14:44:27.280 +03:00 [INF] Hosting environment: Development
2024-06-12 14:44:27.281 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 14:44:27.506 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 14:44:27.617 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 111.8267ms
2024-06-12 14:44:27.717 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 14:44:27.788 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 71.2237ms
2024-06-12 14:44:29.893 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 73
2024-06-12 14:44:29.898 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 14:44:29.953 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:44:29.970 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 14:44:30.148 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 14:44:30.150 +03:00 [INF] Executing Login method for userName: 8sOdrZEU27o
2024-06-12 14:44:30.152 +03:00 [INF] User login attempt with username: 8sOdrZEU27o
2024-06-12 14:44:30.154 +03:00 [INF] Fetching user by username: 8sOdrZEU27o
2024-06-12 14:44:31.423 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 14:44:31.488 +03:00 [INF] Generating JWT token for username: 8sOdrZEU27o
2024-06-12 14:44:31.496 +03:00 [INF] User successfully logged in with username: 8sOdrZEU27o
2024-06-12 14:44:31.496 +03:00 [INF] User logged in successfully with userName: 8sOdrZEU27o
2024-06-12 14:44:31.500 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1348.159ms.
2024-06-12 14:44:31.507 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 14:44:31.511 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1537.703ms
2024-06-12 14:44:31.513 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:44:31.521 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1628.469ms
2024-06-12 14:44:42.091 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation/77d59cad-ae04-4611-8fbb-08dc8ad4c319 - null null
2024-06-12 14:44:42.100 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetById (WebApi)'
2024-06-12 14:44:42.106 +03:00 [INF] Route matched with {action = "GetById", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[App.Dtos.PersonInformationDtos.PersonInformationIncludeDataDto]] GetById(System.Guid) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 14:44:42.109 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetById (WebApi) - Validation state: "Valid"
2024-06-12 14:44:42.111 +03:00 [INF] Executing GetById method with id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319"
2024-06-12 14:44:42.288 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__id_0='?' (DbType = Guid), @__userId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId], [p0].[Id], [p0].[ApartmentNumber], [p0].[City], [p0].[HouseNumber], [p0].[PersonInformationId], [p0].[Street]
FROM [PersonInformations] AS [p]
LEFT JOIN [PlaceOfResidences] AS [p0] ON [p].[Id] = [p0].[Id]
WHERE [p].[Id] = @__id_0 AND [p].[UserId] = @__userId_1
2024-06-12 14:44:42.332 +03:00 [INF] GetById method executed successfully for id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319"
2024-06-12 14:44:42.333 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetById (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 222.9642ms.
2024-06-12 14:44:42.335 +03:00 [INF] Executing OkObjectResult, writing value of type 'App.Dtos.PersonInformationDtos.PersonInformationIncludeDataDto'.
2024-06-12 14:44:42.352 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetById (WebApi) in 243.8864ms
2024-06-12 14:44:42.353 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetById (WebApi)'
2024-06-12 14:44:42.354 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation/77d59cad-ae04-4611-8fbb-08dc8ad4c319 - 200 null application/json; charset=utf-8 263.6055ms
2024-06-12 14:45:39.329 +03:00 [INF] Application is shutting down...
2024-06-12 14:45:42.310 +03:00 [INF] Starting application
2024-06-12 14:45:42.402 +03:00 [INF] Configuring application
2024-06-12 14:45:42.517 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 14:45:42.567 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 14:45:42.570 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 14:45:42.570 +03:00 [INF] Hosting environment: Development
2024-06-12 14:45:42.571 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 14:45:42.894 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 14:45:43.003 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 109.6328ms
2024-06-12 14:45:43.101 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 14:45:43.173 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 72.09ms
2024-06-12 14:45:45.842 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 73
2024-06-12 14:45:45.847 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 14:45:45.902 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:45:45.920 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 14:45:46.095 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 14:45:46.097 +03:00 [INF] Executing Login method for userName: 8sOdrZEU27o
2024-06-12 14:45:46.099 +03:00 [INF] User login attempt with username: 8sOdrZEU27o
2024-06-12 14:45:46.100 +03:00 [INF] Fetching user by username: 8sOdrZEU27o
2024-06-12 14:45:47.389 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 14:45:47.454 +03:00 [INF] Generating JWT token for username: 8sOdrZEU27o
2024-06-12 14:45:47.462 +03:00 [INF] User successfully logged in with username: 8sOdrZEU27o
2024-06-12 14:45:47.463 +03:00 [INF] User logged in successfully with userName: 8sOdrZEU27o
2024-06-12 14:45:47.467 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1367.7335ms.
2024-06-12 14:45:47.474 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 14:45:47.478 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1553.9397ms
2024-06-12 14:45:47.479 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:45:47.488 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1646.3166ms
2024-06-12 14:45:58.503 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation/77d59cad-ae04-4611-8fbb-08dc8ad4c319 - null null
2024-06-12 14:45:58.514 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetById (WebApi)'
2024-06-12 14:45:58.522 +03:00 [INF] Route matched with {action = "GetById", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[App.Dtos.PersonInformationDtos.PersonInformationIncludeDataDto]] GetById(System.Guid) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 14:45:58.530 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetById (WebApi) - Validation state: "Valid"
2024-06-12 14:45:58.533 +03:00 [INF] Executing GetById method with id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319"
2024-06-12 14:45:58.803 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__id_0='?' (DbType = Guid), @__userId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId], [p0].[Id], [p0].[ApartmentNumber], [p0].[City], [p0].[HouseNumber], [p0].[PersonInformationId], [p0].[Street], [f].[Id], [f].[FileName], [f].[FilePath], [f].[PersonInformationId], [f].[UserId]
FROM [PersonInformations] AS [p]
LEFT JOIN [PlaceOfResidences] AS [p0] ON [p].[Id] = [p0].[Id]
LEFT JOIN [FileEntities] AS [f] ON [p].[Id] = [f].[PersonInformationId]
WHERE [p].[Id] = @__id_0 AND [p].[UserId] = @__userId_1
2024-06-12 14:45:58.897 +03:00 [INF] GetById method executed successfully for id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319"
2024-06-12 14:45:58.900 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetById (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 369.4839ms.
2024-06-12 14:45:58.905 +03:00 [INF] Executing OkObjectResult, writing value of type 'App.Dtos.PersonInformationDtos.PersonInformationIncludeDataDto'.
2024-06-12 14:45:58.944 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetById (WebApi) in 417.1283ms
2024-06-12 14:45:58.946 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetById (WebApi)'
2024-06-12 14:45:58.948 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation/77d59cad-ae04-4611-8fbb-08dc8ad4c319 - 200 null application/json; charset=utf-8 444.9264ms
2024-06-12 14:51:43.740 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/File/77d59cad-ae04-4611-8fbb-08dc8ad4c319 - null null
2024-06-12 14:51:43.745 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.DownloadFile (WebApi)'
2024-06-12 14:51:43.750 +03:00 [INF] Route matched with {action = "DownloadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 14:51:43.759 +03:00 [INF] Executing action method WebApi.Controllers.FileController.DownloadFile (WebApi) - Validation state: "Valid"
2024-06-12 14:51:43.761 +03:00 [INF] Executing DownloadFile method for file: "77d59cad-ae04-4611-8fbb-08dc8ad4c319" and user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:51:43.764 +03:00 [INF] Downloading file with id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319" for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:51:43.768 +03:00 [INF] Downloading file with id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319" for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:51:43.846 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[@__id_0='?' (DbType = Guid), @__userId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [f].[Id], [f].[FileName], [f].[FilePath], [f].[PersonInformationId], [f].[UserId]
FROM [FileEntities] AS [f]
WHERE [f].[Id] = @__id_0 AND [f].[UserId] = @__userId_1
2024-06-12 14:51:43.848 +03:00 [WRN] File with id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319" not found for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:51:43.849 +03:00 [WRN] Unauthorized access attempt to download file with id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319" by user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:51:43.850 +03:00 [ERR] Error occurred while downloading file with id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319" for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
System.UnauthorizedAccessException: You do not have permission to download this file.
   at App.Services.FileService.Download(Guid id, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 114
2024-06-12 14:51:43.860 +03:00 [WRN] Unauthorized access in DownloadFile method for file: "77d59cad-ae04-4611-8fbb-08dc8ad4c319" and user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:51:43.860 +03:00 [INF] Executed action method WebApi.Controllers.FileController.DownloadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.ForbidResult in 100.3503ms.
2024-06-12 14:51:43.864 +03:00 [INF] Executing ForbidResult with authentication schemes (["You do not have permission to download this file."]).
2024-06-12 14:51:43.869 +03:00 [INF] Executed action WebApi.Controllers.FileController.DownloadFile (WebApi) in 112.5834ms
2024-06-12 14:51:43.870 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.DownloadFile (WebApi)'
2024-06-12 14:51:43.871 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authentication handler is registered for the scheme 'You do not have permission to download this file.'. The registered schemes are: Bearer. Did you forget to call AddAuthentication().Add[SomeAuthHandler]("You do not have permission to download this file.",...)?
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ForbidAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Mvc.ForbidResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-06-12 14:51:43.878 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/File/77d59cad-ae04-4611-8fbb-08dc8ad4c319 - 500 null text/plain; charset=utf-8 138.2388ms
2024-06-12 14:51:48.684 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 73
2024-06-12 14:51:48.690 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6/12/2024 11:47:54 AM', Current time (UTC): '6/12/2024 11:51:48 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-06-12 14:51:48.693 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6/12/2024 11:47:54 AM', Current time (UTC): '6/12/2024 11:51:48 AM'.
2024-06-12 14:51:48.694 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:51:48.695 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 14:51:48.698 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 14:51:48.705 +03:00 [INF] Executing Login method for userName: 8sOdrZEU27o
2024-06-12 14:51:48.706 +03:00 [INF] User login attempt with username: 8sOdrZEU27o
2024-06-12 14:51:48.707 +03:00 [INF] Fetching user by username: 8sOdrZEU27o
2024-06-12 14:51:48.767 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 14:51:48.770 +03:00 [INF] Generating JWT token for username: 8sOdrZEU27o
2024-06-12 14:51:48.771 +03:00 [INF] User successfully logged in with username: 8sOdrZEU27o
2024-06-12 14:51:48.772 +03:00 [INF] User logged in successfully with userName: 8sOdrZEU27o
2024-06-12 14:51:48.772 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 67.0849ms.
2024-06-12 14:51:48.773 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 14:51:48.774 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 77.3515ms
2024-06-12 14:51:48.775 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:51:48.776 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 91.2464ms
2024-06-12 14:51:56.908 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/File/77d59cad-ae04-4611-8fbb-08dc8ad4c319 - null null
2024-06-12 14:51:56.910 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.DownloadFile (WebApi)'
2024-06-12 14:51:56.910 +03:00 [INF] Route matched with {action = "DownloadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 14:51:56.912 +03:00 [INF] Executing action method WebApi.Controllers.FileController.DownloadFile (WebApi) - Validation state: "Valid"
2024-06-12 14:51:56.913 +03:00 [INF] Executing DownloadFile method for file: "77d59cad-ae04-4611-8fbb-08dc8ad4c319" and user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:51:56.913 +03:00 [INF] Downloading file with id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319" for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:51:56.921 +03:00 [INF] Downloading file with id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319" for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:51:56.993 +03:00 [INF] Executed DbCommand (63ms) [Parameters=[@__id_0='?' (DbType = Guid), @__userId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [f].[Id], [f].[FileName], [f].[FilePath], [f].[PersonInformationId], [f].[UserId]
FROM [FileEntities] AS [f]
WHERE [f].[Id] = @__id_0 AND [f].[UserId] = @__userId_1
2024-06-12 14:51:56.997 +03:00 [WRN] File with id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319" not found for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:51:56.997 +03:00 [WRN] Unauthorized access attempt to download file with id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319" by user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:51:56.998 +03:00 [ERR] Error occurred while downloading file with id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319" for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
System.UnauthorizedAccessException: You do not have permission to download this file.
   at App.Services.FileService.Download(Guid id, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 114
2024-06-12 14:51:56.999 +03:00 [WRN] Unauthorized access in DownloadFile method for file: "77d59cad-ae04-4611-8fbb-08dc8ad4c319" and user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:51:57.000 +03:00 [INF] Executed action method WebApi.Controllers.FileController.DownloadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.ForbidResult in 86.9948ms.
2024-06-12 14:51:57.000 +03:00 [INF] Executing ForbidResult with authentication schemes (["You do not have permission to download this file."]).
2024-06-12 14:51:57.001 +03:00 [INF] Executed action WebApi.Controllers.FileController.DownloadFile (WebApi) in 90.0502ms
2024-06-12 14:51:57.002 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.DownloadFile (WebApi)'
2024-06-12 14:51:57.003 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authentication handler is registered for the scheme 'You do not have permission to download this file.'. The registered schemes are: Bearer. Did you forget to call AddAuthentication().Add[SomeAuthHandler]("You do not have permission to download this file.",...)?
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ForbidAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Mvc.ForbidResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-06-12 14:51:57.006 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/File/77d59cad-ae04-4611-8fbb-08dc8ad4c319 - 500 null text/plain; charset=utf-8 98.1692ms
2024-06-12 14:52:19.457 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 14:52:19.460 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 14:52:19.464 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 14:52:19.468 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 14:52:19.476 +03:00 [INF] Executing GetAll method
2024-06-12 14:52:19.561 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 14:52:19.568 +03:00 [INF] GetAll method executed successfully
2024-06-12 14:52:19.569 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 94.169ms.
2024-06-12 14:52:19.570 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 14:52:19.573 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 105.3ms
2024-06-12 14:52:19.583 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 14:52:19.584 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 127.0302ms
2024-06-12 14:52:30.329 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation/77d59cad-ae04-4611-8fbb-08dc8ad4c319 - null null
2024-06-12 14:52:30.331 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetById (WebApi)'
2024-06-12 14:52:30.332 +03:00 [INF] Route matched with {action = "GetById", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[App.Dtos.PersonInformationDtos.PersonInformationIncludeDataDto]] GetById(System.Guid) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 14:52:30.336 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetById (WebApi) - Validation state: "Valid"
2024-06-12 14:52:30.337 +03:00 [INF] Executing GetById method with id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319"
2024-06-12 14:52:30.402 +03:00 [INF] Executed DbCommand (63ms) [Parameters=[@__id_0='?' (DbType = Guid), @__userId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId], [p0].[Id], [p0].[ApartmentNumber], [p0].[City], [p0].[HouseNumber], [p0].[PersonInformationId], [p0].[Street], [f].[Id], [f].[FileName], [f].[FilePath], [f].[PersonInformationId], [f].[UserId]
FROM [PersonInformations] AS [p]
LEFT JOIN [PlaceOfResidences] AS [p0] ON [p].[Id] = [p0].[Id]
LEFT JOIN [FileEntities] AS [f] ON [p].[Id] = [f].[PersonInformationId]
WHERE [p].[Id] = @__id_0 AND [p].[UserId] = @__userId_1
2024-06-12 14:52:30.405 +03:00 [INF] GetById method executed successfully for id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319"
2024-06-12 14:52:30.405 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetById (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 67.9437ms.
2024-06-12 14:52:30.406 +03:00 [INF] Executing OkObjectResult, writing value of type 'App.Dtos.PersonInformationDtos.PersonInformationIncludeDataDto'.
2024-06-12 14:52:30.407 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetById (WebApi) in 73.4502ms
2024-06-12 14:52:30.409 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetById (WebApi)'
2024-06-12 14:52:30.410 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation/77d59cad-ae04-4611-8fbb-08dc8ad4c319 - 200 null application/json; charset=utf-8 81.2532ms
2024-06-12 14:52:45.565 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/File/54724542-9896-4ee5-50b7-08dc8ad4d205 - null null
2024-06-12 14:52:45.567 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.DownloadFile (WebApi)'
2024-06-12 14:52:45.568 +03:00 [INF] Route matched with {action = "DownloadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadFile(System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 14:52:45.570 +03:00 [INF] Executing action method WebApi.Controllers.FileController.DownloadFile (WebApi) - Validation state: "Valid"
2024-06-12 14:52:45.570 +03:00 [INF] Executing DownloadFile method for file: "54724542-9896-4ee5-50b7-08dc8ad4d205" and user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:52:45.571 +03:00 [INF] Downloading file with id: "54724542-9896-4ee5-50b7-08dc8ad4d205" for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:52:45.572 +03:00 [INF] Downloading file with id: "54724542-9896-4ee5-50b7-08dc8ad4d205" for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:52:45.628 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[@__id_0='?' (DbType = Guid), @__userId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [f].[Id], [f].[FileName], [f].[FilePath], [f].[PersonInformationId], [f].[UserId]
FROM [FileEntities] AS [f]
WHERE [f].[Id] = @__id_0 AND [f].[UserId] = @__userId_1
2024-06-12 14:52:45.631 +03:00 [INF] Successfully found file with id: "54724542-9896-4ee5-50b7-08dc8ad4d205" for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:52:45.634 +03:00 [INF] Successfully downloaded file with id: "54724542-9896-4ee5-50b7-08dc8ad4d205" for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:52:45.635 +03:00 [INF] File downloaded successfully for file: "54724542-9896-4ee5-50b7-08dc8ad4d205" and user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:52:45.636 +03:00 [INF] Executed action method WebApi.Controllers.FileController.DownloadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.FileStreamResult in 65.6563ms.
2024-06-12 14:52:45.648 +03:00 [INF] Executing FileStreamResult, sending file with download name 'Screenshot 2024-06-05 133416.png' ...
2024-06-12 14:52:45.654 +03:00 [INF] Executed action WebApi.Controllers.FileController.DownloadFile (WebApi) in 85.1188ms
2024-06-12 14:52:45.660 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.DownloadFile (WebApi)'
2024-06-12 14:52:45.661 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/File/54724542-9896-4ee5-50b7-08dc8ad4d205 - 200 6665 application/octet-stream 95.2787ms
2024-06-12 14:56:07.950 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5236/api/File/54724542-9896-4ee5-50b7-08dc8ad4d205 - null null
2024-06-12 14:56:07.952 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.DeleteFile (WebApi)'
2024-06-12 14:56:07.957 +03:00 [INF] Route matched with {action = "DeleteFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteFile(System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 14:56:07.959 +03:00 [INF] Executing action method WebApi.Controllers.FileController.DeleteFile (WebApi) - Validation state: "Valid"
2024-06-12 14:56:07.963 +03:00 [INF] Executing DeleteFile method for file: "54724542-9896-4ee5-50b7-08dc8ad4d205" and user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:56:07.965 +03:00 [INF] Deleting file with id: "54724542-9896-4ee5-50b7-08dc8ad4d205" for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:56:07.965 +03:00 [INF] Downloading file with id: "54724542-9896-4ee5-50b7-08dc8ad4d205" for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:56:08.025 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[@__id_0='?' (DbType = Guid), @__userId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [f].[Id], [f].[FileName], [f].[FilePath], [f].[PersonInformationId], [f].[UserId]
FROM [FileEntities] AS [f]
WHERE [f].[Id] = @__id_0 AND [f].[UserId] = @__userId_1
2024-06-12 14:56:08.026 +03:00 [INF] Successfully found file with id: "54724542-9896-4ee5-50b7-08dc8ad4d205" for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:56:08.030 +03:00 [INF] Deleting file with id: "54724542-9896-4ee5-50b7-08dc8ad4d205" for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:56:08.090 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@__id_0='?' (DbType = Guid), @__userId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [f].[Id], [f].[FileName], [f].[FilePath], [f].[PersonInformationId], [f].[UserId]
FROM [FileEntities] AS [f]
WHERE [f].[Id] = @__id_0 AND [f].[UserId] = @__userId_1
2024-06-12 14:56:08.282 +03:00 [INF] Executed DbCommand (66ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [FileEntities]
OUTPUT 1
WHERE [Id] = @p0;
2024-06-12 14:56:08.293 +03:00 [INF] Successfully deleted file with id: "54724542-9896-4ee5-50b7-08dc8ad4d205" for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:56:08.294 +03:00 [INF] Successfully deleted file with id: "54724542-9896-4ee5-50b7-08dc8ad4d205" for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:56:08.300 +03:00 [INF] File deleted successfully for file: "54724542-9896-4ee5-50b7-08dc8ad4d205" and user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:56:08.302 +03:00 [INF] Executed action method WebApi.Controllers.FileController.DeleteFile (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 342.1399ms.
2024-06-12 14:56:08.304 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-06-12 14:56:08.317 +03:00 [INF] Executed action WebApi.Controllers.FileController.DeleteFile (WebApi) in 358.5537ms
2024-06-12 14:56:08.319 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.DeleteFile (WebApi)'
2024-06-12 14:56:08.325 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5236/api/File/54724542-9896-4ee5-50b7-08dc8ad4d205 - 200 null application/json; charset=utf-8 374.7214ms
2024-06-12 14:56:16.828 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation/77d59cad-ae04-4611-8fbb-08dc8ad4c319 - null null
2024-06-12 14:56:16.832 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetById (WebApi)'
2024-06-12 14:56:16.832 +03:00 [INF] Route matched with {action = "GetById", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[App.Dtos.PersonInformationDtos.PersonInformationIncludeDataDto]] GetById(System.Guid) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 14:56:16.834 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetById (WebApi) - Validation state: "Valid"
2024-06-12 14:56:16.835 +03:00 [INF] Executing GetById method with id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319"
2024-06-12 14:56:16.896 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[@__id_0='?' (DbType = Guid), @__userId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId], [p0].[Id], [p0].[ApartmentNumber], [p0].[City], [p0].[HouseNumber], [p0].[PersonInformationId], [p0].[Street], [f].[Id], [f].[FileName], [f].[FilePath], [f].[PersonInformationId], [f].[UserId]
FROM [PersonInformations] AS [p]
LEFT JOIN [PlaceOfResidences] AS [p0] ON [p].[Id] = [p0].[Id]
LEFT JOIN [FileEntities] AS [f] ON [p].[Id] = [f].[PersonInformationId]
WHERE [p].[Id] = @__id_0 AND [p].[UserId] = @__userId_1
2024-06-12 14:56:16.901 +03:00 [INF] GetById method executed successfully for id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319"
2024-06-12 14:56:16.902 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetById (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 67.113ms.
2024-06-12 14:56:16.903 +03:00 [INF] Executing OkObjectResult, writing value of type 'App.Dtos.PersonInformationDtos.PersonInformationIncludeDataDto'.
2024-06-12 14:56:16.904 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetById (WebApi) in 70.6415ms
2024-06-12 14:56:16.905 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetById (WebApi)'
2024-06-12 14:56:16.908 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation/77d59cad-ae04-4611-8fbb-08dc8ad4c319 - 200 null application/json; charset=utf-8 79.4088ms
2024-06-12 14:56:31.280 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=77d59cad-ae04-4611-8fbb-08dc8ad4c319 - multipart/form-data; boundary=---------------------------877441166435124045580025409 39807
2024-06-12 14:56:31.282 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 14:56:31.286 +03:00 [INF] Route matched with {action = "UploadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile, System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 14:56:31.302 +03:00 [INF] Executing action method WebApi.Controllers.FileController.UploadFile (WebApi) - Validation state: "Valid"
2024-06-12 14:56:31.303 +03:00 [INF] Executing UploadFile method for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:56:31.305 +03:00 [INF] Uploading file: Screenshot 2024-06-05 133416.png for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:56:31.467 +03:00 [INF] Uploading file: Screenshot 2024-06-05 133416.png for user: "00000000-0000-0000-0000-000000000000"
2024-06-12 14:56:31.592 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [FileEntities] ([Id], [FileName], [FilePath], [PersonInformationId], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 14:56:31.594 +03:00 [INF] Successfully uploaded file: Screenshot 2024-06-05 133416.png for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:56:31.595 +03:00 [INF] Successfully uploaded file: Screenshot 2024-06-05 133416.png for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:56:31.595 +03:00 [INF] File uploaded successfully for user: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:56:31.596 +03:00 [INF] Executed action method WebApi.Controllers.FileController.UploadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 293.1568ms.
2024-06-12 14:56:31.597 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-06-12 14:56:31.598 +03:00 [INF] Executed action WebApi.Controllers.FileController.UploadFile (WebApi) in 310.3402ms
2024-06-12 14:56:31.599 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 14:56:31.600 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=77d59cad-ae04-4611-8fbb-08dc8ad4c319 - 200 null application/json; charset=utf-8 320.0361ms
2024-06-12 14:56:38.991 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation/77d59cad-ae04-4611-8fbb-08dc8ad4c319 - null null
2024-06-12 14:56:38.993 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetById (WebApi)'
2024-06-12 14:56:38.994 +03:00 [INF] Route matched with {action = "GetById", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[App.Dtos.PersonInformationDtos.PersonInformationIncludeDataDto]] GetById(System.Guid) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 14:56:38.996 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetById (WebApi) - Validation state: "Valid"
2024-06-12 14:56:38.996 +03:00 [INF] Executing GetById method with id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319"
2024-06-12 14:56:39.070 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__id_0='?' (DbType = Guid), @__userId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId], [p0].[Id], [p0].[ApartmentNumber], [p0].[City], [p0].[HouseNumber], [p0].[PersonInformationId], [p0].[Street], [f].[Id], [f].[FileName], [f].[FilePath], [f].[PersonInformationId], [f].[UserId]
FROM [PersonInformations] AS [p]
LEFT JOIN [PlaceOfResidences] AS [p0] ON [p].[Id] = [p0].[Id]
LEFT JOIN [FileEntities] AS [f] ON [p].[Id] = [f].[PersonInformationId]
WHERE [p].[Id] = @__id_0 AND [p].[UserId] = @__userId_1
2024-06-12 14:56:39.072 +03:00 [INF] GetById method executed successfully for id: "77d59cad-ae04-4611-8fbb-08dc8ad4c319"
2024-06-12 14:56:39.073 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetById (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 76.6257ms.
2024-06-12 14:56:39.079 +03:00 [INF] Executing OkObjectResult, writing value of type 'App.Dtos.PersonInformationDtos.PersonInformationIncludeDataDto'.
2024-06-12 14:56:39.080 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetById (WebApi) in 84.6505ms
2024-06-12 14:56:39.081 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetById (WebApi)'
2024-06-12 14:56:39.082 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation/77d59cad-ae04-4611-8fbb-08dc8ad4c319 - 200 null application/json; charset=utf-8 91.1481ms
2024-06-12 14:56:58.273 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 165
2024-06-12 14:56:58.275 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 14:56:58.280 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 14:56:58.291 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 14:56:58.316 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 34.6758ms
2024-06-12 14:56:58.317 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 14:56:58.318 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 400 null application/problem+json; charset=utf-8 44.5385ms
2024-06-12 14:58:04.350 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 156
2024-06-12 14:58:04.352 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 14:58:04.353 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 14:58:04.355 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 14:58:04.357 +03:00 [INF] Executing Register method for userName: 123PTkqLGotkTY
2024-06-12 14:58:04.359 +03:00 [INF] Registering user with username: 123PTkqLGotkTY
2024-06-12 14:58:04.360 +03:00 [INF] Fetching user by username: 123PTkqLGotkTY
2024-06-12 14:58:04.417 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 14:58:04.419 +03:00 [WRN] User with username: 123PTkqLGotkTY not found
2024-06-12 14:58:04.422 +03:00 [INF] Creating user with username: 123PTkqLGotkTY
2024-06-12 14:58:04.424 +03:00 [INF] Creating user with username: 123PTkqLGotkTY
2024-06-12 14:58:04.491 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 14:58:04.492 +03:00 [INF] Successfully created user with username: 123PTkqLGotkTY
2024-06-12 14:58:04.493 +03:00 [INF] Successfully registered user with username: 123PTkqLGotkTY
2024-06-12 14:58:04.494 +03:00 [INF] User registered successfully with userName: 123PTkqLGotkTY
2024-06-12 14:58:04.494 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 138.3778ms.
2024-06-12 14:58:04.495 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 14:58:04.496 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 142.4786ms
2024-06-12 14:58:04.497 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 14:58:04.498 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 148.2414ms
2024-06-12 14:58:43.314 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 94
2024-06-12 14:58:43.316 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:58:43.318 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 14:58:43.320 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 14:58:43.321 +03:00 [INF] Executing Login method for userName: 123PTkqLGotkTY
2024-06-12 14:58:43.321 +03:00 [INF] User login attempt with username: 123PTkqLGotkTY
2024-06-12 14:58:43.322 +03:00 [INF] Fetching user by username: 123PTkqLGotkTY
2024-06-12 14:58:43.387 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 14:58:43.392 +03:00 [INF] Generating JWT token for username: 123PTkqLGotkTY
2024-06-12 14:58:43.395 +03:00 [INF] User successfully logged in with username: 123PTkqLGotkTY
2024-06-12 14:58:43.396 +03:00 [INF] User logged in successfully with userName: 123PTkqLGotkTY
2024-06-12 14:58:43.397 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 75.7406ms.
2024-06-12 14:58:43.405 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 14:58:43.417 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 97.0855ms
2024-06-12 14:58:43.423 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 14:58:43.427 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 112.6227ms
2024-06-12 14:58:57.168 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetAll - null null
2024-06-12 14:58:57.170 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.GetAll (WebApi)'
2024-06-12 14:58:57.174 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[App.Dtos.UserDtos.UserDto]]] GetAll() on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 14:58:57.175 +03:00 [INF] Executing action method WebApi.Controllers.UserController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 14:58:57.177 +03:00 [INF] Executing GetAll method
2024-06-12 14:58:57.179 +03:00 [INF] Getting all users
2024-06-12 14:58:57.180 +03:00 [INF] Fetching all users
2024-06-12 14:58:57.254 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
2024-06-12 14:58:57.255 +03:00 [INF] Successfully fetched all users
2024-06-12 14:58:57.259 +03:00 [INF] Successfully retrieved all users
2024-06-12 14:58:57.259 +03:00 [INF] GetAll method executed successfully
2024-06-12 14:58:57.260 +03:00 [INF] Executed action method WebApi.Controllers.UserController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 83.469ms.
2024-06-12 14:58:57.260 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.UserDtos.UserDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 14:58:57.262 +03:00 [INF] Executed action WebApi.Controllers.UserController.GetAll (WebApi) in 87.104ms
2024-06-12 14:58:57.263 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.GetAll (WebApi)'
2024-06-12 14:58:57.263 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetAll - 200 null application/json; charset=utf-8 95.66ms
2024-06-12 14:59:09.936 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5236/api/User/Delete?id=d6939119-9641-4b25-b05a-08dc8ad4881f - null null
2024-06-12 14:59:09.939 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.DeleteUser (WebApi)'
2024-06-12 14:59:09.946 +03:00 [INF] Route matched with {action = "DeleteUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteUser(System.Guid) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 14:59:09.948 +03:00 [INF] Executing action method WebApi.Controllers.UserController.DeleteUser (WebApi) - Validation state: "Valid"
2024-06-12 14:59:09.951 +03:00 [INF] Executing Delete User method with id: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:59:09.953 +03:00 [INF] Deleting user with id: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:59:09.955 +03:00 [INF] Fetching user by id: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:59:10.096 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[PasswordHash], [u0].[PasswordSalt], [u0].[Role], [u0].[UserName], [s].[Id], [s].[Birthday], [s].[Email], [s].[FirstName], [s].[Gender], [s].[LastName], [s].[PersonalCode], [s].[PhoneNumber], [s].[UserId], [s].[Id0], [s].[ApartmentNumber], [s].[City], [s].[HouseNumber], [s].[PersonInformationId], [s].[Street]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [u0]
LEFT JOIN (
    SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId], [p0].[Id] AS [Id0], [p0].[ApartmentNumber], [p0].[City], [p0].[HouseNumber], [p0].[PersonInformationId], [p0].[Street]
    FROM [PersonInformations] AS [p]
    LEFT JOIN [PlaceOfResidences] AS [p0] ON [p].[Id] = [p0].[Id]
) AS [s] ON [u0].[Id] = [s].[UserId]
ORDER BY [u0].[Id], [s].[Id]
2024-06-12 14:59:10.117 +03:00 [INF] Deleting user with id: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:59:10.296 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [PlaceOfResidences]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [PlaceOfResidences]
OUTPUT 1
WHERE [Id] = @p1;
DELETE FROM [PersonInformations]
OUTPUT 1
WHERE [Id] = @p2;
DELETE FROM [PersonInformations]
OUTPUT 1
WHERE [Id] = @p3;
DELETE FROM [Users]
OUTPUT 1
WHERE [Id] = @p4;
2024-06-12 14:59:10.356 +03:00 [INF] Successfully deleted user with id: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:59:10.357 +03:00 [INF] Successfully deleted user with id: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:59:10.358 +03:00 [INF] User deleted successfully with id: "d6939119-9641-4b25-b05a-08dc8ad4881f"
2024-06-12 14:59:10.358 +03:00 [INF] Executed action method WebApi.Controllers.UserController.DeleteUser (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 408.3604ms.
2024-06-12 14:59:10.359 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 14:59:10.359 +03:00 [INF] Executed action WebApi.Controllers.UserController.DeleteUser (WebApi) in 411.7069ms
2024-06-12 14:59:10.361 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.DeleteUser (WebApi)'
2024-06-12 14:59:10.362 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5236/api/User/Delete?id=d6939119-9641-4b25-b05a-08dc8ad4881f - 200 null application/json; charset=utf-8 425.1923ms
2024-06-12 15:04:47.467 +03:00 [INF] Application is shutting down...
2024-06-12 15:04:52.392 +03:00 [INF] Starting application
2024-06-12 15:04:52.488 +03:00 [INF] Configuring application
2024-06-12 15:04:52.612 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 15:04:52.667 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 15:04:52.670 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 15:04:52.671 +03:00 [INF] Hosting environment: Development
2024-06-12 15:04:52.671 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 15:04:52.933 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 15:04:53.047 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 115.4841ms
2024-06-12 15:04:53.085 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui.css - null null
2024-06-12 15:04:53.095 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-06-12 15:04:53.097 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui.css - 499 143943 text/css 12.0643ms
2024-06-12 15:04:53.164 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 15:04:53.236 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 71.7244ms
2024-06-12 15:05:18.911 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 146
2024-06-12 15:05:18.920 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 15:05:18.951 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 15:05:18.984 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 15:05:19.313 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 15:05:19.350 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 360.4635ms
2024-06-12 15:05:19.351 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 15:05:19.355 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 400 null application/problem+json; charset=utf-8 443.4556ms
2024-06-12 15:05:28.830 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 156
2024-06-12 15:05:28.836 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 15:05:28.838 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 15:05:28.857 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 15:05:28.861 +03:00 [INF] Executing Register method for userName: 20gi2020202020
2024-06-12 15:05:28.862 +03:00 [INF] Registering user with username: 20gi2020202020
2024-06-12 15:05:28.864 +03:00 [INF] Fetching user by username: 20gi2020202020
2024-06-12 15:05:30.502 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 15:05:30.526 +03:00 [WRN] User with username: 20gi2020202020 not found
2024-06-12 15:05:30.528 +03:00 [INF] Creating user with username: 20gi2020202020
2024-06-12 15:05:30.531 +03:00 [INF] Creating user with username: 20gi2020202020
2024-06-12 15:05:30.825 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 15:05:30.834 +03:00 [INF] Successfully created user with username: 20gi2020202020
2024-06-12 15:05:30.834 +03:00 [INF] Successfully registered user with username: 20gi2020202020
2024-06-12 15:05:30.835 +03:00 [INF] User registered successfully with userName: 20gi2020202020
2024-06-12 15:05:30.843 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1977.4096ms.
2024-06-12 15:05:30.849 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 15:05:30.853 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 2013.9628ms
2024-06-12 15:05:30.857 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 15:05:30.877 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 2046.2429ms
2024-06-12 15:06:33.039 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 157
2024-06-12 15:06:33.043 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 15:06:33.044 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 15:06:33.048 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 15:06:33.049 +03:00 [INF] Executing Register method for userName: 20gi20202020202
2024-06-12 15:06:33.049 +03:00 [INF] Registering user with username: 20gi20202020202
2024-06-12 15:06:33.050 +03:00 [INF] Fetching user by username: 20gi20202020202
2024-06-12 15:06:33.150 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 15:06:33.152 +03:00 [WRN] User with username: 20gi20202020202 not found
2024-06-12 15:06:33.153 +03:00 [INF] Creating user with username: 20gi20202020202
2024-06-12 15:06:33.153 +03:00 [INF] Creating user with username: 20gi20202020202
2024-06-12 15:06:33.216 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 15:06:33.217 +03:00 [INF] Successfully created user with username: 20gi20202020202
2024-06-12 15:06:33.218 +03:00 [INF] Successfully registered user with username: 20gi20202020202
2024-06-12 15:06:33.218 +03:00 [INF] User registered successfully with userName: 20gi20202020202
2024-06-12 15:06:33.219 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 170.1012ms.
2024-06-12 15:06:33.220 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 15:06:33.221 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 175.9191ms
2024-06-12 15:06:33.221 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 15:06:33.222 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 182.5254ms
2024-06-12 15:06:53.002 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 157
2024-06-12 15:06:53.004 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 15:06:53.005 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 15:06:53.006 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 15:06:53.007 +03:00 [INF] Executing Register method for userName: 20gi20202020202
2024-06-12 15:06:53.007 +03:00 [INF] Registering user with username: 20gi20202020202
2024-06-12 15:06:53.008 +03:00 [INF] Fetching user by username: 20gi20202020202
2024-06-12 15:06:53.080 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 15:06:53.089 +03:00 [WRN] User with username: 20gi20202020202 already exists
2024-06-12 15:06:53.090 +03:00 [ERR] Error occurred while registering user with username: 20gi20202020202
System.IO.InvalidDataException: User with such username already exists
   at App.Services.UserService.RegisterAsync(UserRegisterDto userRegisterDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 69
2024-06-12 15:06:53.098 +03:00 [ERR] Error occurred while registering user with userName: 20gi20202020202
System.IO.InvalidDataException: User with such username already exists
   at App.Services.UserService.RegisterAsync(UserRegisterDto userRegisterDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 69
   at App.Services.UserService.RegisterAsync(UserRegisterDto userRegisterDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 82
   at WebApi.Controllers.UserController.Register(UserRegisterDto userRegisterDto) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\UserController.cs:line 74
2024-06-12 15:06:53.101 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 93.9802ms.
2024-06-12 15:06:53.102 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 15:06:53.103 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 96.9993ms
2024-06-12 15:06:53.103 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 15:06:53.104 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 409 null text/plain; charset=utf-8 101.6861ms
2024-06-12 15:07:03.451 +03:00 [INF] Application is shutting down...
2024-06-12 15:07:07.463 +03:00 [INF] Starting application
2024-06-12 15:07:07.556 +03:00 [INF] Configuring application
2024-06-12 15:07:07.667 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 15:07:07.728 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 15:07:07.730 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 15:07:07.732 +03:00 [INF] Hosting environment: Development
2024-06-12 15:07:07.732 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 15:07:07.971 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 15:07:08.079 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 108.4924ms
2024-06-12 15:07:08.178 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 15:07:08.250 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 72.0738ms
2024-06-12 15:11:04.940 +03:00 [INF] Application is shutting down...
2024-06-12 15:11:08.099 +03:00 [INF] Starting application
2024-06-12 15:11:08.191 +03:00 [INF] Configuring application
2024-06-12 15:11:08.301 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 15:11:08.355 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 15:11:08.358 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 15:11:08.359 +03:00 [INF] Hosting environment: Development
2024-06-12 15:11:08.359 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 15:11:08.666 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 15:11:08.776 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 110.8412ms
2024-06-12 15:11:08.879 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 15:11:08.949 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 70.1568ms
2024-06-12 15:11:28.758 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 124
2024-06-12 15:11:28.768 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 15:11:28.801 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 15:11:28.834 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 15:11:29.191 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 15:11:29.228 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 381.8148ms
2024-06-12 15:11:29.231 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 15:11:29.234 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 400 null application/problem+json; charset=utf-8 475.6943ms
2024-06-12 15:11:37.968 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 128
2024-06-12 15:11:37.974 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 15:11:37.975 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 15:11:37.995 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 15:11:37.997 +03:00 [INF] Executing Register method for userName: LnLnLnLn
2024-06-12 15:11:37.999 +03:00 [INF] Registering user with username: LnLnLnLn
2024-06-12 15:11:38.000 +03:00 [INF] Fetching user by username: LnLnLnLn
2024-06-12 15:11:39.829 +03:00 [INF] Executed DbCommand (89ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 15:11:39.879 +03:00 [WRN] User with username: LnLnLnLn not found
2024-06-12 15:11:39.882 +03:00 [INF] Creating user with username: LnLnLnLn
2024-06-12 15:11:39.887 +03:00 [INF] Creating user with username: LnLnLnLn
2024-06-12 15:11:40.194 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 15:11:40.203 +03:00 [INF] Successfully created user with username: LnLnLnLn
2024-06-12 15:11:40.203 +03:00 [INF] Successfully registered user with username: LnLnLnLn
2024-06-12 15:11:40.204 +03:00 [INF] User registered successfully with userName: LnLnLnLn
2024-06-12 15:11:40.208 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2209.3572ms.
2024-06-12 15:11:40.211 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 15:11:40.213 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 2236.484ms
2024-06-12 15:11:40.222 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 15:11:40.237 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 2268.6493ms
2024-06-12 15:12:28.498 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 77
2024-06-12 15:12:28.503 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 15:12:28.508 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 15:12:28.517 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 15:12:28.518 +03:00 [INF] Executing Login method for userName: LnLnLnLn
2024-06-12 15:12:28.520 +03:00 [INF] User login attempt with username: LnLnLnLn
2024-06-12 15:12:28.520 +03:00 [INF] Fetching user by username: LnLnLnLn
2024-06-12 15:12:28.616 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 15:12:28.637 +03:00 [INF] Generating JWT token for username: LnLnLnLn
2024-06-12 15:12:28.674 +03:00 [INF] User successfully logged in with username: LnLnLnLn
2024-06-12 15:12:28.677 +03:00 [INF] User logged in successfully with userName: LnLnLnLn
2024-06-12 15:12:28.680 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 162.3724ms.
2024-06-12 15:12:28.681 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 15:12:28.682 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 172.7577ms
2024-06-12 15:12:28.684 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 15:12:28.685 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 186.4702ms
2024-06-12 15:12:43.307 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 352
2024-06-12 15:12:43.350 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 15:12:43.352 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 15:12:43.368 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 15:12:43.370 +03:00 [INF] Executing Add method
2024-06-12 15:12:43.564 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2024-06-12 15:12:43.638 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAccess.MainDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'FinalCodeAcademyApp.dbo.PersonInformations'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:666fb537-9059-46f6-afc5-bd522efee1d1
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'FinalCodeAcademyApp.dbo.PersonInformations'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:666fb537-9059-46f6-afc5-bd522efee1d1
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-06-12 15:12:43.648 +03:00 [ERR] Error occurred while Adding Person Information with id: "00000000-0000-0000-0000-000000000000"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'FinalCodeAcademyApp.dbo.PersonInformations'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:666fb537-9059-46f6-afc5-bd522efee1d1
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.PersonInformationRepository.AddAsync(PersonInformation entity, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\PersonInformationRepository.cs:line 34
   at App.Services.PersonInformationService.AddAsync(PersonInformationCreateDto personInformationDto, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\PersonInformationService.cs:line 39
   at WebApi.Controllers.PersonInformationController.Add(PersonInformationCreateDto dto) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\PersonInformationController.cs:line 77
2024-06-12 15:12:43.655 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 287.0593ms.
2024-06-12 15:12:43.656 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-06-12 15:12:43.657 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 303.7466ms
2024-06-12 15:12:43.658 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 15:12:43.659 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 500 null text/plain; charset=utf-8 351.654ms
2024-06-12 15:14:30.953 +03:00 [INF] Application is shutting down...
2024-06-12 15:14:34.383 +03:00 [INF] Starting application
2024-06-12 15:14:34.477 +03:00 [INF] Configuring application
2024-06-12 15:14:34.602 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 15:14:34.652 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 15:14:34.656 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 15:14:34.657 +03:00 [INF] Hosting environment: Development
2024-06-12 15:14:34.657 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 15:14:34.937 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 15:14:35.046 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 109.3428ms
2024-06-12 15:14:35.180 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 15:14:35.252 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 72.1198ms
2024-06-12 15:14:36.619 +03:00 [INF] Application is shutting down...
2024-06-12 15:14:50.607 +03:00 [INF] Starting application
2024-06-12 15:14:50.701 +03:00 [INF] Configuring application
2024-06-12 15:14:50.819 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 15:14:50.872 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 15:14:50.874 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 15:14:50.875 +03:00 [INF] Hosting environment: Development
2024-06-12 15:14:50.875 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 15:14:51.114 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 15:14:51.224 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 110.803ms
2024-06-12 15:14:51.309 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 15:14:51.379 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.271ms
2024-06-12 15:14:56.429 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 77
2024-06-12 15:14:56.435 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 15:14:56.492 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 15:14:56.510 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 15:14:56.686 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 15:14:56.688 +03:00 [INF] Executing Login method for userName: LnLnLnLn
2024-06-12 15:14:56.690 +03:00 [INF] User login attempt with username: LnLnLnLn
2024-06-12 15:14:56.692 +03:00 [INF] Fetching user by username: LnLnLnLn
2024-06-12 15:14:58.023 +03:00 [INF] Executed DbCommand (94ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 15:14:58.089 +03:00 [INF] Generating JWT token for username: LnLnLnLn
2024-06-12 15:14:58.096 +03:00 [INF] User successfully logged in with username: LnLnLnLn
2024-06-12 15:14:58.097 +03:00 [INF] User logged in successfully with userName: LnLnLnLn
2024-06-12 15:14:58.101 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1410.6734ms.
2024-06-12 15:14:58.108 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 15:14:58.112 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1597.3649ms
2024-06-12 15:14:58.113 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 15:14:58.122 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1693.0074ms
2024-06-12 15:15:05.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 352
2024-06-12 15:15:05.163 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 15:15:05.169 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 15:15:05.204 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 15:15:05.208 +03:00 [INF] Executing Add method
2024-06-12 15:15:05.670 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2024-06-12 15:15:05.758 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAccess.MainDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'FinalCodeAcademyApp.dbo.PersonInformations'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7e04f22f-6fb5-487b-853f-9b820816fe26
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'FinalCodeAcademyApp.dbo.PersonInformations'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7e04f22f-6fb5-487b-853f-9b820816fe26
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-06-12 15:15:05.764 +03:00 [ERR] Error occurred while Adding Person Information with id: "00000000-0000-0000-0000-000000000000"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'FinalCodeAcademyApp.dbo.PersonInformations'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:7e04f22f-6fb5-487b-853f-9b820816fe26
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.PersonInformationRepository.AddAsync(PersonInformation entity, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\PersonInformationRepository.cs:line 34
   at App.Services.PersonInformationService.AddAsync(PersonInformationCreateDto personInformationDto, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\PersonInformationService.cs:line 39
   at WebApi.Controllers.PersonInformationController.Add(PersonInformationCreateDto dto) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\PersonInformationController.cs:line 77
2024-06-12 15:15:05.778 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 572.7548ms.
2024-06-12 15:15:05.780 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-06-12 15:15:05.781 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 610.2965ms
2024-06-12 15:15:05.786 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 15:15:05.787 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 500 null text/plain; charset=utf-8 635.7814ms
2024-06-12 15:15:39.305 +03:00 [INF] Application is shutting down...
2024-06-12 15:15:42.159 +03:00 [INF] Starting application
2024-06-12 15:15:42.252 +03:00 [INF] Configuring application
2024-06-12 15:15:42.362 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 15:15:42.409 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 15:15:42.412 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 15:15:42.413 +03:00 [INF] Hosting environment: Development
2024-06-12 15:15:42.413 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 15:15:42.903 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 15:15:43.014 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 112.0553ms
2024-06-12 15:15:43.106 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 15:15:43.175 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.235ms
2024-06-12 15:15:53.104 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 77
2024-06-12 15:15:53.113 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 15:15:53.176 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 15:15:53.195 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 15:15:53.537 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 15:15:53.542 +03:00 [INF] Executing Login method for userName: LnLnLnLn
2024-06-12 15:15:53.545 +03:00 [INF] User login attempt with username: LnLnLnLn
2024-06-12 15:15:53.550 +03:00 [INF] Fetching user by username: LnLnLnLn
2024-06-12 15:15:55.526 +03:00 [INF] Executed DbCommand (109ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 15:15:55.651 +03:00 [INF] Generating JWT token for username: LnLnLnLn
2024-06-12 15:15:55.667 +03:00 [INF] User successfully logged in with username: LnLnLnLn
2024-06-12 15:15:55.668 +03:00 [INF] User logged in successfully with userName: LnLnLnLn
2024-06-12 15:15:55.674 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2129.9148ms.
2024-06-12 15:15:55.689 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 15:15:55.701 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 2492.6243ms
2024-06-12 15:15:55.704 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 15:15:55.720 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 2615.7509ms
2024-06-12 15:16:02.331 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 352
2024-06-12 15:16:02.340 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 15:16:02.345 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 15:16:02.368 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 15:16:02.370 +03:00 [INF] Executing Add method
2024-06-12 15:16:02.816 +03:00 [ERR] Failed executing DbCommand (68ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (Size = 20), @p12='?' (DbType = Int32), @p13='?' (DbType = Guid), @p14='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Id], [Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO [PlaceOfResidences] ([Id], [ApartmentNumber], [City], [HouseNumber], [PersonInformationId], [Street])
VALUES (@p9, @p10, @p11, @p12, @p13, @p14);
2024-06-12 15:16:02.918 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAccess.MainDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PersonInformations_ProfilePhotos_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.ProfilePhotos", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PlaceOfResidences_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:67da4b69-d915-4531-80e8-fb6551e2f330
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PersonInformations_ProfilePhotos_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.ProfilePhotos", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PlaceOfResidences_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:67da4b69-d915-4531-80e8-fb6551e2f330
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-06-12 15:16:02.927 +03:00 [ERR] Error occurred while Adding Person Information with id: "00000000-0000-0000-0000-000000000000"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PersonInformations_ProfilePhotos_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.ProfilePhotos", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PlaceOfResidences_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:67da4b69-d915-4531-80e8-fb6551e2f330
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.PersonInformationRepository.AddAsync(PersonInformation entity, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\PersonInformationRepository.cs:line 34
   at App.Services.PersonInformationService.AddAsync(PersonInformationCreateDto personInformationDto, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\PersonInformationService.cs:line 39
   at WebApi.Controllers.PersonInformationController.Add(PersonInformationCreateDto dto) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\PersonInformationController.cs:line 77
2024-06-12 15:16:02.945 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 575.8087ms.
2024-06-12 15:16:02.949 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-06-12 15:16:02.949 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 602.6404ms
2024-06-12 15:16:02.950 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 15:16:02.951 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 500 null text/plain; charset=utf-8 619.3273ms
2024-06-12 15:16:51.960 +03:00 [INF] Application is shutting down...
2024-06-12 15:16:55.280 +03:00 [INF] Starting application
2024-06-12 15:16:55.376 +03:00 [INF] Configuring application
2024-06-12 15:16:55.496 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 15:16:55.550 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 15:16:55.553 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 15:16:55.553 +03:00 [INF] Hosting environment: Development
2024-06-12 15:16:55.554 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 15:16:55.835 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 15:16:55.946 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 112.3356ms
2024-06-12 15:16:56.040 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 15:16:56.110 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.6ms
2024-06-12 15:17:04.443 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 77
2024-06-12 15:17:04.452 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 15:17:04.554 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 15:17:04.585 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 15:17:04.864 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 15:17:04.870 +03:00 [INF] Executing Login method for userName: LnLnLnLn
2024-06-12 15:17:04.873 +03:00 [INF] User login attempt with username: LnLnLnLn
2024-06-12 15:17:04.877 +03:00 [INF] Fetching user by username: LnLnLnLn
2024-06-12 15:17:06.831 +03:00 [INF] Executed DbCommand (98ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 15:17:06.895 +03:00 [INF] Generating JWT token for username: LnLnLnLn
2024-06-12 15:17:06.903 +03:00 [INF] User successfully logged in with username: LnLnLnLn
2024-06-12 15:17:06.904 +03:00 [INF] User logged in successfully with userName: LnLnLnLn
2024-06-12 15:17:06.907 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2036.3027ms.
2024-06-12 15:17:06.915 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 15:17:06.920 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 2325.961ms
2024-06-12 15:17:06.921 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 15:17:06.930 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 2487.417ms
2024-06-12 15:17:16.980 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 352
2024-06-12 15:17:16.991 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 15:17:16.997 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 15:17:17.036 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 15:17:17.039 +03:00 [INF] Executing Add method
2024-06-12 15:17:17.501 +03:00 [ERR] Failed executing DbCommand (78ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (Size = 20), @p12='?' (DbType = Int32), @p13='?' (DbType = Guid), @p14='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Id], [Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO [PlaceOfResidences] ([Id], [ApartmentNumber], [City], [HouseNumber], [PersonInformationId], [Street])
VALUES (@p9, @p10, @p11, @p12, @p13, @p14);
2024-06-12 15:17:17.585 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAccess.MainDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PersonInformations_ProfilePhotos_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.ProfilePhotos", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PlaceOfResidences_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e2dbfab2-90d0-4abf-b0ab-b052fb9a25ce
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PersonInformations_ProfilePhotos_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.ProfilePhotos", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PlaceOfResidences_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e2dbfab2-90d0-4abf-b0ab-b052fb9a25ce
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-06-12 15:17:17.596 +03:00 [ERR] Error occurred while Adding Person Information with id: "00000000-0000-0000-0000-000000000000"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PersonInformations_ProfilePhotos_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.ProfilePhotos", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PlaceOfResidences_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e2dbfab2-90d0-4abf-b0ab-b052fb9a25ce
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.PersonInformationRepository.AddAsync(PersonInformation entity, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\PersonInformationRepository.cs:line 34
   at App.Services.PersonInformationService.AddAsync(PersonInformationCreateDto personInformationDto, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\PersonInformationService.cs:line 39
   at WebApi.Controllers.PersonInformationController.Add(PersonInformationCreateDto dto) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\PersonInformationController.cs:line 77
2024-06-12 15:17:17.609 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 571.8375ms.
2024-06-12 15:17:17.611 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-06-12 15:17:17.612 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 613.2885ms
2024-06-12 15:17:17.614 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 15:17:17.614 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 500 null text/plain; charset=utf-8 633.9816ms
2024-06-12 15:18:34.904 +03:00 [INF] Application is shutting down...
2024-06-12 15:18:38.062 +03:00 [INF] Starting application
2024-06-12 15:18:38.154 +03:00 [INF] Configuring application
2024-06-12 15:18:38.260 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 15:18:38.308 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 15:18:38.310 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 15:18:38.311 +03:00 [INF] Hosting environment: Development
2024-06-12 15:18:38.311 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 15:18:38.610 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 15:18:38.718 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 109.0259ms
2024-06-12 15:18:38.824 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 15:18:38.892 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 67.8715ms
2024-06-12 15:18:52.617 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 77
2024-06-12 15:18:52.626 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 15:18:52.727 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 15:18:52.769 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 15:18:53.117 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 15:18:53.123 +03:00 [INF] Executing Login method for userName: LnLnLnLn
2024-06-12 15:18:53.127 +03:00 [INF] User login attempt with username: LnLnLnLn
2024-06-12 15:18:53.130 +03:00 [INF] Fetching user by username: LnLnLnLn
2024-06-12 15:18:55.133 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 15:18:55.203 +03:00 [INF] Generating JWT token for username: LnLnLnLn
2024-06-12 15:18:55.210 +03:00 [INF] User successfully logged in with username: LnLnLnLn
2024-06-12 15:18:55.211 +03:00 [INF] User logged in successfully with userName: LnLnLnLn
2024-06-12 15:18:55.215 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2090.7283ms.
2024-06-12 15:18:55.229 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 15:18:55.237 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 2459.3172ms
2024-06-12 15:18:55.239 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 15:18:55.257 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 2639.8403ms
2024-06-12 15:19:04.242 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 352
2024-06-12 15:19:04.251 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 15:19:04.256 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 15:19:04.290 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 15:19:04.293 +03:00 [INF] Executing Add method
2024-06-12 15:19:04.745 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (Size = 20), @p12='?' (DbType = Int32), @p13='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Id], [Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO [PlaceOfResidences] ([Id], [ApartmentNumber], [City], [HouseNumber], [Street])
VALUES (@p9, @p10, @p11, @p12, @p13);
2024-06-12 15:19:04.816 +03:00 [INF] Person Information added successfully
2024-06-12 15:19:04.818 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 526.7069ms.
2024-06-12 15:19:04.820 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 15:19:04.827 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 568.5532ms
2024-06-12 15:19:04.827 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 15:19:04.828 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 585.9347ms
2024-06-12 16:15:42.691 +03:00 [INF] Application is shutting down...
2024-06-12 16:15:48.725 +03:00 [INF] Starting application
2024-06-12 16:15:49.719 +03:00 [INF] Configuring application
2024-06-12 16:15:50.904 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 16:15:51.626 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 16:15:51.628 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 16:15:51.629 +03:00 [INF] Hosting environment: Development
2024-06-12 16:15:51.630 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 16:15:51.893 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 16:15:52.025 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 132.7021ms
2024-06-12 16:15:52.130 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 16:15:52.200 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 70.0741ms
2024-06-12 16:16:08.074 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 112
2024-06-12 16:16:08.083 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 16:16:08.165 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 16:16:08.201 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:16:08.644 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 16:16:08.647 +03:00 [INF] Executing Register method for userName: HYHYHYHY
2024-06-12 16:16:08.656 +03:00 [INF] Registering user with username: HYHYHYHY
2024-06-12 16:16:08.659 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:16:10.934 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:16:10.974 +03:00 [WRN] User with username: HYHYHYHY not found
2024-06-12 16:16:10.978 +03:00 [INF] Creating user with username: HYHYHYHY
2024-06-12 16:16:10.981 +03:00 [INF] Creating user with username: HYHYHYHY
2024-06-12 16:16:11.295 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 16:16:11.305 +03:00 [INF] Successfully created user with username: HYHYHYHY
2024-06-12 16:16:11.306 +03:00 [INF] Successfully registered user with username: HYHYHYHY
2024-06-12 16:16:11.306 +03:00 [INF] User registered successfully with userName: HYHYHYHY
2024-06-12 16:16:11.313 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2662.9696ms.
2024-06-12 16:16:11.329 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 16:16:11.348 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 3140.5619ms
2024-06-12 16:16:11.352 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 16:16:11.370 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 3296.6544ms
2024-06-12 16:16:25.329 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 69
2024-06-12 16:16:25.335 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:16:25.338 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:16:25.342 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 16:16:25.343 +03:00 [INF] Executing Login method for userName: HYHYHYHY
2024-06-12 16:16:25.371 +03:00 [INF] User login attempt with username: HYHYHYHY
2024-06-12 16:16:25.372 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:16:25.507 +03:00 [INF] Executed DbCommand (66ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:16:25.520 +03:00 [INF] Generating JWT token for username: HYHYHYHY
2024-06-12 16:16:25.538 +03:00 [INF] User successfully logged in with username: HYHYHYHY
2024-06-12 16:16:25.539 +03:00 [INF] User logged in successfully with userName: HYHYHYHY
2024-06-12 16:16:25.539 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 196.824ms.
2024-06-12 16:16:25.540 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 16:16:25.541 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 202.0859ms
2024-06-12 16:16:25.542 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:16:25.543 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 213.9559ms
2024-06-12 16:16:47.761 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 397
2024-06-12 16:16:47.799 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:16:47.802 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:16:47.815 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:16:47.829 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 26.0914ms
2024-06-12 16:16:47.832 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:16:47.832 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 71.9017ms
2024-06-12 16:16:58.558 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 408
2024-06-12 16:16:58.560 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:16:58.561 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:16:58.566 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:16:58.567 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 5.4238ms
2024-06-12 16:16:58.568 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:16:58.569 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 10.6434ms
2024-06-12 16:17:12.297 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 358
2024-06-12 16:17:12.303 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:17:12.304 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:17:12.308 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:17:12.310 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 4.7525ms
2024-06-12 16:17:12.318 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:17:12.319 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 22.3695ms
2024-06-12 16:17:19.128 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 357
2024-06-12 16:17:19.130 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:17:19.131 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:17:19.136 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:17:19.137 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 4.697ms
2024-06-12 16:17:19.138 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:17:19.139 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 11.4141ms
2024-06-12 16:18:18.312 +03:00 [INF] Application is shutting down...
2024-06-12 16:18:21.576 +03:00 [INF] Starting application
2024-06-12 16:18:21.673 +03:00 [INF] Configuring application
2024-06-12 16:18:21.800 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 16:18:21.851 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 16:18:21.854 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 16:18:21.855 +03:00 [INF] Hosting environment: Development
2024-06-12 16:18:21.855 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 16:18:22.138 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 16:18:22.252 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 114.4794ms
2024-06-12 16:18:22.362 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 16:18:22.431 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 68.9208ms
2024-06-12 16:18:27.541 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 69
2024-06-12 16:18:27.547 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 16:18:27.601 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:18:27.618 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:18:27.788 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 16:18:27.790 +03:00 [INF] Executing Login method for userName: HYHYHYHY
2024-06-12 16:18:27.792 +03:00 [INF] User login attempt with username: HYHYHYHY
2024-06-12 16:18:27.794 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:18:29.072 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:18:29.137 +03:00 [INF] Generating JWT token for username: HYHYHYHY
2024-06-12 16:18:29.145 +03:00 [INF] User successfully logged in with username: HYHYHYHY
2024-06-12 16:18:29.146 +03:00 [INF] User logged in successfully with userName: HYHYHYHY
2024-06-12 16:18:29.149 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1357.7814ms.
2024-06-12 16:18:29.156 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 16:18:29.161 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1539.1471ms
2024-06-12 16:18:29.162 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:18:29.170 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1629.5892ms
2024-06-12 16:18:36.509 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 357
2024-06-12 16:18:36.518 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:18:36.524 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:18:36.546 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:18:36.577 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 50.8886ms
2024-06-12 16:18:36.580 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:18:36.581 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 72.4974ms
2024-06-12 16:19:51.646 +03:00 [INF] Application is shutting down...
2024-06-12 16:19:55.120 +03:00 [INF] Starting application
2024-06-12 16:19:55.214 +03:00 [INF] Configuring application
2024-06-12 16:19:55.326 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 16:19:55.383 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 16:19:55.386 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 16:19:55.387 +03:00 [INF] Hosting environment: Development
2024-06-12 16:19:55.387 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 16:19:55.674 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 16:19:55.784 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 111.055ms
2024-06-12 16:19:55.879 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 16:19:55.950 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 71.401ms
2024-06-12 16:26:01.295 +03:00 [INF] Application is shutting down...
2024-06-12 16:26:04.345 +03:00 [INF] Starting application
2024-06-12 16:26:04.442 +03:00 [INF] Configuring application
2024-06-12 16:26:04.562 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 16:26:04.615 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 16:26:04.617 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 16:26:04.618 +03:00 [INF] Hosting environment: Development
2024-06-12 16:26:04.619 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 16:26:04.935 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 16:26:05.043 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 108.5717ms
2024-06-12 16:26:05.148 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 16:26:05.217 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.2754ms
2024-06-12 16:26:13.325 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 69
2024-06-12 16:26:13.331 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 16:26:13.386 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:26:13.404 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:26:13.584 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 16:26:13.586 +03:00 [INF] Executing Login method for userName: HYHYHYHY
2024-06-12 16:26:13.588 +03:00 [INF] User login attempt with username: HYHYHYHY
2024-06-12 16:26:13.590 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:26:14.910 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:26:14.974 +03:00 [INF] Generating JWT token for username: HYHYHYHY
2024-06-12 16:26:14.982 +03:00 [INF] User successfully logged in with username: HYHYHYHY
2024-06-12 16:26:14.983 +03:00 [INF] User logged in successfully with userName: HYHYHYHY
2024-06-12 16:26:14.986 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1398.7135ms.
2024-06-12 16:26:14.994 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 16:26:14.998 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1590.2992ms
2024-06-12 16:26:14.999 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:26:15.008 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1682.5145ms
2024-06-12 16:27:10.997 +03:00 [INF] Application is shutting down...
2024-06-12 16:27:16.650 +03:00 [INF] Starting application
2024-06-12 16:27:16.748 +03:00 [INF] Configuring application
2024-06-12 16:27:16.872 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 16:27:16.925 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 16:27:16.928 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 16:27:16.929 +03:00 [INF] Hosting environment: Development
2024-06-12 16:27:16.929 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 16:27:17.213 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 16:27:17.327 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 115.2399ms
2024-06-12 16:27:17.434 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 16:27:17.506 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 71.6561ms
2024-06-12 16:27:21.411 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 69
2024-06-12 16:27:21.416 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 16:27:21.469 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:27:21.487 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:27:21.661 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 16:27:21.664 +03:00 [INF] Executing Login method for userName: HYHYHYHY
2024-06-12 16:27:21.666 +03:00 [INF] User login attempt with username: HYHYHYHY
2024-06-12 16:27:21.667 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:27:22.950 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:27:23.017 +03:00 [INF] Generating JWT token for username: HYHYHYHY
2024-06-12 16:27:23.025 +03:00 [INF] User successfully logged in with username: HYHYHYHY
2024-06-12 16:27:23.026 +03:00 [INF] User logged in successfully with userName: HYHYHYHY
2024-06-12 16:27:23.030 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1364.8147ms.
2024-06-12 16:27:23.037 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 16:27:23.042 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1550.566ms
2024-06-12 16:27:23.043 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:27:23.052 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1640.8262ms
2024-06-12 16:27:37.823 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 340
2024-06-12 16:27:37.831 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:27:37.836 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:27:37.855 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 16:27:37.857 +03:00 [INF] Executing Add method
2024-06-12 16:27:38.163 +03:00 [INF] Executed DbCommand (66ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 4000), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (Size = 20), @p12='?' (DbType = Int32), @p13='?' (DbType = Guid), @p14='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Id], [Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO [PlaceOfResidences] ([Id], [ApartmentNumber], [City], [HouseNumber], [PersonInformationId], [Street])
VALUES (@p9, @p10, @p11, @p12, @p13, @p14);
2024-06-12 16:27:38.235 +03:00 [INF] Person Information added successfully
2024-06-12 16:27:38.237 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 381.8445ms.
2024-06-12 16:27:38.239 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 16:27:38.246 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 408.0139ms
2024-06-12 16:27:38.248 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:27:38.249 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 426.0159ms
2024-06-12 16:30:23.476 +03:00 [INF] Application is shutting down...
2024-06-12 16:30:26.856 +03:00 [INF] Starting application
2024-06-12 16:30:26.947 +03:00 [INF] Configuring application
2024-06-12 16:30:27.060 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 16:30:27.108 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 16:30:27.111 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 16:30:27.112 +03:00 [INF] Hosting environment: Development
2024-06-12 16:30:27.112 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 16:30:27.405 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 16:30:27.516 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 111.5284ms
2024-06-12 16:30:27.614 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 16:30:27.685 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 70.9687ms
2024-06-12 16:30:34.192 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 69
2024-06-12 16:30:34.199 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 16:30:34.256 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:30:34.273 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:30:34.451 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 16:30:34.453 +03:00 [INF] Executing Login method for userName: HYHYHYHY
2024-06-12 16:30:34.456 +03:00 [INF] User login attempt with username: HYHYHYHY
2024-06-12 16:30:34.461 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:30:36.214 +03:00 [INF] Executed DbCommand (122ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:30:36.347 +03:00 [INF] Generating JWT token for username: HYHYHYHY
2024-06-12 16:30:36.365 +03:00 [INF] User successfully logged in with username: HYHYHYHY
2024-06-12 16:30:36.367 +03:00 [INF] User logged in successfully with userName: HYHYHYHY
2024-06-12 16:30:36.373 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1916.4996ms.
2024-06-12 16:30:36.394 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 16:30:36.404 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 2121.6307ms
2024-06-12 16:30:36.406 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:30:36.426 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 2234.7145ms
2024-06-12 16:30:48.455 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 366
2024-06-12 16:30:48.464 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:30:48.470 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:30:48.494 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:30:48.513 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 41.5412ms
2024-06-12 16:30:48.515 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:30:48.516 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 60.5637ms
2024-06-12 16:31:20.365 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 364
2024-06-12 16:31:20.378 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:31:20.380 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:31:20.386 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 16:31:20.390 +03:00 [INF] Executing Add method
2024-06-12 16:31:20.842 +03:00 [INF] Executed DbCommand (66ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 4000), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (Size = 20), @p12='?' (DbType = Int32), @p13='?' (DbType = Guid), @p14='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Id], [Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO [PlaceOfResidences] ([Id], [ApartmentNumber], [City], [HouseNumber], [PersonInformationId], [Street])
VALUES (@p9, @p10, @p11, @p12, @p13, @p14);
2024-06-12 16:31:20.905 +03:00 [INF] Person Information added successfully
2024-06-12 16:31:20.906 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 518.2341ms.
2024-06-12 16:31:20.907 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 16:31:20.909 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 527.4438ms
2024-06-12 16:31:20.911 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:31:20.912 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 546.3467ms
2024-06-12 16:33:39.387 +03:00 [INF] Application is shutting down...
2024-06-12 16:33:42.837 +03:00 [INF] Starting application
2024-06-12 16:33:42.930 +03:00 [INF] Configuring application
2024-06-12 16:33:43.051 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 16:33:43.107 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 16:33:43.110 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 16:33:43.110 +03:00 [INF] Hosting environment: Development
2024-06-12 16:33:43.111 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 16:33:43.397 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 16:33:43.506 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 109.4366ms
2024-06-12 16:33:43.606 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 16:33:43.675 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 68.9205ms
2024-06-12 16:33:48.425 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 69
2024-06-12 16:33:48.431 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 16:33:48.486 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:33:48.504 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:33:48.681 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 16:33:48.683 +03:00 [INF] Executing Login method for userName: HYHYHYHY
2024-06-12 16:33:48.685 +03:00 [INF] User login attempt with username: HYHYHYHY
2024-06-12 16:33:48.686 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:33:49.982 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:33:50.048 +03:00 [INF] Generating JWT token for username: HYHYHYHY
2024-06-12 16:33:50.057 +03:00 [INF] User successfully logged in with username: HYHYHYHY
2024-06-12 16:33:50.057 +03:00 [INF] User logged in successfully with userName: HYHYHYHY
2024-06-12 16:33:50.061 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1376.5494ms.
2024-06-12 16:33:50.069 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 16:33:50.073 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1564.9638ms
2024-06-12 16:33:50.074 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:33:50.083 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1657.3432ms
2024-06-12 16:34:17.824 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 384
2024-06-12 16:34:17.833 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:34:17.838 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:34:17.865 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:34:17.899 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 59.9725ms
2024-06-12 16:34:17.902 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:34:17.904 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 80.3566ms
2024-06-12 16:34:27.891 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 382
2024-06-12 16:34:27.900 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:34:27.901 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:34:27.904 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:34:27.905 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 2.9229ms
2024-06-12 16:34:27.906 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:34:27.907 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 15.7336ms
2024-06-12 16:34:37.440 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 389
2024-06-12 16:34:37.444 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:34:37.445 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:34:37.448 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:34:37.449 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 2.7304ms
2024-06-12 16:34:37.449 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:34:37.450 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 10.3095ms
2024-06-12 16:34:45.870 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 392
2024-06-12 16:34:45.879 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:34:45.880 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:34:45.888 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:34:45.890 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 8.5411ms
2024-06-12 16:34:45.891 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:34:45.892 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 21.6257ms
2024-06-12 16:35:07.251 +03:00 [INF] Application is shutting down...
2024-06-12 16:35:10.311 +03:00 [INF] Starting application
2024-06-12 16:35:10.401 +03:00 [INF] Configuring application
2024-06-12 16:35:10.516 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 16:35:10.567 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 16:35:10.569 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 16:35:10.570 +03:00 [INF] Hosting environment: Development
2024-06-12 16:35:10.571 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 16:35:10.841 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 16:35:10.950 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 110.3186ms
2024-06-12 16:35:11.063 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 16:35:11.133 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 70.5557ms
2024-06-12 16:35:16.815 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 69
2024-06-12 16:35:16.821 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 16:35:16.876 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:35:16.893 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:35:17.066 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 16:35:17.068 +03:00 [INF] Executing Login method for userName: HYHYHYHY
2024-06-12 16:35:17.069 +03:00 [INF] User login attempt with username: HYHYHYHY
2024-06-12 16:35:17.071 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:35:18.316 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:35:18.380 +03:00 [INF] Generating JWT token for username: HYHYHYHY
2024-06-12 16:35:18.388 +03:00 [INF] User successfully logged in with username: HYHYHYHY
2024-06-12 16:35:18.389 +03:00 [INF] User logged in successfully with userName: HYHYHYHY
2024-06-12 16:35:18.393 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1323.3656ms.
2024-06-12 16:35:18.400 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 16:35:18.404 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1507.3801ms
2024-06-12 16:35:18.405 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:35:18.414 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1598.5517ms
2024-06-12 16:35:26.222 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 392
2024-06-12 16:35:26.228 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:35:26.231 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:35:26.243 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:35:26.260 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 27.9565ms
2024-06-12 16:35:26.261 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:35:26.262 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 40.2042ms
2024-06-12 16:35:36.210 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 392
2024-06-12 16:35:36.214 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:35:36.214 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:35:36.217 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:35:36.218 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 2.5793ms
2024-06-12 16:35:36.218 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:35:36.219 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 9.137ms
2024-06-12 16:36:07.890 +03:00 [INF] Application is shutting down...
2024-06-12 16:36:11.069 +03:00 [INF] Starting application
2024-06-12 16:36:11.164 +03:00 [INF] Configuring application
2024-06-12 16:36:11.281 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 16:36:11.335 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 16:36:11.337 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 16:36:11.338 +03:00 [INF] Hosting environment: Development
2024-06-12 16:36:11.339 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 16:36:11.609 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 16:36:11.721 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 112.1739ms
2024-06-12 16:36:11.824 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 16:36:11.892 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 68.1097ms
2024-06-12 16:36:15.110 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 69
2024-06-12 16:36:15.116 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 16:36:15.169 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:36:15.186 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:36:15.356 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 16:36:15.359 +03:00 [INF] Executing Login method for userName: HYHYHYHY
2024-06-12 16:36:15.360 +03:00 [INF] User login attempt with username: HYHYHYHY
2024-06-12 16:36:15.362 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:36:16.592 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:36:16.658 +03:00 [INF] Generating JWT token for username: HYHYHYHY
2024-06-12 16:36:16.666 +03:00 [INF] User successfully logged in with username: HYHYHYHY
2024-06-12 16:36:16.666 +03:00 [INF] User logged in successfully with userName: HYHYHYHY
2024-06-12 16:36:16.671 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1310.3066ms.
2024-06-12 16:36:16.678 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 16:36:16.682 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1492.2445ms
2024-06-12 16:36:16.684 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:36:16.692 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1582.2254ms
2024-06-12 16:36:23.460 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 392
2024-06-12 16:36:23.470 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:36:23.476 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:36:23.502 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:36:23.534 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 55.6958ms
2024-06-12 16:36:23.537 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:36:23.538 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 77.9791ms
2024-06-12 16:36:46.954 +03:00 [INF] Application is shutting down...
2024-06-12 16:36:50.017 +03:00 [INF] Starting application
2024-06-12 16:36:50.108 +03:00 [INF] Configuring application
2024-06-12 16:36:50.233 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 16:36:50.293 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 16:36:50.296 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 16:36:50.296 +03:00 [INF] Hosting environment: Development
2024-06-12 16:36:50.297 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 16:36:50.571 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 16:36:50.678 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 107.7207ms
2024-06-12 16:36:50.787 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 16:36:50.856 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.096ms
2024-06-12 16:36:56.074 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 69
2024-06-12 16:36:56.080 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 16:36:56.132 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:36:56.150 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:36:56.320 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 16:36:56.322 +03:00 [INF] Executing Login method for userName: HYHYHYHY
2024-06-12 16:36:56.324 +03:00 [INF] User login attempt with username: HYHYHYHY
2024-06-12 16:36:56.326 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:36:57.607 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:36:57.673 +03:00 [INF] Generating JWT token for username: HYHYHYHY
2024-06-12 16:36:57.681 +03:00 [INF] User successfully logged in with username: HYHYHYHY
2024-06-12 16:36:57.681 +03:00 [INF] User logged in successfully with userName: HYHYHYHY
2024-06-12 16:36:57.686 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1361.824ms.
2024-06-12 16:36:57.693 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 16:36:57.697 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1543.4821ms
2024-06-12 16:36:57.699 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:36:57.708 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1633.947ms
2024-06-12 16:37:07.993 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 392
2024-06-12 16:37:08.003 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:37:08.009 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:37:08.034 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:37:08.067 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 56.4337ms
2024-06-12 16:37:08.069 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:37:08.070 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 77.1498ms
2024-06-12 16:37:36.081 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 394
2024-06-12 16:37:36.085 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:37:36.086 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:37:36.089 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:37:36.089 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 2.5551ms
2024-06-12 16:37:36.090 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:37:36.091 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 9.6903ms
2024-06-12 16:37:51.122 +03:00 [INF] Application is shutting down...
2024-06-12 16:37:54.234 +03:00 [INF] Starting application
2024-06-12 16:37:54.326 +03:00 [INF] Configuring application
2024-06-12 16:37:54.442 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 16:37:54.495 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 16:37:54.497 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 16:37:54.498 +03:00 [INF] Hosting environment: Development
2024-06-12 16:37:54.499 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 16:37:54.739 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 16:37:54.848 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 109.4989ms
2024-06-12 16:37:54.939 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 16:37:55.008 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 68.745ms
2024-06-12 16:37:59.655 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 69
2024-06-12 16:37:59.661 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 16:37:59.717 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:37:59.734 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:37:59.908 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 16:37:59.911 +03:00 [INF] Executing Login method for userName: HYHYHYHY
2024-06-12 16:37:59.913 +03:00 [INF] User login attempt with username: HYHYHYHY
2024-06-12 16:37:59.914 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:38:01.180 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:38:01.247 +03:00 [INF] Generating JWT token for username: HYHYHYHY
2024-06-12 16:38:01.254 +03:00 [INF] User successfully logged in with username: HYHYHYHY
2024-06-12 16:38:01.255 +03:00 [INF] User logged in successfully with userName: HYHYHYHY
2024-06-12 16:38:01.258 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1346.3316ms.
2024-06-12 16:38:01.265 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 16:38:01.269 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1530.7263ms
2024-06-12 16:38:01.270 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:38:01.281 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1625.7157ms
2024-06-12 16:38:07.999 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 394
2024-06-12 16:38:08.004 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:38:08.008 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:38:08.021 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:38:08.037 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 28.8006ms
2024-06-12 16:38:08.039 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:38:08.040 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 41.0467ms
2024-06-12 16:39:22.048 +03:00 [INF] Application is shutting down...
2024-06-12 16:39:25.298 +03:00 [INF] Starting application
2024-06-12 16:39:25.389 +03:00 [INF] Configuring application
2024-06-12 16:39:25.500 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 16:39:25.549 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 16:39:25.551 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 16:39:25.552 +03:00 [INF] Hosting environment: Development
2024-06-12 16:39:25.553 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 16:39:25.872 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 16:39:25.982 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 111.1129ms
2024-06-12 16:39:26.079 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 16:39:26.149 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.8195ms
2024-06-12 16:39:31.084 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 69
2024-06-12 16:39:31.090 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 16:39:31.145 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:39:31.163 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:39:31.344 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 16:39:31.347 +03:00 [INF] Executing Login method for userName: HYHYHYHY
2024-06-12 16:39:31.349 +03:00 [INF] User login attempt with username: HYHYHYHY
2024-06-12 16:39:31.350 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:39:32.620 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:39:32.640 +03:00 [WRN] User with username: HYHYHYHY not found
2024-06-12 16:39:32.641 +03:00 [WRN] Invalid username: HYHYHYHY
2024-06-12 16:39:32.643 +03:00 [ERR] Error occurred during login attempt with username: HYHYHYHY
System.Security.Authentication.AuthenticationException: Invalid username or password!
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 95
2024-06-12 16:39:32.729 +03:00 [ERR] Error occurred while logging in user with userName: HYHYHYHY
System.Security.Authentication.AuthenticationException: Invalid username or password!
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 95
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 110
   at WebApi.Controllers.UserController.Login(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\UserController.cs:line 92
2024-06-12 16:39:32.735 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 1386.1099ms.
2024-06-12 16:39:32.742 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 16:39:32.747 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1579.4148ms
2024-06-12 16:39:32.748 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:39:32.757 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 409 null text/plain; charset=utf-8 1673.3991ms
2024-06-12 16:39:39.645 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 112
2024-06-12 16:39:39.650 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 16:39:39.654 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:39:39.661 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 16:39:39.662 +03:00 [INF] Executing Register method for userName: HYHYHYHY
2024-06-12 16:39:39.664 +03:00 [INF] Registering user with username: HYHYHYHY
2024-06-12 16:39:39.664 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:39:39.767 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:39:39.769 +03:00 [WRN] User with username: HYHYHYHY not found
2024-06-12 16:39:39.770 +03:00 [INF] Creating user with username: HYHYHYHY
2024-06-12 16:39:39.773 +03:00 [INF] Creating user with username: HYHYHYHY
2024-06-12 16:39:39.958 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 16:39:39.966 +03:00 [INF] Successfully created user with username: HYHYHYHY
2024-06-12 16:39:39.967 +03:00 [INF] Successfully registered user with username: HYHYHYHY
2024-06-12 16:39:39.967 +03:00 [INF] User registered successfully with userName: HYHYHYHY
2024-06-12 16:39:39.968 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 306.2708ms.
2024-06-12 16:39:39.969 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 16:39:39.974 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 318.3711ms
2024-06-12 16:39:39.975 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 16:39:39.976 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 330.3655ms
2024-06-12 16:39:41.803 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 69
2024-06-12 16:39:41.806 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:39:41.807 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:39:41.811 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 16:39:41.812 +03:00 [INF] Executing Login method for userName: HYHYHYHY
2024-06-12 16:39:41.813 +03:00 [INF] User login attempt with username: HYHYHYHY
2024-06-12 16:39:41.813 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:39:41.886 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:39:41.896 +03:00 [INF] Generating JWT token for username: HYHYHYHY
2024-06-12 16:39:41.904 +03:00 [INF] User successfully logged in with username: HYHYHYHY
2024-06-12 16:39:41.905 +03:00 [INF] User logged in successfully with userName: HYHYHYHY
2024-06-12 16:39:41.905 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 93.3016ms.
2024-06-12 16:39:41.906 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 16:39:41.907 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 99.175ms
2024-06-12 16:39:41.908 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:39:41.908 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 105.5348ms
2024-06-12 16:39:50.022 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 394
2024-06-12 16:39:50.026 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:39:50.029 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:39:50.042 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:39:50.056 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 26.4771ms
2024-06-12 16:39:50.057 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:39:50.058 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 35.8582ms
2024-06-12 16:40:18.258 +03:00 [INF] Application is shutting down...
2024-06-12 16:40:21.368 +03:00 [INF] Starting application
2024-06-12 16:40:21.462 +03:00 [INF] Configuring application
2024-06-12 16:40:21.593 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 16:40:21.645 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 16:40:21.648 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 16:40:21.649 +03:00 [INF] Hosting environment: Development
2024-06-12 16:40:21.649 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 16:40:21.878 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 16:40:21.990 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 113.3921ms
2024-06-12 16:40:22.091 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 16:40:22.164 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 72.9556ms
2024-06-12 16:40:27.351 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 69
2024-06-12 16:40:27.357 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 16:40:27.410 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:40:27.427 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:40:27.602 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 16:40:27.604 +03:00 [INF] Executing Login method for userName: HYHYHYHY
2024-06-12 16:40:27.606 +03:00 [INF] User login attempt with username: HYHYHYHY
2024-06-12 16:40:27.607 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:40:28.900 +03:00 [INF] Executed DbCommand (96ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:40:28.967 +03:00 [INF] Generating JWT token for username: HYHYHYHY
2024-06-12 16:40:28.974 +03:00 [INF] User successfully logged in with username: HYHYHYHY
2024-06-12 16:40:28.975 +03:00 [INF] User logged in successfully with userName: HYHYHYHY
2024-06-12 16:40:28.979 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1373.0197ms.
2024-06-12 16:40:28.986 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 16:40:28.990 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1558.6239ms
2024-06-12 16:40:28.991 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:40:28.999 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1648.0962ms
2024-06-12 16:40:37.193 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 394
2024-06-12 16:40:37.205 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:40:37.211 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:40:37.243 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:40:37.281 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 68.5081ms
2024-06-12 16:40:37.285 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:40:37.287 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 94.133ms
2024-06-12 16:41:15.209 +03:00 [INF] Application is shutting down...
2024-06-12 16:41:18.288 +03:00 [INF] Starting application
2024-06-12 16:41:18.377 +03:00 [INF] Configuring application
2024-06-12 16:41:18.485 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 16:41:18.531 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 16:41:18.534 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 16:41:18.535 +03:00 [INF] Hosting environment: Development
2024-06-12 16:41:18.535 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 16:41:18.849 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 16:41:18.958 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 109.9234ms
2024-06-12 16:41:19.056 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 16:41:19.126 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.4312ms
2024-06-12 16:41:26.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 69
2024-06-12 16:41:26.158 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 16:41:26.216 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:41:26.237 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:41:26.473 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 16:41:26.476 +03:00 [INF] Executing Login method for userName: HYHYHYHY
2024-06-12 16:41:26.477 +03:00 [INF] User login attempt with username: HYHYHYHY
2024-06-12 16:41:26.478 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:41:28.321 +03:00 [INF] Executed DbCommand (108ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:41:28.467 +03:00 [INF] Generating JWT token for username: HYHYHYHY
2024-06-12 16:41:28.483 +03:00 [INF] User successfully logged in with username: HYHYHYHY
2024-06-12 16:41:28.484 +03:00 [INF] User logged in successfully with userName: HYHYHYHY
2024-06-12 16:41:28.492 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2012.6542ms.
2024-06-12 16:41:28.509 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 16:41:28.518 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 2273.3293ms
2024-06-12 16:41:28.520 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:41:28.537 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 2385.0533ms
2024-06-12 16:41:35.172 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 394
2024-06-12 16:41:35.181 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:41:35.187 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:41:35.200 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:41:35.217 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 29.0767ms
2024-06-12 16:41:35.223 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:41:35.223 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 51.1391ms
2024-06-12 16:42:58.888 +03:00 [INF] Application is shutting down...
2024-06-12 16:43:02.303 +03:00 [INF] Starting application
2024-06-12 16:43:02.396 +03:00 [INF] Configuring application
2024-06-12 16:43:02.519 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 16:43:02.573 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 16:43:02.576 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 16:43:02.577 +03:00 [INF] Hosting environment: Development
2024-06-12 16:43:02.577 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 16:43:02.848 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 16:43:02.958 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 110.8456ms
2024-06-12 16:43:03.062 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 16:43:03.131 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.1191ms
2024-06-12 16:43:06.905 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 69
2024-06-12 16:43:06.911 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 16:43:06.966 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:43:06.984 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:43:07.152 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 16:43:07.155 +03:00 [INF] Executing Login method for userName: HYHYHYHY
2024-06-12 16:43:07.156 +03:00 [INF] User login attempt with username: HYHYHYHY
2024-06-12 16:43:07.159 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:43:08.400 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:43:08.464 +03:00 [INF] Generating JWT token for username: HYHYHYHY
2024-06-12 16:43:08.472 +03:00 [INF] User successfully logged in with username: HYHYHYHY
2024-06-12 16:43:08.473 +03:00 [INF] User logged in successfully with userName: HYHYHYHY
2024-06-12 16:43:08.477 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1320.7199ms.
2024-06-12 16:43:08.484 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 16:43:08.489 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1500.8069ms
2024-06-12 16:43:08.490 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:43:08.499 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1593.2ms
2024-06-12 16:43:16.624 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 394
2024-06-12 16:43:16.633 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:43:16.645 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:43:16.678 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:43:16.711 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 64.1303ms
2024-06-12 16:43:16.713 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:43:16.714 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 89.6679ms
2024-06-12 16:44:38.985 +03:00 [INF] Application is shutting down...
2024-06-12 16:44:42.203 +03:00 [INF] Starting application
2024-06-12 16:44:42.293 +03:00 [INF] Configuring application
2024-06-12 16:44:42.405 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 16:44:42.456 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 16:44:42.460 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 16:44:42.461 +03:00 [INF] Hosting environment: Development
2024-06-12 16:44:42.461 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 16:44:42.729 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 16:44:42.837 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 108.9141ms
2024-06-12 16:44:42.954 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 16:44:43.021 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 67.5219ms
2024-06-12 16:44:51.264 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 69
2024-06-12 16:44:51.271 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 16:44:51.370 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:44:51.402 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:44:51.741 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 16:44:51.745 +03:00 [INF] Executing Login method for userName: HYHYHYHY
2024-06-12 16:44:51.748 +03:00 [INF] User login attempt with username: HYHYHYHY
2024-06-12 16:44:51.752 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:44:53.751 +03:00 [INF] Executed DbCommand (105ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:44:53.882 +03:00 [INF] Generating JWT token for username: HYHYHYHY
2024-06-12 16:44:53.899 +03:00 [INF] User successfully logged in with username: HYHYHYHY
2024-06-12 16:44:53.901 +03:00 [INF] User logged in successfully with userName: HYHYHYHY
2024-06-12 16:44:53.912 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2160.2059ms.
2024-06-12 16:44:53.926 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 16:44:53.937 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 2528.2042ms
2024-06-12 16:44:53.939 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:44:53.956 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 2691.9875ms
2024-06-12 16:45:00.793 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 394
2024-06-12 16:45:00.802 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:45:00.810 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:45:00.840 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:45:00.879 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 60.335ms
2024-06-12 16:45:00.881 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:45:00.885 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 91.9659ms
2024-06-12 16:46:04.937 +03:00 [INF] Application is shutting down...
2024-06-12 16:46:08.122 +03:00 [INF] Starting application
2024-06-12 16:46:08.213 +03:00 [INF] Configuring application
2024-06-12 16:46:08.330 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 16:46:08.382 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 16:46:08.385 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 16:46:08.385 +03:00 [INF] Hosting environment: Development
2024-06-12 16:46:08.386 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 16:46:08.687 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 16:46:08.798 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 111.6691ms
2024-06-12 16:46:08.899 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 16:46:08.968 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 68.7488ms
2024-06-12 16:46:11.459 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 69
2024-06-12 16:46:11.465 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 16:46:11.518 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:46:11.536 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:46:11.712 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 16:46:11.714 +03:00 [INF] Executing Login method for userName: HYHYHYHY
2024-06-12 16:46:11.715 +03:00 [INF] User login attempt with username: HYHYHYHY
2024-06-12 16:46:11.717 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:46:12.990 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:46:13.011 +03:00 [WRN] User with username: HYHYHYHY not found
2024-06-12 16:46:13.012 +03:00 [WRN] Invalid username: HYHYHYHY
2024-06-12 16:46:13.013 +03:00 [ERR] Error occurred during login attempt with username: HYHYHYHY
System.Security.Authentication.AuthenticationException: Invalid username or password!
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 95
2024-06-12 16:46:13.021 +03:00 [ERR] Error occurred while logging in user with userName: HYHYHYHY
System.Security.Authentication.AuthenticationException: Invalid username or password!
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 95
   at App.Services.UserService.LoginAsync(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 110
   at WebApi.Controllers.UserController.Login(UserLoginDto userLoginDto) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\UserController.cs:line 92
2024-06-12 16:46:13.027 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 1311.3767ms.
2024-06-12 16:46:13.034 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 16:46:13.038 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1498.18ms
2024-06-12 16:46:13.039 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:46:13.047 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 409 null text/plain; charset=utf-8 1588.8657ms
2024-06-12 16:46:16.886 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 112
2024-06-12 16:46:16.890 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 16:46:16.894 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:46:16.903 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 16:46:16.905 +03:00 [INF] Executing Register method for userName: HYHYHYHY
2024-06-12 16:46:16.906 +03:00 [INF] Registering user with username: HYHYHYHY
2024-06-12 16:46:16.908 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:46:17.035 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:46:17.037 +03:00 [WRN] User with username: HYHYHYHY not found
2024-06-12 16:46:17.038 +03:00 [INF] Creating user with username: HYHYHYHY
2024-06-12 16:46:17.040 +03:00 [INF] Creating user with username: HYHYHYHY
2024-06-12 16:46:17.335 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 16:46:17.355 +03:00 [INF] Successfully created user with username: HYHYHYHY
2024-06-12 16:46:17.356 +03:00 [INF] Successfully registered user with username: HYHYHYHY
2024-06-12 16:46:17.357 +03:00 [INF] User registered successfully with userName: HYHYHYHY
2024-06-12 16:46:17.358 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 453.6565ms.
2024-06-12 16:46:17.362 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 16:46:17.371 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 471.5331ms
2024-06-12 16:46:17.374 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 16:46:17.378 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 492.6037ms
2024-06-12 16:46:19.040 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 69
2024-06-12 16:46:19.045 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:46:19.046 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:46:19.052 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 16:46:19.053 +03:00 [INF] Executing Login method for userName: HYHYHYHY
2024-06-12 16:46:19.054 +03:00 [INF] User login attempt with username: HYHYHYHY
2024-06-12 16:46:19.054 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:46:19.120 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:46:19.138 +03:00 [INF] Generating JWT token for username: HYHYHYHY
2024-06-12 16:46:19.156 +03:00 [INF] User successfully logged in with username: HYHYHYHY
2024-06-12 16:46:19.157 +03:00 [INF] User logged in successfully with userName: HYHYHYHY
2024-06-12 16:46:19.158 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 104.8576ms.
2024-06-12 16:46:19.161 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 16:46:19.163 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 115.3962ms
2024-06-12 16:46:19.164 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:46:19.164 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 124.2728ms
2024-06-12 16:48:11.960 +03:00 [INF] Application is shutting down...
2024-06-12 16:48:15.130 +03:00 [INF] Starting application
2024-06-12 16:48:15.225 +03:00 [INF] Configuring application
2024-06-12 16:48:15.336 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 16:48:15.389 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 16:48:15.392 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 16:48:15.392 +03:00 [INF] Hosting environment: Development
2024-06-12 16:48:15.393 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 16:48:15.695 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 16:48:15.807 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 113.4666ms
2024-06-12 16:48:15.908 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 16:48:15.976 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 68.5342ms
2024-06-12 16:48:22.466 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 69
2024-06-12 16:48:22.472 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 16:48:22.525 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:48:22.542 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:48:22.719 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 16:48:22.722 +03:00 [INF] Executing Login method for userName: HYHYHYHY
2024-06-12 16:48:22.723 +03:00 [INF] User login attempt with username: HYHYHYHY
2024-06-12 16:48:22.725 +03:00 [INF] Fetching user by username: HYHYHYHY
2024-06-12 16:48:24.345 +03:00 [INF] Executed DbCommand (94ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:48:24.466 +03:00 [INF] Generating JWT token for username: HYHYHYHY
2024-06-12 16:48:24.487 +03:00 [INF] User successfully logged in with username: HYHYHYHY
2024-06-12 16:48:24.488 +03:00 [INF] User logged in successfully with userName: HYHYHYHY
2024-06-12 16:48:24.494 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1769.4718ms.
2024-06-12 16:48:24.510 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 16:48:24.517 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1969.3346ms
2024-06-12 16:48:24.520 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:48:24.537 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 2070.4949ms
2024-06-12 16:48:44.343 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 352
2024-06-12 16:48:44.349 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:48:44.353 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:48:44.366 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:48:44.382 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 26.6819ms
2024-06-12 16:48:44.384 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:48:44.385 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 41.9079ms
2024-06-12 16:48:58.989 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 360
2024-06-12 16:48:58.999 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:48:59.001 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:48:59.012 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:48:59.014 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 11.6226ms
2024-06-12 16:48:59.019 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:48:59.020 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 31.2882ms
2024-06-12 16:55:50.430 +03:00 [INF] Application is shutting down...
2024-06-12 16:55:53.745 +03:00 [INF] Starting application
2024-06-12 16:55:53.839 +03:00 [INF] Configuring application
2024-06-12 16:55:53.946 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 16:55:53.996 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 16:55:53.998 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 16:55:53.999 +03:00 [INF] Hosting environment: Development
2024-06-12 16:55:54.000 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 16:55:54.331 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 16:55:54.448 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 117.3991ms
2024-06-12 16:55:54.558 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 16:55:54.627 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.4043ms
2024-06-12 16:56:08.656 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 122
2024-06-12 16:56:08.665 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 16:56:08.693 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 16:56:08.710 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:56:09.020 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 16:56:09.023 +03:00 [INF] Executing Register method for userName: tGmUXsFRkZBwmt9x0O4G
2024-06-12 16:56:09.024 +03:00 [INF] Registering user with username: tGmUXsFRkZBwmt9x0O4G
2024-06-12 16:56:09.025 +03:00 [INF] Fetching user by username: tGmUXsFRkZBwmt9x0O4G
2024-06-12 16:56:10.822 +03:00 [INF] Executed DbCommand (105ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:56:10.864 +03:00 [WRN] User with username: tGmUXsFRkZBwmt9x0O4G not found
2024-06-12 16:56:10.866 +03:00 [INF] Creating user with username: tGmUXsFRkZBwmt9x0O4G
2024-06-12 16:56:10.872 +03:00 [INF] Creating user with username: tGmUXsFRkZBwmt9x0O4G
2024-06-12 16:56:11.180 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 16:56:11.189 +03:00 [INF] Successfully created user with username: tGmUXsFRkZBwmt9x0O4G
2024-06-12 16:56:11.190 +03:00 [INF] Successfully registered user with username: tGmUXsFRkZBwmt9x0O4G
2024-06-12 16:56:11.191 +03:00 [INF] User registered successfully with userName: tGmUXsFRkZBwmt9x0O4G
2024-06-12 16:56:11.194 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2170.3535ms.
2024-06-12 16:56:11.202 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 16:56:11.216 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 2500.0052ms
2024-06-12 16:56:11.218 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 16:56:11.241 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 2585.4744ms
2024-06-12 16:56:31.985 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 80
2024-06-12 16:56:31.991 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:56:31.996 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:56:32.003 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 16:56:32.005 +03:00 [INF] Executing Login method for userName: tGmUXsFRkZBwmt9x0O4G
2024-06-12 16:56:32.008 +03:00 [INF] User login attempt with username: tGmUXsFRkZBwmt9x0O4G
2024-06-12 16:56:32.010 +03:00 [INF] Fetching user by username: tGmUXsFRkZBwmt9x0O4G
2024-06-12 16:56:32.107 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:56:32.117 +03:00 [INF] Generating JWT token for username: tGmUXsFRkZBwmt9x0O4G
2024-06-12 16:56:32.154 +03:00 [INF] User successfully logged in with username: tGmUXsFRkZBwmt9x0O4G
2024-06-12 16:56:32.155 +03:00 [INF] User logged in successfully with userName: tGmUXsFRkZBwmt9x0O4G
2024-06-12 16:56:32.157 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 152.625ms.
2024-06-12 16:56:32.158 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 16:56:32.159 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 161.3671ms
2024-06-12 16:56:32.160 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:56:32.161 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 176.8704ms
2024-06-12 16:56:49.263 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 401
2024-06-12 16:56:49.317 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:56:49.322 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:56:49.351 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:56:49.380 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 56.6753ms
2024-06-12 16:56:49.382 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:56:49.384 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 120.8141ms
2024-06-12 16:57:01.942 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 323
2024-06-12 16:57:01.945 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:57:01.945 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:57:01.947 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:57:01.948 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 1.719ms
2024-06-12 16:57:01.948 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:57:01.949 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 6.5973ms
2024-06-12 16:57:12.469 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 309
2024-06-12 16:57:12.471 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:57:12.471 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:57:12.474 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:57:12.475 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 3.0311ms
2024-06-12 16:57:12.486 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:57:12.487 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 18.1856ms
2024-06-12 16:57:23.619 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 309
2024-06-12 16:57:23.622 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:57:23.622 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:57:23.624 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:57:23.625 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 1.463ms
2024-06-12 16:57:23.626 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:57:23.626 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 7.3108ms
2024-06-12 16:57:39.746 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 319
2024-06-12 16:57:39.754 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:57:39.755 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:57:39.771 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:57:39.773 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 14.0321ms
2024-06-12 16:57:39.775 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:57:39.776 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 29.2874ms
2024-06-12 16:58:54.844 +03:00 [INF] Application is shutting down...
2024-06-12 16:58:58.237 +03:00 [INF] Starting application
2024-06-12 16:58:58.332 +03:00 [INF] Configuring application
2024-06-12 16:58:58.445 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 16:58:58.502 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 16:58:58.505 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 16:58:58.506 +03:00 [INF] Hosting environment: Development
2024-06-12 16:58:58.506 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 16:58:58.788 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 16:58:58.899 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 112.3298ms
2024-06-12 16:58:59.003 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 16:58:59.074 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 70.8641ms
2024-06-12 16:59:09.746 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 80
2024-06-12 16:59:09.752 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 16:59:09.803 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:59:09.821 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 16:59:09.994 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 16:59:09.996 +03:00 [INF] Executing Login method for userName: tGmUXsFRkZBwmt9x0O4G
2024-06-12 16:59:09.998 +03:00 [INF] User login attempt with username: tGmUXsFRkZBwmt9x0O4G
2024-06-12 16:59:09.999 +03:00 [INF] Fetching user by username: tGmUXsFRkZBwmt9x0O4G
2024-06-12 16:59:11.252 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 16:59:11.334 +03:00 [INF] Generating JWT token for username: tGmUXsFRkZBwmt9x0O4G
2024-06-12 16:59:11.350 +03:00 [INF] User successfully logged in with username: tGmUXsFRkZBwmt9x0O4G
2024-06-12 16:59:11.354 +03:00 [INF] User logged in successfully with userName: tGmUXsFRkZBwmt9x0O4G
2024-06-12 16:59:11.361 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1360.6499ms.
2024-06-12 16:59:11.379 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 16:59:11.392 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1563.6229ms
2024-06-12 16:59:11.395 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 16:59:11.414 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1667.3019ms
2024-06-12 16:59:17.984 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 319
2024-06-12 16:59:17.994 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:59:18.002 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 16:59:18.019 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 16:59:18.057 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 53.9094ms
2024-06-12 16:59:18.059 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 16:59:18.061 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 77.0505ms
2024-06-12 16:59:49.293 +03:00 [INF] Application is shutting down...
2024-06-12 17:00:00.942 +03:00 [INF] Starting application
2024-06-12 17:00:01.036 +03:00 [INF] Configuring application
2024-06-12 17:00:01.160 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 17:00:01.213 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 17:00:01.215 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 17:00:01.216 +03:00 [INF] Hosting environment: Development
2024-06-12 17:00:01.217 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 17:00:01.468 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 17:00:01.579 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 111.5444ms
2024-06-12 17:00:01.685 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 17:00:01.756 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 71.7074ms
2024-06-12 17:00:14.443 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 112
2024-06-12 17:00:14.449 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 17:00:14.467 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 17:00:14.484 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 17:00:14.660 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 17:00:14.662 +03:00 [INF] Executing Register method for userName: yBl9fP7D2k
2024-06-12 17:00:14.663 +03:00 [INF] Registering user with username: yBl9fP7D2k
2024-06-12 17:00:14.665 +03:00 [INF] Fetching user by username: yBl9fP7D2k
2024-06-12 17:00:16.581 +03:00 [INF] Executed DbCommand (96ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 17:00:16.605 +03:00 [WRN] User with username: yBl9fP7D2k not found
2024-06-12 17:00:16.607 +03:00 [INF] Creating user with username: yBl9fP7D2k
2024-06-12 17:00:16.609 +03:00 [INF] Creating user with username: yBl9fP7D2k
2024-06-12 17:00:16.879 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 17:00:16.890 +03:00 [INF] Successfully created user with username: yBl9fP7D2k
2024-06-12 17:00:16.891 +03:00 [INF] Successfully registered user with username: yBl9fP7D2k
2024-06-12 17:00:16.891 +03:00 [INF] User registered successfully with userName: yBl9fP7D2k
2024-06-12 17:00:16.900 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2234.604ms.
2024-06-12 17:00:16.922 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 17:00:16.946 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 2454.1971ms
2024-06-12 17:00:16.949 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 17:00:16.968 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 2524.9622ms
2024-06-12 17:00:25.882 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 70
2024-06-12 17:00:25.889 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 17:00:25.896 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 17:00:25.902 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 17:00:25.905 +03:00 [INF] Executing Login method for userName: yBl9fP7D2k
2024-06-12 17:00:25.907 +03:00 [INF] User login attempt with username: yBl9fP7D2k
2024-06-12 17:00:25.907 +03:00 [INF] Fetching user by username: yBl9fP7D2k
2024-06-12 17:00:26.013 +03:00 [INF] Executed DbCommand (63ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 17:00:26.027 +03:00 [INF] Generating JWT token for username: yBl9fP7D2k
2024-06-12 17:00:26.060 +03:00 [INF] User successfully logged in with username: yBl9fP7D2k
2024-06-12 17:00:26.062 +03:00 [INF] User logged in successfully with userName: yBl9fP7D2k
2024-06-12 17:00:26.063 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 159.5791ms.
2024-06-12 17:00:26.065 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 17:00:26.066 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 168.3943ms
2024-06-12 17:00:26.068 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 17:00:26.069 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 186.6616ms
2024-06-12 17:00:45.418 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 333
2024-06-12 17:00:45.449 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:00:45.454 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 17:00:45.477 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 17:00:45.481 +03:00 [INF] Executing Add method
2024-06-12 17:00:45.746 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (Size = 20), @p12='?' (DbType = Int32), @p13='?' (DbType = Guid), @p14='?' (Size = 60)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Id], [Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO [PlaceOfResidences] ([Id], [ApartmentNumber], [City], [HouseNumber], [PersonInformationId], [Street])
VALUES (@p9, @p10, @p11, @p12, @p13, @p14);
2024-06-12 17:00:45.802 +03:00 [INF] Person Information added successfully
2024-06-12 17:00:45.803 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 323.8505ms.
2024-06-12 17:00:45.804 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 17:00:45.805 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 349.1209ms
2024-06-12 17:00:45.806 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:00:45.806 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 388.4607ms
2024-06-12 17:06:57.474 +03:00 [INF] Application is shutting down...
2024-06-12 17:07:00.651 +03:00 [INF] Starting application
2024-06-12 17:07:00.754 +03:00 [INF] Configuring application
2024-06-12 17:07:00.870 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 17:07:00.925 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 17:07:00.928 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 17:07:00.929 +03:00 [INF] Hosting environment: Development
2024-06-12 17:07:00.929 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 17:07:01.203 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 17:07:01.313 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 110.9914ms
2024-06-12 17:07:01.417 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 17:07:01.489 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 71.9267ms
2024-06-12 17:07:14.213 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 162
2024-06-12 17:07:14.219 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 17:07:14.237 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 17:07:14.255 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 17:07:14.426 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 17:07:14.428 +03:00 [INF] Executing Register method for userName: Qz2kRKgex8aErV9KerWy
2024-06-12 17:07:14.429 +03:00 [INF] Registering user with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:07:14.431 +03:00 [INF] Fetching user by username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:07:15.734 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 17:07:15.756 +03:00 [WRN] User with username: Qz2kRKgex8aErV9KerWy not found
2024-06-12 17:07:15.757 +03:00 [INF] Creating user with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:07:15.760 +03:00 [INF] Creating user with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:07:15.954 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 17:07:15.963 +03:00 [INF] Successfully created user with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:07:15.964 +03:00 [INF] Successfully registered user with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:07:15.964 +03:00 [INF] User registered successfully with userName: Qz2kRKgex8aErV9KerWy
2024-06-12 17:07:15.969 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1538.7648ms.
2024-06-12 17:07:15.977 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 17:07:15.984 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 1725.1617ms
2024-06-12 17:07:15.986 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 17:07:15.995 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 1781.7726ms
2024-06-12 17:07:24.368 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 100
2024-06-12 17:07:24.372 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 17:07:24.377 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 17:07:24.381 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 17:07:24.382 +03:00 [INF] Executing Login method for userName: Qz2kRKgex8aErV9KerWy
2024-06-12 17:07:24.384 +03:00 [INF] User login attempt with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:07:24.384 +03:00 [INF] Fetching user by username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:07:24.484 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 17:07:24.494 +03:00 [INF] Generating JWT token for username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:07:24.509 +03:00 [INF] User successfully logged in with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:07:24.510 +03:00 [INF] User logged in successfully with userName: Qz2kRKgex8aErV9KerWy
2024-06-12 17:07:24.511 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 129.0522ms.
2024-06-12 17:07:24.512 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 17:07:24.513 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 134.8645ms
2024-06-12 17:07:24.513 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 17:07:24.514 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 145.605ms
2024-06-12 17:08:07.502 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 314
2024-06-12 17:08:07.533 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:08:07.536 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 17:08:07.547 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 17:08:07.562 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 25.2229ms
2024-06-12 17:08:07.563 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:08:07.563 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 61.674ms
2024-06-12 17:09:28.225 +03:00 [INF] Application is shutting down...
2024-06-12 17:09:31.096 +03:00 [INF] Starting application
2024-06-12 17:09:31.195 +03:00 [INF] Configuring application
2024-06-12 17:09:31.315 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 17:09:31.369 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 17:09:31.371 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 17:09:31.372 +03:00 [INF] Hosting environment: Development
2024-06-12 17:09:31.373 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 17:09:31.640 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 17:09:31.752 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 112.5207ms
2024-06-12 17:09:31.844 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 17:09:31.915 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 71.063ms
2024-06-12 17:09:40.649 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 100
2024-06-12 17:09:40.658 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 17:09:40.759 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 17:09:40.791 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 17:09:41.131 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 17:09:41.137 +03:00 [INF] Executing Login method for userName: Qz2kRKgex8aErV9KerWy
2024-06-12 17:09:41.140 +03:00 [INF] User login attempt with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:09:41.147 +03:00 [INF] Fetching user by username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:09:43.128 +03:00 [INF] Executed DbCommand (102ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 17:09:43.254 +03:00 [INF] Generating JWT token for username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:09:43.269 +03:00 [INF] User successfully logged in with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:09:43.272 +03:00 [INF] User logged in successfully with userName: Qz2kRKgex8aErV9KerWy
2024-06-12 17:09:43.279 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2139.5037ms.
2024-06-12 17:09:43.295 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 17:09:43.305 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 2504.6818ms
2024-06-12 17:09:43.310 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 17:09:43.325 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 2676.5475ms
2024-06-12 17:09:49.921 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 314
2024-06-12 17:09:49.934 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:09:49.939 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 17:09:49.964 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 17:09:49.999 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 57.7995ms
2024-06-12 17:09:50.001 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:09:50.002 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 80.5334ms
2024-06-12 17:11:25.216 +03:00 [INF] Application is shutting down...
2024-06-12 17:11:28.527 +03:00 [INF] Starting application
2024-06-12 17:11:28.621 +03:00 [INF] Configuring application
2024-06-12 17:11:28.733 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 17:11:28.782 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 17:11:28.785 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 17:11:28.785 +03:00 [INF] Hosting environment: Development
2024-06-12 17:11:28.786 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 17:11:29.076 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 17:11:29.186 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 111.2512ms
2024-06-12 17:11:29.314 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 17:11:29.385 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 71.2102ms
2024-06-12 17:11:32.335 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 162
2024-06-12 17:11:32.340 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 17:11:32.395 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 17:11:32.412 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 17:11:32.586 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 17:11:32.589 +03:00 [INF] Executing Register method for userName: Qz2kRKgex8aErV9KerWy
2024-06-12 17:11:32.590 +03:00 [INF] Registering user with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:11:32.591 +03:00 [INF] Fetching user by username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:11:33.857 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 17:11:33.881 +03:00 [WRN] User with username: Qz2kRKgex8aErV9KerWy not found
2024-06-12 17:11:33.883 +03:00 [INF] Creating user with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:11:33.885 +03:00 [INF] Creating user with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:11:34.072 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 17:11:34.080 +03:00 [INF] Successfully created user with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:11:34.081 +03:00 [INF] Successfully registered user with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:11:34.081 +03:00 [INF] User registered successfully with userName: Qz2kRKgex8aErV9KerWy
2024-06-12 17:11:34.085 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1495.0782ms.
2024-06-12 17:11:34.093 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 17:11:34.101 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 1685.2964ms
2024-06-12 17:11:34.102 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 17:11:34.111 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 1775.9997ms
2024-06-12 17:11:35.600 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 100
2024-06-12 17:11:35.604 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 17:11:35.607 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 17:11:35.612 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 17:11:35.613 +03:00 [INF] Executing Login method for userName: Qz2kRKgex8aErV9KerWy
2024-06-12 17:11:35.615 +03:00 [INF] User login attempt with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:11:35.616 +03:00 [INF] Fetching user by username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:11:35.715 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 17:11:35.725 +03:00 [INF] Generating JWT token for username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:11:35.733 +03:00 [INF] User successfully logged in with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:11:35.734 +03:00 [INF] User logged in successfully with userName: Qz2kRKgex8aErV9KerWy
2024-06-12 17:11:35.734 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 121.527ms.
2024-06-12 17:11:35.735 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 17:11:35.736 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 127.6346ms
2024-06-12 17:11:35.738 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 17:11:35.741 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 140.9704ms
2024-06-12 17:11:43.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 314
2024-06-12 17:11:43.154 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:11:43.157 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 17:11:43.166 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 17:11:43.181 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 22.7179ms
2024-06-12 17:11:43.182 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:11:43.183 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 33.743ms
2024-06-12 17:13:14.272 +03:00 [INF] Application is shutting down...
2024-06-12 17:13:17.108 +03:00 [INF] Starting application
2024-06-12 17:13:17.202 +03:00 [INF] Configuring application
2024-06-12 17:13:17.313 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 17:13:17.368 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 17:13:17.370 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 17:13:17.371 +03:00 [INF] Hosting environment: Development
2024-06-12 17:13:17.372 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 17:13:17.659 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger - null null
2024-06-12 17:13:17.659 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 17:13:17.687 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger - 499 null null 28.6444ms
2024-06-12 17:13:17.769 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 110.5396ms
2024-06-12 17:13:17.845 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/favicon-16x16.png - null null
2024-06-12 17:13:17.854 +03:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2024-06-12 17:13:17.854 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/favicon-16x16.png - 499 665 image/png 8.9981ms
2024-06-12 17:13:17.874 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 17:13:17.945 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 70.2896ms
2024-06-12 17:13:30.366 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 100
2024-06-12 17:13:30.375 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 17:13:30.488 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 17:13:30.520 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 17:13:30.859 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 17:13:30.862 +03:00 [INF] Executing Login method for userName: Qz2kRKgex8aErV9KerWy
2024-06-12 17:13:30.868 +03:00 [INF] User login attempt with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:13:30.872 +03:00 [INF] Fetching user by username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:13:32.925 +03:00 [INF] Executed DbCommand (111ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 17:13:32.989 +03:00 [INF] Generating JWT token for username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:13:32.997 +03:00 [INF] User successfully logged in with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:13:32.998 +03:00 [INF] User logged in successfully with userName: Qz2kRKgex8aErV9KerWy
2024-06-12 17:13:33.002 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2138.3811ms.
2024-06-12 17:13:33.012 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 17:13:33.024 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 2495.428ms
2024-06-12 17:13:33.030 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 17:13:33.044 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 2677.7708ms
2024-06-12 17:13:39.751 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 314
2024-06-12 17:13:39.757 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:13:39.760 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 17:13:39.770 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 17:13:39.788 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 26.3129ms
2024-06-12 17:13:39.789 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:13:39.789 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 37.9973ms
2024-06-12 17:14:03.192 +03:00 [INF] Application is shutting down...
2024-06-12 17:14:06.297 +03:00 [INF] Starting application
2024-06-12 17:14:06.390 +03:00 [INF] Configuring application
2024-06-12 17:14:06.500 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 17:14:06.549 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 17:14:06.551 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 17:14:06.552 +03:00 [INF] Hosting environment: Development
2024-06-12 17:14:06.552 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 17:14:06.830 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 17:14:06.941 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 111.6324ms
2024-06-12 17:14:07.017 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/favicon-16x16.png - null null
2024-06-12 17:14:07.025 +03:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2024-06-12 17:14:07.026 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/favicon-16x16.png - 499 665 image/png 8.4732ms
2024-06-12 17:14:07.051 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 17:14:07.123 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 72.0078ms
2024-06-12 17:14:11.655 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 100
2024-06-12 17:14:11.660 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 17:14:11.714 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 17:14:11.732 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 17:14:11.905 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 17:14:11.907 +03:00 [INF] Executing Login method for userName: Qz2kRKgex8aErV9KerWy
2024-06-12 17:14:11.909 +03:00 [INF] User login attempt with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:14:11.911 +03:00 [INF] Fetching user by username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:14:13.160 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 17:14:13.227 +03:00 [INF] Generating JWT token for username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:14:13.236 +03:00 [INF] User successfully logged in with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:14:13.236 +03:00 [INF] User logged in successfully with userName: Qz2kRKgex8aErV9KerWy
2024-06-12 17:14:13.240 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1331.6244ms.
2024-06-12 17:14:13.246 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 17:14:13.250 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1514.282ms
2024-06-12 17:14:13.251 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 17:14:13.260 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1605.2281ms
2024-06-12 17:14:23.962 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 314
2024-06-12 17:14:23.971 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:14:23.977 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 17:14:23.989 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 17:14:24.006 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 27.1111ms
2024-06-12 17:14:24.007 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:14:24.008 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 45.4275ms
2024-06-12 17:14:44.219 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 316
2024-06-12 17:14:44.225 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:14:44.226 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 17:14:44.239 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 17:14:44.240 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 12.1868ms
2024-06-12 17:14:44.241 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:14:44.241 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 22.1434ms
2024-06-12 17:16:06.728 +03:00 [INF] Application is shutting down...
2024-06-12 17:16:10.225 +03:00 [INF] Starting application
2024-06-12 17:16:10.318 +03:00 [INF] Configuring application
2024-06-12 17:16:10.440 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 17:16:10.495 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 17:16:10.497 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 17:16:10.498 +03:00 [INF] Hosting environment: Development
2024-06-12 17:16:10.499 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 17:16:10.772 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 17:16:10.880 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 108.6604ms
2024-06-12 17:16:10.982 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 17:16:11.051 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 68.87ms
2024-06-12 17:17:54.507 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 100
2024-06-12 17:17:54.517 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 17:17:54.624 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 17:17:54.660 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 17:17:54.961 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 17:17:54.969 +03:00 [INF] Executing Login method for userName: Qz2kRKgex8aErV9KerWy
2024-06-12 17:17:54.972 +03:00 [INF] User login attempt with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:17:54.975 +03:00 [INF] Fetching user by username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:17:56.990 +03:00 [INF] Executed DbCommand (110ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 17:17:57.116 +03:00 [INF] Generating JWT token for username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:17:57.129 +03:00 [INF] User successfully logged in with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:17:57.130 +03:00 [INF] User logged in successfully with userName: Qz2kRKgex8aErV9KerWy
2024-06-12 17:17:57.137 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2165.5076ms.
2024-06-12 17:17:57.150 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 17:17:57.158 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 2488.2276ms
2024-06-12 17:17:57.160 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 17:17:57.170 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 2663.0799ms
2024-06-12 17:18:15.194 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 316
2024-06-12 17:18:15.202 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:18:15.207 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 17:18:15.219 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 17:18:15.221 +03:00 [INF] Executing Add method
2024-06-12 17:18:15.527 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Guid), @p14='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Id], [Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO [PlaceOfResidences] ([Id], [ApartmentNumber], [City], [HouseNumber], [PersonInformationId], [Street])
VALUES (@p9, @p10, @p11, @p12, @p13, @p14);
2024-06-12 17:18:15.610 +03:00 [INF] Person Information added successfully
2024-06-12 17:18:15.614 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 393.6661ms.
2024-06-12 17:18:15.615 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 17:18:15.623 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 413.1707ms
2024-06-12 17:18:15.624 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:18:15.624 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 430.7705ms
2024-06-12 17:27:39.738 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 17:27:39.742 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 17:27:39.747 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 17:27:39.752 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 17:27:39.756 +03:00 [INF] Executing GetAll method
2024-06-12 17:27:40.337 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 17:27:40.351 +03:00 [ERR] Error occurred while executing GetAll method
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
List`1 -> List`1
System.Collections.Generic.List`1[[DataAccess.Entities.PersonInformation, DataAccess, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
 ---> AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
PersonInformation -> PersonInformationDto
DataAccess.Entities.PersonInformation -> App.Dtos.PersonInformationDtos.PersonInformationDto

Type Map configuration:
PersonInformation -> PersonInformationDto
DataAccess.Entities.PersonInformation -> App.Dtos.PersonInformationDtos.PersonInformationDto

Destination Member:
PersonalCode

 ---> System.OverflowException: Value was either too large or too small for an Int32.
   at System.Number.ThrowOverflowException[TInteger]()
   at lambda_method253(Closure, Object, List`1, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method253(Closure, Object, List`1, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method253(Closure, Object, List`1, ResolutionContext)
   at App.Services.PersonInformationService.GetAllAsync(Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\PersonInformationService.cs:line 23
   at WebApi.Controllers.PersonInformationController.GetAll() in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\PersonInformationController.cs:line 31
2024-06-12 17:27:40.365 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 611.4975ms.
2024-06-12 17:27:40.367 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-06-12 17:27:40.368 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 617.9544ms
2024-06-12 17:27:40.369 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 17:27:40.370 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 500 null text/plain; charset=utf-8 632.0969ms
2024-06-12 17:53:45.517 +03:00 [INF] Application is shutting down...
2024-06-12 17:53:50.411 +03:00 [INF] Starting application
2024-06-12 17:53:50.507 +03:00 [INF] Configuring application
2024-06-12 17:53:50.646 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 17:53:50.702 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 17:53:50.705 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 17:53:50.706 +03:00 [INF] Hosting environment: Development
2024-06-12 17:53:50.706 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 17:53:50.957 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 17:53:51.071 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 115.08ms
2024-06-12 17:53:51.195 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 17:53:51.270 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 74.5206ms
2024-06-12 17:53:56.928 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 100
2024-06-12 17:53:56.934 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 17:53:56.990 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 17:53:57.008 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 17:53:57.188 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 17:53:57.190 +03:00 [INF] Executing Login method for userName: Qz2kRKgex8aErV9KerWy
2024-06-12 17:53:57.192 +03:00 [INF] User login attempt with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:53:57.194 +03:00 [INF] Fetching user by username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:53:58.514 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 17:53:58.584 +03:00 [INF] Generating JWT token for username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:53:58.592 +03:00 [INF] User successfully logged in with username: Qz2kRKgex8aErV9KerWy
2024-06-12 17:53:58.593 +03:00 [INF] User logged in successfully with userName: Qz2kRKgex8aErV9KerWy
2024-06-12 17:53:58.597 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1404.8614ms.
2024-06-12 17:53:58.604 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 17:53:58.609 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1597.5738ms
2024-06-12 17:53:58.610 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 17:53:58.620 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1692.241ms
2024-06-12 17:54:10.385 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 17:54:10.394 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 17:54:10.397 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 17:54:10.400 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 17:54:10.402 +03:00 [INF] Executing GetAll method
2024-06-12 17:54:10.605 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 17:54:10.662 +03:00 [INF] GetAll method executed successfully
2024-06-12 17:54:10.665 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 264.2507ms.
2024-06-12 17:54:10.668 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 17:54:10.695 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 296.2648ms
2024-06-12 17:54:10.697 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 17:54:10.698 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 313.491ms
2024-06-12 17:54:38.346 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5236/api/PersonInformation/bdca9eea-4300-4b34-8ce9-d5da422b4b74 - null null
2024-06-12 17:54:38.353 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Delete (WebApi)'
2024-06-12 17:54:38.356 +03:00 [INF] Route matched with {action = "Delete", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Delete(System.Guid) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 17:54:38.359 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Delete (WebApi) - Validation state: "Valid"
2024-06-12 17:54:38.361 +03:00 [INF] Executing Delete method with id: "bdca9eea-4300-4b34-8ce9-d5da422b4b74"
2024-06-12 17:54:38.475 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__id_0='?' (DbType = Guid), @__userId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId], [p0].[Id], [p0].[ApartmentNumber], [p0].[City], [p0].[HouseNumber], [p0].[PersonInformationId], [p0].[Street], [p1].[Id], [p1].[FileName], [p1].[FilePath], [p1].[PersonInformationId], [p1].[UserId]
FROM [PersonInformations] AS [p]
LEFT JOIN [PlaceOfResidences] AS [p0] ON [p].[Id] = [p0].[Id]
LEFT JOIN [ProfilePhotos] AS [p1] ON [p].[Id] = [p1].[Id]
WHERE [p].[Id] = @__id_0 AND [p].[UserId] = @__userId_1
2024-06-12 17:54:38.561 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[@__userId_0='?' (DbType = Guid), @__id_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0 AND [p].[Id] = @__id_1
2024-06-12 17:54:38.865 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [PlaceOfResidences]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [PersonInformations]
OUTPUT 1
WHERE [Id] = @p1;
2024-06-12 17:54:38.944 +03:00 [INF] Person Information deleted successfully with id: "bdca9eea-4300-4b34-8ce9-d5da422b4b74"
2024-06-12 17:54:38.946 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Delete (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 585.751ms.
2024-06-12 17:54:38.948 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 17:54:38.950 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Delete (WebApi) in 592.8298ms
2024-06-12 17:54:38.951 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Delete (WebApi)'
2024-06-12 17:54:38.952 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5236/api/PersonInformation/bdca9eea-4300-4b34-8ce9-d5da422b4b74 - 200 null application/json; charset=utf-8 605.6586ms
2024-06-12 17:54:43.903 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 316
2024-06-12 17:54:43.905 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:54:43.911 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 17:54:43.937 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 17:54:43.967 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 53.7533ms
2024-06-12 17:54:43.969 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:54:43.970 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 67.4429ms
2024-06-12 17:55:18.506 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 317
2024-06-12 17:55:18.507 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:55:18.508 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 17:55:18.510 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 17:55:18.511 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 1.7465ms
2024-06-12 17:55:18.511 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:55:18.512 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 6.1318ms
2024-06-12 17:56:47.103 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 300
2024-06-12 17:56:47.107 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2024-06-12 17:56:47.112 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-06-12 17:56:47.113 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 401 0 null 9.383ms
2024-06-12 17:57:06.239 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 106
2024-06-12 17:57:06.242 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 17:57:06.247 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 17:57:06.254 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 17:57:06.256 +03:00 [INF] Executing Register method for userName: asdasd13
2024-06-12 17:57:06.257 +03:00 [INF] Registering user with username: asdasd13
2024-06-12 17:57:06.258 +03:00 [INF] Fetching user by username: asdasd13
2024-06-12 17:57:06.321 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 17:57:06.323 +03:00 [WRN] User with username: asdasd13 not found
2024-06-12 17:57:06.324 +03:00 [INF] Creating user with username: asdasd13
2024-06-12 17:57:06.326 +03:00 [INF] Creating user with username: asdasd13
2024-06-12 17:57:06.415 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 17:57:06.418 +03:00 [INF] Successfully created user with username: asdasd13
2024-06-12 17:57:06.418 +03:00 [INF] Successfully registered user with username: asdasd13
2024-06-12 17:57:06.419 +03:00 [INF] User registered successfully with userName: asdasd13
2024-06-12 17:57:06.419 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 164.0717ms.
2024-06-12 17:57:06.420 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 17:57:06.421 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 172.5192ms
2024-06-12 17:57:06.422 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 17:57:06.423 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 183.9722ms
2024-06-12 17:57:19.037 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 66
2024-06-12 17:57:19.039 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 17:57:19.039 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 17:57:19.042 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 17:57:19.052 +03:00 [INF] Executing Login method for userName: asdasd13
2024-06-12 17:57:19.054 +03:00 [INF] User login attempt with username: asdasd13
2024-06-12 17:57:19.054 +03:00 [INF] Fetching user by username: asdasd13
2024-06-12 17:57:19.110 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 17:57:19.112 +03:00 [INF] Generating JWT token for username: asdasd13
2024-06-12 17:57:19.112 +03:00 [INF] User successfully logged in with username: asdasd13
2024-06-12 17:57:19.113 +03:00 [INF] User logged in successfully with userName: asdasd13
2024-06-12 17:57:19.113 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 60.715ms.
2024-06-12 17:57:19.114 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 17:57:19.114 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 74.2402ms
2024-06-12 17:57:19.115 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 17:57:19.115 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 78.5391ms
2024-06-12 17:57:27.493 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 300
2024-06-12 17:57:27.496 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:57:27.496 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 17:57:27.498 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 17:57:27.499 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 1.5727ms
2024-06-12 17:57:27.500 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:57:27.501 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 7.1755ms
2024-06-12 17:57:56.656 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 300
2024-06-12 17:57:56.657 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:57:56.658 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 17:57:56.660 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 17:57:56.660 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 1.3051ms
2024-06-12 17:57:56.661 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:57:56.662 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 5.9785ms
2024-06-12 17:58:03.686 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 298
2024-06-12 17:58:03.688 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:58:03.689 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 17:58:03.690 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 17:58:03.691 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 1.2914ms
2024-06-12 17:58:03.692 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:58:03.692 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 6.8416ms
2024-06-12 17:58:34.483 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 300
2024-06-12 17:58:34.485 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:58:34.485 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 17:58:34.488 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 17:58:34.489 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 1.8838ms
2024-06-12 17:58:34.490 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:58:34.491 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 8.0394ms
2024-06-12 17:58:46.755 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 300
2024-06-12 17:58:46.757 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:58:46.758 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 17:58:46.759 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 17:58:46.760 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 1.3054ms
2024-06-12 17:58:46.761 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:58:46.762 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 6.5018ms
2024-06-12 17:59:05.995 +03:00 [INF] Application is shutting down...
2024-06-12 17:59:09.310 +03:00 [INF] Starting application
2024-06-12 17:59:09.402 +03:00 [INF] Configuring application
2024-06-12 17:59:09.522 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 17:59:09.573 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 17:59:09.576 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 17:59:09.577 +03:00 [INF] Hosting environment: Development
2024-06-12 17:59:09.577 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 17:59:09.824 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 17:59:09.934 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 111.1567ms
2024-06-12 17:59:10.052 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 17:59:10.124 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 71.8772ms
2024-06-12 17:59:13.666 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 66
2024-06-12 17:59:13.672 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 17:59:13.725 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 17:59:13.743 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 17:59:13.915 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 17:59:13.917 +03:00 [INF] Executing Login method for userName: asdasd13
2024-06-12 17:59:13.919 +03:00 [INF] User login attempt with username: asdasd13
2024-06-12 17:59:13.920 +03:00 [INF] Fetching user by username: asdasd13
2024-06-12 17:59:15.215 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 17:59:15.277 +03:00 [INF] Generating JWT token for username: asdasd13
2024-06-12 17:59:15.285 +03:00 [INF] User successfully logged in with username: asdasd13
2024-06-12 17:59:15.286 +03:00 [INF] User logged in successfully with userName: asdasd13
2024-06-12 17:59:15.289 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1370.8508ms.
2024-06-12 17:59:15.297 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 17:59:15.301 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 1554.9293ms
2024-06-12 17:59:15.303 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 17:59:15.313 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 1646.158ms
2024-06-12 17:59:22.288 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 300
2024-06-12 17:59:22.298 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:59:22.304 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 17:59:22.316 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 17:59:22.335 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 29.9538ms
2024-06-12 17:59:22.336 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:59:22.336 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 48.4735ms
2024-06-12 17:59:30.495 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 305
2024-06-12 17:59:30.501 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:59:30.503 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 17:59:30.508 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 17:59:30.509 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 4.3386ms
2024-06-12 17:59:30.510 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:59:30.511 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 16.3621ms
2024-06-12 17:59:38.058 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 305
2024-06-12 17:59:38.062 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:59:38.063 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 17:59:38.067 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 17:59:38.069 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 4.7101ms
2024-06-12 17:59:38.070 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 17:59:38.071 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 12.7627ms
2024-06-12 17:59:59.972 +03:00 [INF] Application is shutting down...
2024-06-12 18:00:03.053 +03:00 [INF] Starting application
2024-06-12 18:00:03.145 +03:00 [INF] Configuring application
2024-06-12 18:00:03.262 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 18:00:03.312 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 18:00:03.315 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 18:00:03.316 +03:00 [INF] Hosting environment: Development
2024-06-12 18:00:03.316 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 18:00:03.594 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 18:00:03.703 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 110.4598ms
2024-06-12 18:00:03.813 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 18:00:03.882 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.2073ms
2024-06-12 18:09:55.928 +03:00 [INF] Application is shutting down...
2024-06-12 18:09:58.960 +03:00 [INF] Starting application
2024-06-12 18:09:59.060 +03:00 [INF] Configuring application
2024-06-12 18:09:59.179 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 18:09:59.231 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 18:09:59.234 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 18:09:59.235 +03:00 [INF] Hosting environment: Development
2024-06-12 18:09:59.236 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 18:09:59.578 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 18:09:59.694 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 117.1064ms
2024-06-12 18:09:59.823 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 18:09:59.897 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 73.1017ms
2024-06-12 18:10:13.696 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 162
2024-06-12 18:10:13.705 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 18:10:13.727 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 18:10:13.748 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 18:10:14.018 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 18:10:14.023 +03:00 [INF] Executing Register method for userName: zvU99TruW1bMK5EkpW4s
2024-06-12 18:10:14.026 +03:00 [INF] Registering user with username: zvU99TruW1bMK5EkpW4s
2024-06-12 18:10:14.028 +03:00 [INF] Fetching user by username: zvU99TruW1bMK5EkpW4s
2024-06-12 18:10:16.049 +03:00 [INF] Executed DbCommand (120ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 18:10:16.090 +03:00 [WRN] User with username: zvU99TruW1bMK5EkpW4s not found
2024-06-12 18:10:16.094 +03:00 [INF] Creating user with username: zvU99TruW1bMK5EkpW4s
2024-06-12 18:10:16.098 +03:00 [INF] Creating user with username: zvU99TruW1bMK5EkpW4s
2024-06-12 18:10:16.413 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 18:10:16.437 +03:00 [INF] Successfully created user with username: zvU99TruW1bMK5EkpW4s
2024-06-12 18:10:16.438 +03:00 [INF] Successfully registered user with username: zvU99TruW1bMK5EkpW4s
2024-06-12 18:10:16.439 +03:00 [INF] User registered successfully with userName: zvU99TruW1bMK5EkpW4s
2024-06-12 18:10:16.446 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2420.2231ms.
2024-06-12 18:10:16.473 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 18:10:16.489 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 2731.6924ms
2024-06-12 18:10:16.490 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 18:10:16.521 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 2825.0227ms
2024-06-12 18:10:31.470 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 100
2024-06-12 18:10:31.476 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 18:10:31.481 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 18:10:31.488 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 18:10:31.490 +03:00 [INF] Executing Login method for userName: zvU99TruW1bMK5EkpW4s
2024-06-12 18:10:31.493 +03:00 [INF] User login attempt with username: zvU99TruW1bMK5EkpW4s
2024-06-12 18:10:31.494 +03:00 [INF] Fetching user by username: zvU99TruW1bMK5EkpW4s
2024-06-12 18:10:31.593 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 18:10:31.603 +03:00 [INF] Generating JWT token for username: zvU99TruW1bMK5EkpW4s
2024-06-12 18:10:31.624 +03:00 [INF] User successfully logged in with username: zvU99TruW1bMK5EkpW4s
2024-06-12 18:10:31.627 +03:00 [INF] User logged in successfully with userName: zvU99TruW1bMK5EkpW4s
2024-06-12 18:10:31.628 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 138.0196ms.
2024-06-12 18:10:31.629 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 18:10:31.630 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 148.0128ms
2024-06-12 18:10:31.634 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 18:10:31.635 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 165.6574ms
2024-06-12 18:11:22.811 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 319
2024-06-12 18:11:22.882 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 18:11:22.886 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 18:11:22.910 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 18:11:22.915 +03:00 [INF] Executing Add method
2024-06-12 18:11:23.144 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Guid), @p14='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Id], [Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO [PlaceOfResidences] ([Id], [ApartmentNumber], [City], [HouseNumber], [PersonInformationId], [Street])
VALUES (@p9, @p10, @p11, @p12, @p13, @p14);
2024-06-12 18:11:23.203 +03:00 [INF] Person Information added successfully
2024-06-12 18:11:23.206 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 293.0308ms.
2024-06-12 18:11:23.207 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 18:11:23.210 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 321.7729ms
2024-06-12 18:11:23.213 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 18:11:23.214 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 402.8846ms
2024-06-12 18:11:30.813 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 18:11:30.817 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 18:11:30.821 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 18:11:30.823 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 18:11:30.826 +03:00 [INF] Executing GetAll method
2024-06-12 18:11:30.920 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 18:11:30.929 +03:00 [INF] GetAll method executed successfully
2024-06-12 18:11:30.930 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 106.1446ms.
2024-06-12 18:11:30.932 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 18:11:30.938 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 115.4561ms
2024-06-12 18:11:30.939 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 18:11:30.940 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 126.2999ms
2024-06-12 18:11:41.750 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=6ff48885-1be2-430b-97a0-88fad23729f0 - multipart/form-data; boundary=---------------------------37998171565631836613880736105 39811
2024-06-12 18:11:41.752 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 18:11:41.756 +03:00 [INF] Route matched with {action = "UploadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile, System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 18:11:41.772 +03:00 [INF] Executing action method WebApi.Controllers.FileController.UploadFile (WebApi) - Validation state: "Valid"
2024-06-12 18:11:41.774 +03:00 [INF] Executing UploadFile method for user: "6bd03a54-bc9b-49f4-b225-8d7398962bf3"
2024-06-12 18:11:41.776 +03:00 [INF] Uploading file: Screenshot 2024-06-05 133416.png for user: "6bd03a54-bc9b-49f4-b225-8d7398962bf3"
2024-06-12 18:11:42.118 +03:00 [INF] Uploading file: Screenshot 2024-06-05 133416.png for user: "00000000-0000-0000-0000-000000000000"
2024-06-12 18:11:42.226 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ProfilePhotos] ([FileName], [FilePath], [PersonInformationId], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-06-12 18:11:42.277 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAccess.MainDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'FinalCodeAcademyApp.dbo.ProfilePhotos'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cf28402c-22dd-4557-a1e1-e1f9f01b9ca5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'FinalCodeAcademyApp.dbo.ProfilePhotos'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cf28402c-22dd-4557-a1e1-e1f9f01b9ca5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-06-12 18:11:42.293 +03:00 [ERR] An error occurred while uploading file: Screenshot 2024-06-05 133416.png for user: "6bd03a54-bc9b-49f4-b225-8d7398962bf3"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'FinalCodeAcademyApp.dbo.ProfilePhotos'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cf28402c-22dd-4557-a1e1-e1f9f01b9ca5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 26
2024-06-12 18:11:42.306 +03:00 [ERR] Error occurred while uploading file: Screenshot 2024-06-05 133416.png for user: "6bd03a54-bc9b-49f4-b225-8d7398962bf3"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'FinalCodeAcademyApp.dbo.ProfilePhotos'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cf28402c-22dd-4557-a1e1-e1f9f01b9ca5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 26
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 32
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 64
2024-06-12 18:11:42.328 +03:00 [ERR] Error occurred while uploading file for user: "6bd03a54-bc9b-49f4-b225-8d7398962bf3"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'FinalCodeAcademyApp.dbo.ProfilePhotos'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cf28402c-22dd-4557-a1e1-e1f9f01b9ca5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 26
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 32
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 64
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 70
   at WebApi.Controllers.FileController.UploadFile(IFormFile file, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\FileController.cs:line 35
2024-06-12 18:11:42.346 +03:00 [INF] Executed action method WebApi.Controllers.FileController.UploadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 572.6764ms.
2024-06-12 18:11:42.348 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 18:11:42.350 +03:00 [INF] Executed action WebApi.Controllers.FileController.UploadFile (WebApi) in 592.5716ms
2024-06-12 18:11:42.354 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 18:11:42.356 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=6ff48885-1be2-430b-97a0-88fad23729f0 - 409 null text/plain; charset=utf-8 605.9041ms
2024-06-12 18:14:36.015 +03:00 [INF] Application is shutting down...
2024-06-12 18:14:39.975 +03:00 [INF] Starting application
2024-06-12 18:14:40.072 +03:00 [INF] Configuring application
2024-06-12 18:14:40.194 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 18:14:40.259 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 18:14:40.261 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 18:14:40.263 +03:00 [INF] Hosting environment: Development
2024-06-12 18:14:40.263 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 18:14:40.536 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 18:14:40.654 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 119.3512ms
2024-06-12 18:14:40.760 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 18:14:40.834 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 74.0902ms
2024-06-12 18:15:04.585 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 100
2024-06-12 18:15:04.590 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 18:15:04.675 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 18:15:04.697 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 18:15:05.051 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 18:15:05.056 +03:00 [INF] Executing Login method for userName: zvU99TruW1bMK5EkpW4s
2024-06-12 18:15:05.059 +03:00 [INF] User login attempt with username: zvU99TruW1bMK5EkpW4s
2024-06-12 18:15:05.064 +03:00 [INF] Fetching user by username: zvU99TruW1bMK5EkpW4s
2024-06-12 18:15:07.092 +03:00 [INF] Executed DbCommand (102ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 18:15:07.165 +03:00 [INF] Generating JWT token for username: zvU99TruW1bMK5EkpW4s
2024-06-12 18:15:07.173 +03:00 [INF] User successfully logged in with username: zvU99TruW1bMK5EkpW4s
2024-06-12 18:15:07.173 +03:00 [INF] User logged in successfully with userName: zvU99TruW1bMK5EkpW4s
2024-06-12 18:15:07.183 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2121.0934ms.
2024-06-12 18:15:07.200 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 18:15:07.211 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 2506.1166ms
2024-06-12 18:15:07.214 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 18:15:07.232 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 2647.6569ms
2024-06-12 18:15:16.082 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 18:15:16.091 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 18:15:16.096 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 18:15:16.100 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 18:15:16.102 +03:00 [INF] Executing GetAll method
2024-06-12 18:15:16.251 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 18:15:16.280 +03:00 [INF] GetAll method executed successfully
2024-06-12 18:15:16.281 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 180.8305ms.
2024-06-12 18:15:16.283 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 18:15:16.295 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 196.7827ms
2024-06-12 18:15:16.301 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 18:15:16.303 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 220.9939ms
2024-06-12 18:15:26.214 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=6ff48885-1be2-430b-97a0-88fad23729f0 - multipart/form-data; boundary=---------------------------346896630123695974763345516789 277809
2024-06-12 18:15:26.220 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 18:15:26.225 +03:00 [INF] Route matched with {action = "UploadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile, System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 18:15:26.252 +03:00 [INF] Executing action method WebApi.Controllers.FileController.UploadFile (WebApi) - Validation state: "Valid"
2024-06-12 18:15:26.254 +03:00 [INF] Executing UploadFile method for user: "6bd03a54-bc9b-49f4-b225-8d7398962bf3"
2024-06-12 18:15:26.256 +03:00 [INF] Uploading file: Screenshot 2024-06-03 214352.png for user: "6bd03a54-bc9b-49f4-b225-8d7398962bf3"
2024-06-12 18:15:26.582 +03:00 [INF] Uploading file: Screenshot 2024-06-03 214352.png for user: "6bd03a54-bc9b-49f4-b225-8d7398962bf3"
2024-06-12 18:15:26.858 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ProfilePhotos] ([FileName], [FilePath], [PersonInformationId], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-06-12 18:15:26.899 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAccess.MainDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'FinalCodeAcademyApp.dbo.ProfilePhotos'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:8aea4b48-2a2d-4baa-ab29-70b2ef03c98c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'FinalCodeAcademyApp.dbo.ProfilePhotos'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:8aea4b48-2a2d-4baa-ab29-70b2ef03c98c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-06-12 18:15:26.919 +03:00 [ERR] An error occurred while uploading file: Screenshot 2024-06-03 214352.png for user: "6bd03a54-bc9b-49f4-b225-8d7398962bf3"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'FinalCodeAcademyApp.dbo.ProfilePhotos'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:8aea4b48-2a2d-4baa-ab29-70b2ef03c98c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 25
2024-06-12 18:15:26.932 +03:00 [ERR] Error occurred while uploading file: Screenshot 2024-06-03 214352.png for user: "6bd03a54-bc9b-49f4-b225-8d7398962bf3"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'FinalCodeAcademyApp.dbo.ProfilePhotos'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:8aea4b48-2a2d-4baa-ab29-70b2ef03c98c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 25
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 31
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 65
2024-06-12 18:15:26.947 +03:00 [ERR] Error occurred while uploading file for user: "6bd03a54-bc9b-49f4-b225-8d7398962bf3"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'FinalCodeAcademyApp.dbo.ProfilePhotos'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:8aea4b48-2a2d-4baa-ab29-70b2ef03c98c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 25
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 31
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 65
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 71
   at WebApi.Controllers.FileController.UploadFile(IFormFile file, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\FileController.cs:line 35
2024-06-12 18:15:26.958 +03:00 [INF] Executed action method WebApi.Controllers.FileController.UploadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 705.0244ms.
2024-06-12 18:15:26.961 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 18:15:26.963 +03:00 [INF] Executed action WebApi.Controllers.FileController.UploadFile (WebApi) in 736.9369ms
2024-06-12 18:15:26.965 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 18:15:26.967 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=6ff48885-1be2-430b-97a0-88fad23729f0 - 409 null text/plain; charset=utf-8 752.945ms
2024-06-12 18:18:50.259 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 18:18:50.261 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 18:18:50.262 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 18:18:50.264 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 18:18:50.265 +03:00 [INF] Executing GetAll method
2024-06-12 18:18:50.325 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 18:18:50.328 +03:00 [INF] GetAll method executed successfully
2024-06-12 18:18:50.328 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 63.2474ms.
2024-06-12 18:18:50.329 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 18:18:50.330 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 66.6753ms
2024-06-12 18:18:50.331 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 18:18:50.331 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 72.0937ms
2024-06-12 18:21:14.493 +03:00 [INF] Application is shutting down...
2024-06-12 18:21:25.698 +03:00 [INF] Starting application
2024-06-12 18:21:26.120 +03:00 [INF] Configuring application
2024-06-12 18:21:26.559 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 18:21:26.672 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 18:21:26.674 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 18:21:26.675 +03:00 [INF] Hosting environment: Development
2024-06-12 18:21:26.676 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 18:21:27.147 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 18:21:27.265 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 118.7071ms
2024-06-12 18:21:27.377 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 18:21:27.457 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 79.6326ms
2024-06-12 18:21:41.812 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 162
2024-06-12 18:21:41.837 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 18:21:41.926 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 18:21:41.960 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 18:21:42.324 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 18:21:42.327 +03:00 [INF] Executing Register method for userName: f7TPumRGSfrjLgmGH7or
2024-06-12 18:21:42.329 +03:00 [INF] Registering user with username: f7TPumRGSfrjLgmGH7or
2024-06-12 18:21:42.332 +03:00 [INF] Fetching user by username: f7TPumRGSfrjLgmGH7or
2024-06-12 18:21:44.230 +03:00 [INF] Executed DbCommand (113ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 18:21:44.276 +03:00 [WRN] User with username: f7TPumRGSfrjLgmGH7or not found
2024-06-12 18:21:44.278 +03:00 [INF] Creating user with username: f7TPumRGSfrjLgmGH7or
2024-06-12 18:21:44.282 +03:00 [INF] Creating user with username: f7TPumRGSfrjLgmGH7or
2024-06-12 18:21:44.511 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 18:21:44.519 +03:00 [INF] Successfully created user with username: f7TPumRGSfrjLgmGH7or
2024-06-12 18:21:44.521 +03:00 [INF] Successfully registered user with username: f7TPumRGSfrjLgmGH7or
2024-06-12 18:21:44.522 +03:00 [INF] User registered successfully with userName: f7TPumRGSfrjLgmGH7or
2024-06-12 18:21:44.526 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2196.9154ms.
2024-06-12 18:21:44.538 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 18:21:44.549 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 2584.6143ms
2024-06-12 18:21:44.552 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 18:21:44.566 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 2753.4867ms
2024-06-12 18:21:57.316 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 100
2024-06-12 18:21:57.322 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 18:21:57.325 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 18:21:57.330 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 18:21:57.331 +03:00 [INF] Executing Login method for userName: f7TPumRGSfrjLgmGH7or
2024-06-12 18:21:57.346 +03:00 [INF] User login attempt with username: f7TPumRGSfrjLgmGH7or
2024-06-12 18:21:57.347 +03:00 [INF] Fetching user by username: f7TPumRGSfrjLgmGH7or
2024-06-12 18:21:57.429 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 18:21:57.441 +03:00 [INF] Generating JWT token for username: f7TPumRGSfrjLgmGH7or
2024-06-12 18:21:57.467 +03:00 [INF] User successfully logged in with username: f7TPumRGSfrjLgmGH7or
2024-06-12 18:21:57.468 +03:00 [INF] User logged in successfully with userName: f7TPumRGSfrjLgmGH7or
2024-06-12 18:21:57.469 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 138.1169ms.
2024-06-12 18:21:57.471 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 18:21:57.471 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 144.6735ms
2024-06-12 18:21:57.472 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 18:21:57.473 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 156.4532ms
2024-06-12 18:22:51.498 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 319
2024-06-12 18:22:51.560 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 18:22:51.563 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 18:22:51.582 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 18:22:51.585 +03:00 [INF] Executing Add method
2024-06-12 18:22:51.843 +03:00 [INF] Executed DbCommand (63ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Guid), @p14='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Id], [Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO [PlaceOfResidences] ([Id], [ApartmentNumber], [City], [HouseNumber], [PersonInformationId], [Street])
VALUES (@p9, @p10, @p11, @p12, @p13, @p14);
2024-06-12 18:22:51.905 +03:00 [INF] Person Information added successfully
2024-06-12 18:22:51.907 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 322.8558ms.
2024-06-12 18:22:51.908 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 18:22:51.909 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 343.0821ms
2024-06-12 18:22:51.910 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 18:22:51.911 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 412.5686ms
2024-06-12 18:22:57.798 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 18:22:57.802 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 18:22:57.806 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 18:22:57.808 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 18:22:57.810 +03:00 [INF] Executing GetAll method
2024-06-12 18:22:57.929 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 18:22:57.939 +03:00 [INF] GetAll method executed successfully
2024-06-12 18:22:57.940 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 130.6893ms.
2024-06-12 18:22:57.941 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 18:22:57.946 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 139.0791ms
2024-06-12 18:22:57.951 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 18:22:57.952 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 153.9935ms
2024-06-12 18:23:06.955 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=9fd8e886-811a-4032-a970-99934ee444d7 - multipart/form-data; boundary=---------------------------10033932938729385301378362451 39811
2024-06-12 18:23:06.957 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 18:23:06.959 +03:00 [INF] Route matched with {action = "UploadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile, System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 18:23:06.976 +03:00 [INF] Executing action method WebApi.Controllers.FileController.UploadFile (WebApi) - Validation state: "Valid"
2024-06-12 18:23:06.977 +03:00 [INF] Executing UploadFile method for user: "b005129a-25ce-4d2e-9728-342698178e83"
2024-06-12 18:23:18.884 +03:00 [INF] Uploading file: Screenshot 2024-06-05 133416.png for user: "b005129a-25ce-4d2e-9728-342698178e83"
2024-06-12 18:24:34.280 +03:00 [INF] Uploading file: Screenshot 2024-06-05 133416.png for user: null
2024-06-12 18:25:03.008 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ProfilePhotos] ([FileName], [FilePath], [PersonInformationId], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-06-12 18:25:03.043 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAccess.MainDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'FinalCodeAcademyApp.dbo.ProfilePhotos'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:77534f6f-2892-4a02-9f2e-f5299f5abe20
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'FinalCodeAcademyApp.dbo.ProfilePhotos'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:77534f6f-2892-4a02-9f2e-f5299f5abe20
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-06-12 18:25:41.669 +03:00 [INF] Starting application
2024-06-12 18:25:42.077 +03:00 [INF] Configuring application
2024-06-12 18:25:42.492 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 18:25:42.605 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 18:25:42.607 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 18:25:42.608 +03:00 [INF] Hosting environment: Development
2024-06-12 18:25:42.609 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 18:25:43.115 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 18:25:43.235 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 120.9805ms
2024-06-12 18:25:43.343 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 18:25:43.420 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 76.6965ms
2024-06-12 18:25:49.774 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 100
2024-06-12 18:25:49.786 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 18:25:49.949 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 18:25:49.981 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 18:25:50.330 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 18:25:50.332 +03:00 [INF] Executing Login method for userName: f7TPumRGSfrjLgmGH7or
2024-06-12 18:25:50.345 +03:00 [INF] User login attempt with username: f7TPumRGSfrjLgmGH7or
2024-06-12 18:25:50.347 +03:00 [INF] Fetching user by username: f7TPumRGSfrjLgmGH7or
2024-06-12 18:25:52.358 +03:00 [INF] Executed DbCommand (122ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 18:25:52.498 +03:00 [INF] Generating JWT token for username: f7TPumRGSfrjLgmGH7or
2024-06-12 18:25:52.516 +03:00 [INF] User successfully logged in with username: f7TPumRGSfrjLgmGH7or
2024-06-12 18:25:52.517 +03:00 [INF] User logged in successfully with userName: f7TPumRGSfrjLgmGH7or
2024-06-12 18:25:52.526 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2188.4752ms.
2024-06-12 18:25:52.535 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 18:25:52.539 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 2553.2605ms
2024-06-12 18:25:52.541 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 18:25:52.547 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 2773.3331ms
2024-06-12 18:26:03.420 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=9fd8e886-811a-4032-a970-99934ee444d7 - multipart/form-data; boundary=---------------------------12680209951788264943981543612 277807
2024-06-12 18:26:03.429 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 18:26:03.434 +03:00 [INF] Route matched with {action = "UploadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile, System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 18:26:03.485 +03:00 [INF] Executing action method WebApi.Controllers.FileController.UploadFile (WebApi) - Validation state: "Valid"
2024-06-12 18:26:03.489 +03:00 [INF] Executing UploadFile method for user: "b005129a-25ce-4d2e-9728-342698178e83"
2024-06-12 18:26:09.517 +03:00 [INF] Uploading file: Screenshot 2024-06-03 214352.png for user: "b005129a-25ce-4d2e-9728-342698178e83"
2024-06-12 18:26:09.678 +03:00 [INF] Uploading file: Screenshot 2024-06-03 214352.png for user: null
2024-06-12 18:26:09.847 +03:00 [ERR] Failed executing DbCommand (76ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ProfilePhotos] ([Id], [FileName], [FilePath], [PersonInformationId], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 18:26:09.876 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAccess.MainDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProfilePhotos_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:fa94ea14-82f2-411e-8f97-a56dd93232f6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProfilePhotos_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:fa94ea14-82f2-411e-8f97-a56dd93232f6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-06-12 18:26:09.969 +03:00 [ERR] An error occurred while uploading file: Screenshot 2024-06-03 214352.png for user: "b005129a-25ce-4d2e-9728-342698178e83"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProfilePhotos_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:fa94ea14-82f2-411e-8f97-a56dd93232f6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 27
2024-06-12 18:26:20.211 +03:00 [ERR] Error occurred while uploading file: Screenshot 2024-06-03 214352.png for user: "b005129a-25ce-4d2e-9728-342698178e83"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProfilePhotos_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:fa94ea14-82f2-411e-8f97-a56dd93232f6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 27
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 33
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 33
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 64
2024-06-12 18:26:22.144 +03:00 [ERR] Error occurred while uploading file for user: "b005129a-25ce-4d2e-9728-342698178e83"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProfilePhotos_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:fa94ea14-82f2-411e-8f97-a56dd93232f6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 27
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 33
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 33
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 64
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 70
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 70
   at WebApi.Controllers.FileController.UploadFile(IFormFile file, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\FileController.cs:line 35
2024-06-12 18:26:22.151 +03:00 [INF] Executed action method WebApi.Controllers.FileController.UploadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 18662.8595ms.
2024-06-12 18:26:22.152 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 18:26:22.154 +03:00 [INF] Executed action WebApi.Controllers.FileController.UploadFile (WebApi) in 18717.9499ms
2024-06-12 18:26:22.155 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 18:26:22.156 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=9fd8e886-811a-4032-a970-99934ee444d7 - 409 null text/plain; charset=utf-8 18735.9563ms
2024-06-12 18:27:02.504 +03:00 [INF] Starting application
2024-06-12 18:27:02.608 +03:00 [INF] Configuring application
2024-06-12 18:27:02.737 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 18:27:02.792 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 18:27:02.796 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 18:27:02.797 +03:00 [INF] Hosting environment: Development
2024-06-12 18:27:02.798 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 18:27:03.042 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 18:27:03.156 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 114.0703ms
2024-06-12 18:27:03.260 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 18:27:03.333 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 72.4687ms
2024-06-12 18:27:19.267 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 162
2024-06-12 18:27:19.273 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 18:27:19.332 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 18:27:19.350 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 18:27:19.535 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 18:27:19.538 +03:00 [INF] Executing Register method for userName: f7TPumRGSfrjLgmGH7or
2024-06-12 18:27:19.539 +03:00 [INF] Registering user with username: f7TPumRGSfrjLgmGH7or
2024-06-12 18:27:19.541 +03:00 [INF] Fetching user by username: f7TPumRGSfrjLgmGH7or
2024-06-12 18:27:20.927 +03:00 [INF] Executed DbCommand (114ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 18:27:21.067 +03:00 [WRN] User with username: f7TPumRGSfrjLgmGH7or already exists
2024-06-12 18:27:21.070 +03:00 [ERR] Error occurred while registering user with username: f7TPumRGSfrjLgmGH7or
System.IO.InvalidDataException: User with such username already exists
   at App.Services.UserService.RegisterAsync(UserRegisterDto userRegisterDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 69
2024-06-12 18:27:21.091 +03:00 [ERR] Error occurred while registering user with userName: f7TPumRGSfrjLgmGH7or
System.IO.InvalidDataException: User with such username already exists
   at App.Services.UserService.RegisterAsync(UserRegisterDto userRegisterDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 69
   at App.Services.UserService.RegisterAsync(UserRegisterDto userRegisterDto) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\UserService.cs:line 82
   at WebApi.Controllers.UserController.Register(UserRegisterDto userRegisterDto) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\UserController.cs:line 74
2024-06-12 18:27:21.106 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 1565.2622ms.
2024-06-12 18:27:21.126 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 18:27:21.137 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 1780.9773ms
2024-06-12 18:27:21.139 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 18:27:21.156 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 409 null text/plain; charset=utf-8 1889.274ms
2024-06-12 18:27:26.435 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 100
2024-06-12 18:27:26.442 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 18:27:26.447 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 18:27:26.451 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 18:27:26.452 +03:00 [INF] Executing Login method for userName: f7TPumRGSfrjLgmGH7or
2024-06-12 18:27:26.454 +03:00 [INF] User login attempt with username: f7TPumRGSfrjLgmGH7or
2024-06-12 18:27:26.456 +03:00 [INF] Fetching user by username: f7TPumRGSfrjLgmGH7or
2024-06-12 18:27:26.594 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 18:27:26.598 +03:00 [INF] Generating JWT token for username: f7TPumRGSfrjLgmGH7or
2024-06-12 18:27:26.607 +03:00 [INF] User successfully logged in with username: f7TPumRGSfrjLgmGH7or
2024-06-12 18:27:26.608 +03:00 [INF] User logged in successfully with userName: f7TPumRGSfrjLgmGH7or
2024-06-12 18:27:26.608 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 156.5037ms.
2024-06-12 18:27:26.610 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 18:27:26.610 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 162.6174ms
2024-06-12 18:27:26.611 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 18:27:26.614 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 178.7811ms
2024-06-12 18:27:36.915 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=9fd8e886-811a-4032-a970-99934ee444d7 - multipart/form-data; boundary=---------------------------282068138415656229781123409155 39813
2024-06-12 18:27:36.924 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 18:27:36.930 +03:00 [INF] Route matched with {action = "UploadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile, System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 18:27:36.946 +03:00 [INF] Executing action method WebApi.Controllers.FileController.UploadFile (WebApi) - Validation state: "Valid"
2024-06-12 18:27:36.947 +03:00 [INF] Executing UploadFile method for user: "b005129a-25ce-4d2e-9728-342698178e83"
2024-06-12 18:27:36.949 +03:00 [INF] Uploading file: Screenshot 2024-06-05 133416.png for user: "b005129a-25ce-4d2e-9728-342698178e83"
2024-06-12 18:27:37.155 +03:00 [INF] Uploading file: Screenshot 2024-06-05 133416.png for user: null
2024-06-12 18:27:37.433 +03:00 [ERR] Failed executing DbCommand (60ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ProfilePhotos] ([Id], [FileName], [FilePath], [PersonInformationId], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 18:27:37.446 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAccess.MainDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProfilePhotos_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3bb8bd6a-54b0-41b2-9cdd-7aebe7434135
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProfilePhotos_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3bb8bd6a-54b0-41b2-9cdd-7aebe7434135
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-06-12 18:27:37.468 +03:00 [ERR] An error occurred while uploading file: Screenshot 2024-06-05 133416.png for user: "b005129a-25ce-4d2e-9728-342698178e83"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProfilePhotos_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3bb8bd6a-54b0-41b2-9cdd-7aebe7434135
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 26
2024-06-12 18:27:37.480 +03:00 [ERR] Error occurred while uploading file: Screenshot 2024-06-05 133416.png for user: "b005129a-25ce-4d2e-9728-342698178e83"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProfilePhotos_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3bb8bd6a-54b0-41b2-9cdd-7aebe7434135
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 26
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 32
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 64
2024-06-12 18:27:37.490 +03:00 [ERR] Error occurred while uploading file for user: "b005129a-25ce-4d2e-9728-342698178e83"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProfilePhotos_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3bb8bd6a-54b0-41b2-9cdd-7aebe7434135
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 26
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 32
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 64
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 70
   at WebApi.Controllers.FileController.UploadFile(IFormFile file, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\FileController.cs:line 35
2024-06-12 18:27:37.505 +03:00 [INF] Executed action method WebApi.Controllers.FileController.UploadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 558.4929ms.
2024-06-12 18:27:37.508 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 18:27:37.509 +03:00 [INF] Executed action WebApi.Controllers.FileController.UploadFile (WebApi) in 578.2409ms
2024-06-12 18:27:37.510 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 18:27:37.514 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=9fd8e886-811a-4032-a970-99934ee444d7 - 409 null text/plain; charset=utf-8 599.0544ms
2024-06-12 18:29:05.890 +03:00 [INF] Application is shutting down...
2024-06-12 18:29:08.749 +03:00 [INF] Starting application
2024-06-12 18:29:08.847 +03:00 [INF] Configuring application
2024-06-12 18:29:08.977 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 18:29:09.026 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 18:29:09.029 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 18:29:09.030 +03:00 [INF] Hosting environment: Development
2024-06-12 18:29:09.030 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 18:29:09.632 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 18:29:09.756 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 125.0578ms
2024-06-12 18:29:09.877 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 18:29:09.953 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 75.9891ms
2024-06-12 18:41:53.496 +03:00 [INF] Application is shutting down...
2024-06-12 18:41:56.344 +03:00 [INF] Starting application
2024-06-12 18:41:56.441 +03:00 [INF] Configuring application
2024-06-12 18:41:56.557 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 18:41:56.607 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 18:41:56.609 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 18:41:56.611 +03:00 [INF] Hosting environment: Development
2024-06-12 18:41:56.611 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 18:41:58.624 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 18:41:58.624 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger - null null
2024-06-12 18:41:58.656 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger - 499 null null 33.2486ms
2024-06-12 18:41:58.739 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 116.646ms
2024-06-12 18:41:58.780 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui.css - null null
2024-06-12 18:41:58.790 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-06-12 18:41:58.792 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui.css - 499 143943 text/css 11.3983ms
2024-06-12 18:41:58.860 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 18:41:58.934 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 73.5962ms
2024-06-12 18:42:32.292 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 71
2024-06-12 18:42:32.300 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 18:42:32.324 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 18:42:32.343 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 18:42:32.524 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 18:42:32.556 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 206.7319ms
2024-06-12 18:42:32.558 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 18:42:32.561 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 400 null application/problem+json; charset=utf-8 269.3633ms
2024-06-12 18:43:07.011 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 96
2024-06-12 18:43:07.018 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 18:43:07.019 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 18:43:07.037 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 18:43:07.039 +03:00 [INF] Executing Register method for userName: RokasRokas
2024-06-12 18:43:07.041 +03:00 [INF] Registering user with username: RokasRokas
2024-06-12 18:43:07.042 +03:00 [INF] Fetching user by username: RokasRokas
2024-06-12 18:43:08.926 +03:00 [INF] Executed DbCommand (96ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 18:43:08.969 +03:00 [WRN] User with username: RokasRokas not found
2024-06-12 18:43:08.972 +03:00 [INF] Creating user with username: RokasRokas
2024-06-12 18:43:08.980 +03:00 [INF] Creating user with username: RokasRokas
2024-06-12 18:43:09.281 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 18:43:09.300 +03:00 [INF] Successfully created user with username: RokasRokas
2024-06-12 18:43:09.308 +03:00 [INF] Successfully registered user with username: RokasRokas
2024-06-12 18:43:09.309 +03:00 [INF] User registered successfully with userName: RokasRokas
2024-06-12 18:43:09.323 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2273.1637ms.
2024-06-12 18:43:09.329 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 18:43:09.336 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 2315.6374ms
2024-06-12 18:43:09.338 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 18:43:09.354 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 2342.0944ms
2024-06-12 18:43:37.458 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 62
2024-06-12 18:43:37.463 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 18:43:37.468 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 18:43:37.478 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 18:43:37.481 +03:00 [INF] Executing Login method for userName: RokasRokas
2024-06-12 18:43:37.484 +03:00 [INF] User login attempt with username: RokasRokas
2024-06-12 18:43:37.485 +03:00 [INF] Fetching user by username: RokasRokas
2024-06-12 18:43:37.611 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 18:43:37.624 +03:00 [INF] Generating JWT token for username: RokasRokas
2024-06-12 18:43:37.640 +03:00 [INF] User successfully logged in with username: RokasRokas
2024-06-12 18:43:37.641 +03:00 [INF] User logged in successfully with userName: RokasRokas
2024-06-12 18:43:37.642 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 161.4925ms.
2024-06-12 18:43:37.643 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 18:43:37.643 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 173.9131ms
2024-06-12 18:43:37.646 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 18:43:37.648 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 190.2216ms
2024-06-12 18:43:51.614 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/User/GetAll - null null
2024-06-12 18:43:51.658 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-06-12 18:43:51.660 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-06-12 18:43:51.663 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/User/GetAll - 403 0 null 49.1435ms
2024-06-12 18:46:02.924 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 318
2024-06-12 18:46:02.928 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 18:46:02.932 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 18:46:02.950 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 18:46:02.951 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 16.7389ms
2024-06-12 18:46:02.952 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 18:46:02.955 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 30.5392ms
2024-06-12 18:46:14.172 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 324
2024-06-12 18:46:14.175 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 18:46:14.176 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 18:46:14.178 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 18:46:14.179 +03:00 [INF] Executing Add method
2024-06-12 18:46:14.423 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Guid), @p14='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Id], [Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO [PlaceOfResidences] ([Id], [ApartmentNumber], [City], [HouseNumber], [PersonInformationId], [Street])
VALUES (@p9, @p10, @p11, @p12, @p13, @p14);
2024-06-12 18:46:14.480 +03:00 [INF] Person Information added successfully
2024-06-12 18:46:14.481 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 303.1143ms.
2024-06-12 18:46:14.482 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 18:46:14.483 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 306.6211ms
2024-06-12 18:46:14.485 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 18:46:14.486 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 313.7287ms
2024-06-12 18:46:30.850 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 325
2024-06-12 18:46:30.852 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 18:46:30.853 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 18:46:30.857 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 18:46:30.858 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 3.51ms
2024-06-12 18:46:30.859 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 18:46:30.860 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 10.1315ms
2024-06-12 18:47:00.325 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 324
2024-06-12 18:47:00.328 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 18:47:00.328 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 18:47:00.331 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.Add (WebApi) - Validation state: "Valid"
2024-06-12 18:47:00.334 +03:00 [INF] Executing Add method
2024-06-12 18:47:00.443 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Guid), @p14='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [PersonInformations] ([Id], [Birthday], [Email], [FirstName], [Gender], [LastName], [PersonalCode], [PhoneNumber], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO [PlaceOfResidences] ([Id], [ApartmentNumber], [City], [HouseNumber], [PersonInformationId], [Street])
VALUES (@p9, @p10, @p11, @p12, @p13, @p14);
2024-06-12 18:47:00.494 +03:00 [INF] Person Information added successfully
2024-06-12 18:47:00.495 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.Add (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 160.3185ms.
2024-06-12 18:47:00.496 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 18:47:00.496 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 166.2672ms
2024-06-12 18:47:00.497 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 18:47:00.498 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 172.4922ms
2024-06-12 18:47:36.501 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 320
2024-06-12 18:47:36.504 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 18:47:36.505 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 18:47:36.508 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 18:47:36.509 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 1.8646ms
2024-06-12 18:47:36.510 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 18:47:36.510 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 9.2818ms
2024-06-12 18:47:50.400 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/PersonInformation - application/json 322
2024-06-12 18:47:50.401 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 18:47:50.403 +03:00 [INF] Route matched with {action = "Add", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(App.Dtos.PersonInformationDtos.PersonInformationCreateDto) on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 18:47:50.406 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-12 18:47:50.407 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.Add (WebApi) in 2.2582ms
2024-06-12 18:47:50.408 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.Add (WebApi)'
2024-06-12 18:47:50.409 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/PersonInformation - 400 null application/problem+json; charset=utf-8 9.1617ms
2024-06-12 18:49:04.280 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 18:49:04.283 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 18:49:04.288 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 18:49:04.291 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 18:49:04.293 +03:00 [INF] Executing GetAll method
2024-06-12 18:49:04.426 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 18:49:04.437 +03:00 [INF] GetAll method executed successfully
2024-06-12 18:49:04.438 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 146.7853ms.
2024-06-12 18:49:04.439 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 18:49:04.446 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 156.7341ms
2024-06-12 18:49:04.447 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 18:49:04.448 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 167.58ms
2024-06-12 18:49:22.531 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=3874b5e6-cec5-4672-9cdf-6958a7c59ac8 - multipart/form-data; boundary=---------------------------361723509417183288591935455947 1135370
2024-06-12 18:49:22.533 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 18:49:22.541 +03:00 [INF] Route matched with {action = "UploadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile, System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 18:49:22.594 +03:00 [INF] Executing action method WebApi.Controllers.FileController.UploadFile (WebApi) - Validation state: "Valid"
2024-06-12 18:49:22.596 +03:00 [INF] Executing UploadFile method for user: "b5b77281-02fd-4f79-829f-2380067c7d29"
2024-06-12 18:49:22.599 +03:00 [INF] Uploading file: Screenshot 2024-06-02 232420.png for user: "b5b77281-02fd-4f79-829f-2380067c7d29"
2024-06-12 18:49:22.927 +03:00 [INF] Uploading file: Screenshot 2024-06-02 232420.png for user: null
2024-06-12 18:49:23.018 +03:00 [ERR] Failed executing DbCommand (63ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ProfilePhotos] ([Id], [FileName], [FilePath], [PersonInformationId], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 18:49:23.050 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAccess.MainDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProfilePhotos_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:1e3eabc6-e778-4936-91ca-f3cd09240609
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProfilePhotos_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:1e3eabc6-e778-4936-91ca-f3cd09240609
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-06-12 18:49:23.063 +03:00 [ERR] An error occurred while uploading file: Screenshot 2024-06-02 232420.png for user: "b5b77281-02fd-4f79-829f-2380067c7d29"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProfilePhotos_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:1e3eabc6-e778-4936-91ca-f3cd09240609
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 26
2024-06-12 18:49:23.079 +03:00 [ERR] Error occurred while uploading file: Screenshot 2024-06-02 232420.png for user: "b5b77281-02fd-4f79-829f-2380067c7d29"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProfilePhotos_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:1e3eabc6-e778-4936-91ca-f3cd09240609
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 26
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 32
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 64
2024-06-12 18:49:23.094 +03:00 [ERR] Error occurred while uploading file for user: "b5b77281-02fd-4f79-829f-2380067c7d29"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProfilePhotos_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:1e3eabc6-e778-4936-91ca-f3cd09240609
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 26
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 32
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 64
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 70
   at WebApi.Controllers.FileController.UploadFile(IFormFile file, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\FileController.cs:line 35
2024-06-12 18:49:23.106 +03:00 [INF] Executed action method WebApi.Controllers.FileController.UploadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 511.6483ms.
2024-06-12 18:49:23.109 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 18:49:23.110 +03:00 [INF] Executed action WebApi.Controllers.FileController.UploadFile (WebApi) in 566.2879ms
2024-06-12 18:49:23.111 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 18:49:23.114 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=3874b5e6-cec5-4672-9cdf-6958a7c59ac8 - 409 null text/plain; charset=utf-8 582.9664ms
2024-06-12 18:50:32.524 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=3874b5e6-cec5-4672-9cdf-6958a7c59ac8 - multipart/form-data; boundary=---------------------------117539358324995819533889354768 10479
2024-06-12 18:50:32.526 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 18:50:32.527 +03:00 [INF] Route matched with {action = "UploadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile, System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 18:50:32.530 +03:00 [INF] Executing action method WebApi.Controllers.FileController.UploadFile (WebApi) - Validation state: "Valid"
2024-06-12 18:50:32.531 +03:00 [INF] Executing UploadFile method for user: "b5b77281-02fd-4f79-829f-2380067c7d29"
2024-06-12 18:50:32.532 +03:00 [INF] Uploading file: 872700020150.xlsx for user: "b5b77281-02fd-4f79-829f-2380067c7d29"
2024-06-12 18:50:32.536 +03:00 [ERR] Error occurred while uploading file: 872700020150.xlsx for user: "b5b77281-02fd-4f79-829f-2380067c7d29"
SixLabors.ImageSharp.UnknownImageFormatException: Image cannot be loaded. Available decoders:
 - PNG : PngDecoder
 - TIFF : TiffDecoder
 - JPEG : JpegDecoder
 - PBM : PbmDecoder
 - Webp : WebpDecoder
 - GIF : GifDecoder
 - QOI : QoiDecoder
 - TGA : TgaDecoder
 - BMP : BmpDecoder

   at SixLabors.ImageSharp.Formats.ImageFormatManager.ThrowInvalidDecoder(ImageFormatManager manager)
   at SixLabors.ImageSharp.Image.InternalDetectFormat(Configuration configuration, Stream stream)
   at SixLabors.ImageSharp.Image.DiscoverDecoder(DecoderOptions options, Stream stream)
   at SixLabors.ImageSharp.Image.DecodeAsync(DecoderOptions options, Stream stream, CancellationToken cancellationToken)
   at SixLabors.ImageSharp.Image.<>c__DisplayClass82_0.<LoadAsync>b__0(Stream s, CancellationToken ct)
   at SixLabors.ImageSharp.Image.WithSeekableStreamAsync[T](DecoderOptions options, Stream stream, Func`3 action, CancellationToken cancellationToken)
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 52
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 61
2024-06-12 18:50:32.541 +03:00 [ERR] Error occurred while uploading file for user: "b5b77281-02fd-4f79-829f-2380067c7d29"
SixLabors.ImageSharp.UnknownImageFormatException: Image cannot be loaded. Available decoders:
 - PNG : PngDecoder
 - TIFF : TiffDecoder
 - JPEG : JpegDecoder
 - PBM : PbmDecoder
 - Webp : WebpDecoder
 - GIF : GifDecoder
 - QOI : QoiDecoder
 - TGA : TgaDecoder
 - BMP : BmpDecoder

   at SixLabors.ImageSharp.Formats.ImageFormatManager.ThrowInvalidDecoder(ImageFormatManager manager)
   at SixLabors.ImageSharp.Image.InternalDetectFormat(Configuration configuration, Stream stream)
   at SixLabors.ImageSharp.Image.DiscoverDecoder(DecoderOptions options, Stream stream)
   at SixLabors.ImageSharp.Image.DecodeAsync(DecoderOptions options, Stream stream, CancellationToken cancellationToken)
   at SixLabors.ImageSharp.Image.<>c__DisplayClass82_0.<LoadAsync>b__0(Stream s, CancellationToken ct)
   at SixLabors.ImageSharp.Image.WithSeekableStreamAsync[T](DecoderOptions options, Stream stream, Func`3 action, CancellationToken cancellationToken)
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 52
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 61
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 70
   at WebApi.Controllers.FileController.UploadFile(IFormFile file, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\FileController.cs:line 35
2024-06-12 18:50:32.546 +03:00 [INF] Executed action method WebApi.Controllers.FileController.UploadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 14.1129ms.
2024-06-12 18:50:32.547 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 18:50:32.548 +03:00 [INF] Executed action WebApi.Controllers.FileController.UploadFile (WebApi) in 19.4703ms
2024-06-12 18:50:32.549 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 18:50:32.551 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=3874b5e6-cec5-4672-9cdf-6958a7c59ac8 - 409 null text/plain; charset=utf-8 26.8101ms
2024-06-12 18:59:04.545 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 18:59:04.547 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 18:59:04.547 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 18:59:04.549 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 18:59:04.549 +03:00 [INF] Executing GetAll method
2024-06-12 18:59:05.004 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 18:59:05.005 +03:00 [INF] GetAll method executed successfully
2024-06-12 18:59:05.006 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 456.5945ms.
2024-06-12 18:59:05.007 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 18:59:05.007 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 459.0891ms
2024-06-12 18:59:05.008 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 18:59:05.009 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 464.2568ms
2024-06-12 19:03:20.249 +03:00 [INF] Application is shutting down...
2024-06-12 19:03:25.193 +03:00 [INF] Starting application
2024-06-12 19:03:25.321 +03:00 [INF] Configuring application
2024-06-12 19:03:25.448 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 19:03:25.509 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 19:03:25.512 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 19:03:25.513 +03:00 [INF] Hosting environment: Development
2024-06-12 19:03:25.513 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 19:03:26.186 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 19:03:26.310 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 124.714ms
2024-06-12 19:03:26.338 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui.css - null null
2024-06-12 19:03:26.350 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-06-12 19:03:26.351 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui.css - 499 143943 text/css 13.4219ms
2024-06-12 19:03:26.438 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 19:03:26.517 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 78.5612ms
2024-06-12 19:03:38.925 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Register - application/json 162
2024-06-12 19:03:38.933 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 19:03:38.967 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 19:03:39.000 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(App.Dtos.UserDtos.UserRegisterDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 19:03:39.316 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Register (WebApi) - Validation state: "Valid"
2024-06-12 19:03:39.320 +03:00 [INF] Executing Register method for userName: SvgF0HVhhZjhkRk0UydJ
2024-06-12 19:03:39.322 +03:00 [INF] Registering user with username: SvgF0HVhhZjhkRk0UydJ
2024-06-12 19:03:39.325 +03:00 [INF] Fetching user by username: SvgF0HVhhZjhkRk0UydJ
2024-06-12 19:03:41.366 +03:00 [INF] Executed DbCommand (108ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 19:03:41.417 +03:00 [WRN] User with username: SvgF0HVhhZjhkRk0UydJ not found
2024-06-12 19:03:41.419 +03:00 [INF] Creating user with username: SvgF0HVhhZjhkRk0UydJ
2024-06-12 19:03:41.423 +03:00 [INF] Creating user with username: SvgF0HVhhZjhkRk0UydJ
2024-06-12 19:03:41.672 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 15), @p4='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [PasswordHash], [PasswordSalt], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 19:03:41.687 +03:00 [INF] Successfully created user with username: SvgF0HVhhZjhkRk0UydJ
2024-06-12 19:03:41.688 +03:00 [INF] Successfully registered user with username: SvgF0HVhhZjhkRk0UydJ
2024-06-12 19:03:41.689 +03:00 [INF] User registered successfully with userName: SvgF0HVhhZjhkRk0UydJ
2024-06-12 19:03:41.696 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Register (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2373.1033ms.
2024-06-12 19:03:41.706 +03:00 [INF] Executing OkObjectResult, writing value of type 'WebApi.Models.Response'.
2024-06-12 19:03:41.718 +03:00 [INF] Executed action WebApi.Controllers.UserController.Register (WebApi) in 2713.2713ms
2024-06-12 19:03:41.719 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Register (WebApi)'
2024-06-12 19:03:41.728 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Register - 200 null application/json; charset=utf-8 2803.1002ms
2024-06-12 19:03:47.661 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 62
2024-06-12 19:03:47.722 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 19:03:47.728 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 19:03:47.740 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 19:03:47.742 +03:00 [INF] Executing Login method for userName: RokasRokas
2024-06-12 19:03:47.746 +03:00 [INF] User login attempt with username: RokasRokas
2024-06-12 19:03:47.748 +03:00 [INF] Fetching user by username: RokasRokas
2024-06-12 19:03:47.874 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 19:03:47.884 +03:00 [INF] Generating JWT token for username: RokasRokas
2024-06-12 19:03:47.893 +03:00 [INF] User successfully logged in with username: RokasRokas
2024-06-12 19:03:47.893 +03:00 [INF] User logged in successfully with userName: RokasRokas
2024-06-12 19:03:47.894 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 152.4835ms.
2024-06-12 19:03:47.895 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 19:03:47.896 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 166.4251ms
2024-06-12 19:03:47.898 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 19:03:47.899 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 238.1127ms
2024-06-12 19:03:56.696 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/api/PersonInformation - null null
2024-06-12 19:03:56.702 +03:00 [INF] Executing endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 19:03:56.705 +03:00 [INF] Route matched with {action = "GetAll", controller = "PersonInformation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[App.Dtos.PersonInformationDtos.PersonInformationDto]]] GetAll() on controller WebApi.Controllers.PersonInformationController (WebApi).
2024-06-12 19:03:56.707 +03:00 [INF] Executing action method WebApi.Controllers.PersonInformationController.GetAll (WebApi) - Validation state: "Valid"
2024-06-12 19:03:56.709 +03:00 [INF] Executing GetAll method
2024-06-12 19:03:56.840 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId]
FROM [PersonInformations] AS [p]
WHERE [p].[UserId] = @__userId_0
2024-06-12 19:03:56.867 +03:00 [INF] GetAll method executed successfully
2024-06-12 19:03:56.868 +03:00 [INF] Executed action method WebApi.Controllers.PersonInformationController.GetAll (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 159.7602ms.
2024-06-12 19:03:56.870 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[App.Dtos.PersonInformationDtos.PersonInformationDto, App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-12 19:03:56.876 +03:00 [INF] Executed action WebApi.Controllers.PersonInformationController.GetAll (WebApi) in 170.5235ms
2024-06-12 19:03:56.877 +03:00 [INF] Executed endpoint 'WebApi.Controllers.PersonInformationController.GetAll (WebApi)'
2024-06-12 19:03:56.880 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/api/PersonInformation - 200 null application/json; charset=utf-8 183.968ms
2024-06-12 19:04:18.131 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=3874b5e6-cec5-4672-9cdf-6958a7c59ac8 - multipart/form-data; boundary=---------------------------402640603035333361622132209616 1240
2024-06-12 19:04:18.134 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 19:04:18.140 +03:00 [INF] Route matched with {action = "UploadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile, System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 19:04:18.158 +03:00 [INF] Executing action method WebApi.Controllers.FileController.UploadFile (WebApi) - Validation state: "Valid"
2024-06-12 19:04:18.160 +03:00 [INF] Executing UploadFile method for user: "b5b77281-02fd-4f79-829f-2380067c7d29"
2024-06-12 19:04:18.162 +03:00 [INF] Uploading file: Screenshot 2024-06-10 101757.png for user: "b5b77281-02fd-4f79-829f-2380067c7d29"
2024-06-12 19:04:18.251 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[@__id_0='?' (DbType = Guid), @__userId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId], [p0].[Id], [p0].[ApartmentNumber], [p0].[City], [p0].[HouseNumber], [p0].[PersonInformationId], [p0].[Street], [p1].[Id], [p1].[FileName], [p1].[FilePath], [p1].[PersonInformationId], [p1].[UserId]
FROM [PersonInformations] AS [p]
LEFT JOIN [PlaceOfResidences] AS [p0] ON [p].[Id] = [p0].[Id]
LEFT JOIN [ProfilePhotos] AS [p1] ON [p].[Id] = [p1].[Id]
WHERE [p].[Id] = @__id_0 AND [p].[UserId] = @__userId_1
2024-06-12 19:04:18.259 +03:00 [WRN] PersonInformation with Id: "3874b5e6-cec5-4672-9cdf-6958a7c59ac8" does not exist
2024-06-12 19:04:18.262 +03:00 [ERR] Error occurred while uploading file: Screenshot 2024-06-10 101757.png for user: "b5b77281-02fd-4f79-829f-2380067c7d29"
System.ArgumentException: Invalid PersonInformationId (Parameter 'personInformationId')
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 46
2024-06-12 19:04:18.287 +03:00 [ERR] Error occurred while uploading file for user: "b5b77281-02fd-4f79-829f-2380067c7d29"
System.ArgumentException: Invalid PersonInformationId (Parameter 'personInformationId')
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 46
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 80
   at WebApi.Controllers.FileController.UploadFile(IFormFile file, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\FileController.cs:line 35
2024-06-12 19:04:18.291 +03:00 [INF] Executed action method WebApi.Controllers.FileController.UploadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 132.4268ms.
2024-06-12 19:04:18.295 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 19:04:18.296 +03:00 [INF] Executed action WebApi.Controllers.FileController.UploadFile (WebApi) in 154.5871ms
2024-06-12 19:04:18.297 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 19:04:18.299 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=3874b5e6-cec5-4672-9cdf-6958a7c59ac8 - 409 null text/plain; charset=utf-8 167.5294ms
2024-06-12 19:06:19.000 +03:00 [INF] Application is shutting down...
2024-06-12 19:06:21.970 +03:00 [INF] Starting application
2024-06-12 19:06:22.070 +03:00 [INF] Configuring application
2024-06-12 19:06:22.191 +03:00 [INF] User profile is available. Using 'C:\Users\tarvy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-12 19:06:22.248 +03:00 [INF] Now listening on: http://localhost:5236
2024-06-12 19:06:22.250 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-12 19:06:22.251 +03:00 [INF] Hosting environment: Development
2024-06-12 19:06:22.252 +03:00 [INF] Content root path: C:\Projects\Rider\FinalCodeAcademyApp\WebApi
2024-06-12 19:06:22.525 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/index.html - null null
2024-06-12 19:06:22.643 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/index.html - 200 null text/html;charset=utf-8 119.7405ms
2024-06-12 19:06:22.676 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui.css - null null
2024-06-12 19:06:22.689 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-06-12 19:06:22.690 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/swagger-ui.css - 499 143943 text/css 13.8077ms
2024-06-12 19:06:22.747 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - null null
2024-06-12 19:06:22.820 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5236/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 73.227ms
2024-06-12 19:06:29.766 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/User/Login - application/json 62
2024-06-12 19:06:29.772 +03:00 [WRN] Failed to determine the https port for redirect.
2024-06-12 19:06:29.827 +03:00 [INF] Executing endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 19:06:29.845 +03:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Dtos.UserDtos.UserLoginDto) on controller WebApi.Controllers.UserController (WebApi).
2024-06-12 19:06:30.150 +03:00 [INF] Executing action method WebApi.Controllers.UserController.Login (WebApi) - Validation state: "Valid"
2024-06-12 19:06:30.158 +03:00 [INF] Executing Login method for userName: RokasRokas
2024-06-12 19:06:30.162 +03:00 [INF] User login attempt with username: RokasRokas
2024-06-12 19:06:30.164 +03:00 [INF] Fetching user by username: RokasRokas
2024-06-12 19:06:32.096 +03:00 [INF] Executed DbCommand (101ms) [Parameters=[@__username_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__username_0
2024-06-12 19:06:32.228 +03:00 [INF] Generating JWT token for username: RokasRokas
2024-06-12 19:06:32.246 +03:00 [INF] User successfully logged in with username: RokasRokas
2024-06-12 19:06:32.249 +03:00 [INF] User logged in successfully with userName: RokasRokas
2024-06-12 19:06:32.258 +03:00 [INF] Executed action method WebApi.Controllers.UserController.Login (WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2096.957ms.
2024-06-12 19:06:32.267 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-06-12 19:06:32.279 +03:00 [INF] Executed action WebApi.Controllers.UserController.Login (WebApi) in 2423.7562ms
2024-06-12 19:06:32.282 +03:00 [INF] Executed endpoint 'WebApi.Controllers.UserController.Login (WebApi)'
2024-06-12 19:06:32.300 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/User/Login - 200 null text/plain; charset=utf-8 2533.7034ms
2024-06-12 19:06:39.435 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=3874b5e6-cec5-4672-9cdf-6958a7c59ac8 - multipart/form-data; boundary=---------------------------288492837211083123143106395787 1240
2024-06-12 19:06:39.445 +03:00 [INF] Executing endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 19:06:39.452 +03:00 [INF] Route matched with {action = "UploadFile", controller = "File"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile, System.Guid) on controller WebApi.Controllers.FileController (WebApi).
2024-06-12 19:06:39.484 +03:00 [INF] Executing action method WebApi.Controllers.FileController.UploadFile (WebApi) - Validation state: "Valid"
2024-06-12 19:06:39.497 +03:00 [INF] Executing UploadFile method for user: "b5b77281-02fd-4f79-829f-2380067c7d29"
2024-06-12 19:06:39.501 +03:00 [INF] Uploading file: Screenshot 2024-06-10 101757.png for user: "b5b77281-02fd-4f79-829f-2380067c7d29"
2024-06-12 19:06:39.740 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@__id_0='?' (DbType = Guid), @__userId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Birthday], [p].[Email], [p].[FirstName], [p].[Gender], [p].[LastName], [p].[PersonalCode], [p].[PhoneNumber], [p].[UserId], [p0].[Id], [p0].[ApartmentNumber], [p0].[City], [p0].[HouseNumber], [p0].[PersonInformationId], [p0].[Street], [p1].[Id], [p1].[FileName], [p1].[FilePath], [p1].[PersonInformationId], [p1].[UserId]
FROM [PersonInformations] AS [p]
LEFT JOIN [PlaceOfResidences] AS [p0] ON [p].[Id] = [p0].[Id]
LEFT JOIN [ProfilePhotos] AS [p1] ON [p].[Id] = [p1].[Id]
WHERE [p].[Id] = @__id_0 AND [p].[UserId] = @__userId_1
2024-06-12 19:06:40.067 +03:00 [INF] Uploading file: Screenshot 2024-06-10 101757.png for user: null
2024-06-12 19:06:40.318 +03:00 [ERR] Failed executing DbCommand (68ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [ProfilePhotos] ([Id], [FileName], [FilePath], [PersonInformationId], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-12 19:06:40.345 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAccess.MainDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProfilePhotos_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5c5c8b89-2fbf-4c22-8060-5450a085d1bc
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProfilePhotos_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5c5c8b89-2fbf-4c22-8060-5450a085d1bc
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-06-12 19:06:40.353 +03:00 [ERR] An error occurred while uploading file: Screenshot 2024-06-10 101757.png for user: "b5b77281-02fd-4f79-829f-2380067c7d29"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProfilePhotos_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5c5c8b89-2fbf-4c22-8060-5450a085d1bc
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 26
2024-06-12 19:06:40.361 +03:00 [ERR] Error occurred while uploading file: Screenshot 2024-06-10 101757.png for user: "b5b77281-02fd-4f79-829f-2380067c7d29"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProfilePhotos_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5c5c8b89-2fbf-4c22-8060-5450a085d1bc
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 26
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 32
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 74
2024-06-12 19:06:40.368 +03:00 [ERR] Error occurred while uploading file for user: "b5b77281-02fd-4f79-829f-2380067c7d29"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProfilePhotos_PersonInformations_Id". The conflict occurred in database "FinalCodeAcademyApp", table "dbo.PersonInformations", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5c5c8b89-2fbf-4c22-8060-5450a085d1bc
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 26
   at DataAccess.Repositories.FileRepository.UploadFile(ProfilePhoto file, Guid userId) in C:\Projects\Rider\FinalCodeAcademyApp\DataAccess\Repositories\FileRepository.cs:line 32
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 74
   at App.Services.FileService.UploadFile(IFormFile file, Guid userId, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\App\Services\FileService.cs:line 80
   at WebApi.Controllers.FileController.UploadFile(IFormFile file, Guid personInformationId) in C:\Projects\Rider\FinalCodeAcademyApp\WebApi\Controllers\FileController.cs:line 35
2024-06-12 19:06:40.375 +03:00 [INF] Executed action method WebApi.Controllers.FileController.UploadFile (WebApi), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 880.0743ms.
2024-06-12 19:06:40.376 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2024-06-12 19:06:40.377 +03:00 [INF] Executed action WebApi.Controllers.FileController.UploadFile (WebApi) in 923.3395ms
2024-06-12 19:06:40.379 +03:00 [INF] Executed endpoint 'WebApi.Controllers.FileController.UploadFile (WebApi)'
2024-06-12 19:06:40.381 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5236/api/File/upload?personInformationId=3874b5e6-cec5-4672-9cdf-6958a7c59ac8 - 409 null text/plain; charset=utf-8 946.5433ms
2024-06-12 19:11:42.753 +03:00 [INF] Application is shutting down...
